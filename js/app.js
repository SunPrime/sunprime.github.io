function prettyHours(e){var t=parseInt(e)||0;return 0!=t?Math.round(t/36)/100+"h":""}var app=angular.module("searchApp",["ngRoute","localization","aui","talis.services.logging","xeditable","ui.sortable"]);app.run(["editableOptions","editableThemes",function(e,t){e.theme="aui",t.aui={formTpl:'<form class="aui"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="inline-edit-fields" tabindex="1"><div class="field-group"></div></div>',inputTpl:"",errorTpl:'<div class="editable-error" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button class="aui-button submit" accesskey="s" type="submit" title="Press Alt+s to submit this form"><span class="aui-icon aui-icon-small aui-iconfont-success">Save</span></button>',cancelTpl:'<button class="aui-button cancel" type="cancel" ng-click="$form.$cancel()" title="Press Alt+` to cancel"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Cancel</span></button>',buttonsClass:"",inputClass:"text",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableTime":case"editableMonth":case"editableWeek":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}}}]),app.config(["$routeProvider","$httpProvider","$provide",function(e,t,n){var r=window.RA||window.AP,i=["$q",function(e){var t=e.defer();return r.getLocation(function(e){var n=e.split("project.key=")[1];n=n?n.split("&")[0]:void 0,t.resolve(n)}),t.promise}],o=["$q","$rootScope","$location",function(e,t,n){var i=e.defer();return r.getUser(function(e){i.resolve(e)}),i.promise}];e.when("/",{controller:"SearchController",templateUrl:"templates/main.html",resolve:{loggedInUser:o,projectKey:i}}).when("/columns",{controller:"ColumnController",templateUrl:"templates/main.html",resolve:{loggedInUser:o,projectKey:i}}).otherwise({redirectTo:"/"}),n.decorator("$exceptionHandler",["$delegate","exceptionHandlerInterceptor",function(e,t){return function(n,r){t.invoke?t.invoke(n,r):e(n,r)}}]),t.defaults.headers.common.Authorization="JWT "+window.atlToken,n.factory("authHttpInterceptor",["$injector","$q",function(e,n){return{response:function(n){var r=n.headers("X-acpt");return r&&(t.defaults.headers.common["X-acpt"]=r,e.get("authbeat").authbeat()),n},responseError:function(e){return 401==e.status&&"/authbeat"!=e.config.url&&r.require("messages",function(e){e.error("Authentication expired","Reload page to restore communication with add-on backend")}),n.reject(e)}}}]),n.factory("urlRewriteHttpInterceptor",["$injector","$window",function(e,t){return{request:function(e){var n=e.url.match(/^\/?(.+?)\//);return n&&"i18n"==n[1]&&(e.url=t.i18nDefault),e}}}]),t.interceptors.push("authHttpInterceptor","urlRewriteHttpInterceptor")}]).run(["localize",function(e){e.initLocalizedResources()}]).service("exceptionHandlerInterceptor",function(){}).service("authbeat",["$timeout","$http",function(e,t){this.authbeatPromise=null,this.authbeat=function(){e.cancel(this.authbeatPromise),this.authbeatPromise=e(function(){t.get("/authbeat")},84e4,!1)}}]),app.controller("ColumnController",["$scope","$routeParams","$sce","$q","$route","searchService","columnService","$compile","$interpolate","loggedInUser","exceptionHandlerInterceptor","projectKey","applicationLoggingService",function(e,t,n,r,i,o,a,s,l,u,c,d,f){e.menuInfo={contentTemplate:"templates/columns.html",isColumn:!0},e.licenseManager=SearchUtils.getLicenseManager(e,n),e.filterOptions={filters:o.data.allFilters};var h=o.getDefaultFilter(d);o.getFilters(u,{},function(e){e.splice(0,0,h)}).then(function(t){e.filterOptions.selected=o.data.filterId||h.id,e.filterSelected()}),e.columns=a.data.allColumns,a.getColumns({columnIds:[]}).then(function(){e.columnSelected(a.data.selectedColumnId||e.columns[0].id)}),e.column={};var p={name:"",template:'<span ng-bind="{{column.expression}}"/>',expression:""};angular.isDefined(e.column.id)||angular.copy(p,e.column),e.columnSelected=function(t){a.data.selectedColumnId=t;var n=a.findById(t,e.columns);null!=n&&angular.copy(n,e.column)},e.preview={};var m=o.data.allIssues;e.issueOptions={issues:m,selected:o.data.selectedIssueId||(m.length>0?m[0].id:"")},e.filterSelected=function(){o.getIssues({filterId:e.filterOptions.selected}).then(function(t){e.issueOptions.issues=t,e.issueOptions.selected=o.data.selectedIssueId||(t.length>0?t[0].id:null),e.issueSelected()})},e.issueSelected=function(){o.data.selectedIssueId=e.issueOptions.selected;var t=a.findById(e.issueOptions.selected,e.issueOptions.issues),n=function(e,t){if(-1==["expand","self","$$hashKey"].indexOf(e))return t};null!=t&&(e.preview.issue=t,e.preview.issueJson=JSON.stringify(t,n,"  "))},e.columnOptions={};var g=function(){delete e.columnOptions.templateError,angular.isDefined(e.columnOptions.templateError)||(e.columnOptions.noTemplateError=!0,c.invoke=function(t,n){e.columnOptions.templateError=t.message,delete e.columnOptions.noTemplateError},s(e.column.template)(e),delete c.invoke)};e.$watch("column.template",g),e.$watch("column.expression",function(){delete e.columnOptions.expressionError,e.columnOptions.noExpressionError=!0,c.invoke=function(t,n){e.columnOptions.expressionError=t.message,delete e.columnOptions.noExpressionError},l("{{"+e.column.expression+"}}")(e),delete c.invoke,g()}),e.saveColumn=function(t){var n;return e.column._global&&(delete e.column.id,delete e.column._global),angular.isDefined(e.column.id)?n=a.updateColumn(e.column,{}):(n=a.addColumn(e.column),n.then(function(t){e.columnSelected(t.id)})),e.showSaveAsNewButton=!1,t.$setPristine(),n.promise},e.columnNameChanged=function(){e.column.name&&e.column.id&&!e.column._global&&(e.showSaveAsNewButton=!0)},e.saveAsNewColumn=function(t){delete e.column.id,e.saveColumn(t)},e.removeColumn=function(t){var n=a.removeColumn(e.column,t);return e.columnSelected(e.columns.length>0?e.columns[0].id:""),n.promise},e.newColumn=function(){angular.copy(p,e.column),e.showSaveAsNewButton=!1},e.refresh=function(){o.resetState(),a.resetState(),i.reload()},e.resize=function(){AP.resize()},e.logger=f}]),app.controller("ColumnDialogController",function(e,t,n,r,i){e.columnOptions={selected:"",columns:n},e.selectedColumns=[],r.forEach(function(r){var i=t.findById(r,n);e.selectedColumns.push(i)}),e.columnSelected=function(){var r=!1,i=t.findById(e.columnOptions.selected,n);e.selectedColumns.forEach(function(e){e.id==i.id&&(r=!0)}),r?AP.require("messages",function(e){e.warning("Failed to add column","Column is already added")}):e.selectedColumns.push(i)},e.removeSelectedColumn=function(t){for(var n=0;n<e.selectedColumns.length;n++)e.selectedColumns[n].id==t&&e.selectedColumns.splice(n,1)},e.saveSelectedColumns=function(){e.closeDialog(t.getColumnIds(e.selectedColumns))},e.cancelDialog=function(){i.dismiss()},e.closeDialog=function(e){i.close(e)}}),app.controller("GadgetController",["$scope","$rootScope","$route","$routeParams","$q","$location","$timeout","searchService",function(e,t,n,r,i,o,a,s){var l=function(){return SearchUtils.normalizeObject({viewId:e.$parent.viewOptions.selected,filterId:e.$parent.filterOptions.selected},!0)};e.saveGadgetConfig=function(){var n=l();s.saveGadgetConfiguration(e.dashboardId,e.dashboardItemId,n).then(t.$emit("gadgetConfigSave"))},e.cancelGadgetConfigSaving=function(){t.$emit("gadgetConfigCancel")}}]),app.controller("SearchController",["$scope","$rootScope","$sce","$q","$route","$routeParams","$location","$modal","searchService","columnService","viewService","loggedInUser","projectKey","$document",function(e,t,n,r,i,o,a,s,l,u,c,d,f,h){function p(p,m){e.showGadgetConfiguration=!1,e.isGadget&&AP.require("jira",function(t){t.DashboardItem.onDashboardItemEdit(function(){e.$apply("showGadgetConfiguration = true"),AP.resize()})}),t.$on("gadgetConfigSave",function(){e.refresh()}),t.$on("gadgetConfigCancel",function(){e.showGadgetConfiguration=!1,AP.resize()}),e.menuInfo={contentTemplate:"templates/issues.html",isView:!0},e.licenseManager=SearchUtils.getLicenseManager(e,n),e.currentView=c.data.currentView,e.viewOptions={views:c.data.allViews,selected:c.data.currentView.id},e.projectKey=f,e.columns=u.data.currentColumns,e.allColumns=u.data.allColumns,e.issues=l.data.issues,e.issuesCount=l.data.issuesCount,e.pages=[],e.loading=!0;var g,v=function(e){var t=[];return angular.isArray(e)?t=e.map(function(e){return parseInt(e)}):angular.isDefined(e)&&t.push(parseInt(e)),t},b=c.getViews({viewId:p}).then(function(){e.viewOptions.selected=c.data.currentView.id;var t=angular.isDefined(c.data.currentView.id);e.isGadget&&t&&AP.require("jira",function(e){e.setDashboardItemTitle(c.data.currentView.name)}),e.showDeleteButton=t,o.columnId&&(e.currentView.columns=v(o.columnId)),e.showSaveButton=(e.currentView._origColumns||e.currentView.columns.length>0)&&!angular.equals(e.currentView.columns,e.currentView._origColumns),u.getColumns({columnIds:e.currentView.columns})}),y={filterId:o.filterId||l.data.filterId||m,projectKey:e.projectKey||"",maxResults:50,startAt:o.startAt||l.data.issuesCount.startAt||0};g=y.filterId?l.getFilter(y.filterId).then(function(e){var t=e.searchUrl.match(/\/rest\/api\/2\/search\?jql=(.*)$/);return t&&(y.filterQuery=t[1]),y}):r.resolve(y);var w=g.then(l.getIssues.bind(l));r.all([b,w]).then(function(t){e.loading=!1,e.issuesCount.end=Math.min(e.issuesCount.startAt+e.issuesCount.maxResults,e.issuesCount.total);for(var n=Math.ceil(e.issuesCount.total/e.issuesCount.maxResults),r=0;r<n;r++)e.pages.push(r);AP.resize()}).catch(function(t,n){e.loading=!1}),e.filterOptions={filters:l.data.allFilters};var x=l.getDefaultFilter(e.projectKey);l.getFilters(d,{},function(e){e.splice(0,0,x)}).then(function(t){e.filterOptions.selected=y.filterId}),e.viewSelected=function(e){a.search({viewId:e})},e.filterSelected=function(){var t=a.search();t.filterId=e.filterOptions.selected,l.data.filterId=null,t.startAt=0,l.data.issuesCount.startAt=0,a.search(t)},e.setStartAt=function(e){var t=a.search();t.startAt=e,a.search(t)},e.refresh=function(){l.resetState(),u.resetState(),c.resetState(),i.reload()},e.addColumn=function(){s.open({templateUrl:"column-dialog-template",controller:"ColumnDialogController",resolve:{columns:function(){return u.getAllColumnsGrouped()},selectedColumnIds:function(){return e.currentView.columns}}}).result.then(function(e){var t=a.search();e&&(t.columnId=e,0==e.length&&(t._=Date.now()),a.search(t))})},e.updateColumns=function(){var t=e.currentView.columns,n=a.search();t&&(n.columnId=t,0==t.length&&(n._=Date.now()),a.search(n))},e.saveViewAsNew=function(){c.addView(e.currentView).then(function(e){var t=a.search();t.viewId=e.id,a.search(t)})},e.saveView=function(){e.currentView.id?(c.updateView(e.currentView),e.showSaveAsNewButton=!1,e.showSaveButton=!1):e.saveViewAsNew()},e.deleteView=function(){c.removeView(e.currentView).then(function(){var e=a.search();e.viewId?delete e.viewId:e._=Date.now(),a.search(e)})},e.viewNameChanged=function(){e.showSaveAsNewButton=angular.isDefined(e.currentView.id),e.showSaveButton=!0},e.dragDropOptions={orderChanged:function(t){e.showSaveButton=!0;var n=a.search();n.columnId=u.getColumnIds(e.columns),a.search(n)},dragStart:function(e){angular.element(h[0].body).addClass("as-sortable-unselectable"),angular.element(".sortable-placeholder").css("min-width",e.source.itemScope.element.css("width"))},dragCancel:function(e){angular.element(h[0].body).removeClass("as-sortable-unselectable")}}}e.isGadget?l.getGadgetConfiguration(e.dashboardId,e.dashboardItemId).then(function(e){p(e.viewId,e.filterId||"")}):p(parseInt(o.viewId),"")}]),app.directive("context",function(){return{restrict:"E",scope:{items:"="},link:function(e,t,n){var r=e.items;angular.extend(e.$parent,r)}}}),app.directive("issueColumn",["$compile",function(e){return{restrict:"E",scope:{issue:"=",column:"="},link:function(t,n,r){n.html(e(t.column.template)(t))}}}]),app.directive("issueColumn2",["$compile",function(e){return{restrict:"E",scope:{issue:"=",column:"=",isValid:"="},link:function(t,n,r){t.$watchCollection(r.column,function(){t.isValid?n.html(e(t.column.template)(t)):n.html("")})}}}]),app.directive("issueType",function(){return{restrict:"E",scope:{issue:"="},replace:!0,template:'<a href="{{$parent.hostBaseUrl}}/browse/{{issue.key}}" target="_parent"><img width="16" height="16" title="{{issue.fields.issuetype.description}}" ng-src="{{issue.fields.issuetype.iconUrl}}" alt="{{issue.fields.issuetype.name}}" /></a>'}}),app.directive("issueKey",function(){return{restrict:"E",scope:{issue:"="},replace:!0,template:'<a href="{{$parent.hostBaseUrl}}/browse/{{issue.key}}" target="_parent">{{issue.key}}</a>'}}),app.directive("issueSummary",function(){return{restrict:"E",scope:{issue:"="},replace:!0,template:'<a href="{{$parent.hostBaseUrl}}/browse/{{issue.key}}" target="_parent">{{issue.fields.summary}}</a>'}}),app.directive("issuePriority",function(){return{restrict:"E",scope:{issue:"="},replace:!0,template:'<a href="{{$parent.hostBaseUrl}}/browse/{{issue.key}}" target="_parent"><img width="16" height="16" ng-src="{{issue.fields.priority.iconUrl}}" alt="{{issue.fields.priority.name}}" /></a>'}}),app.directive("auiSelect2",["$timeout",function(e){return{require:"ngModel",restrict:"A",link:function(e,t,n,r){e.$watch(n.ngModel,function(){$(t).auiSelect2()})}}}]),app.directive("columnsDropdown",["$timeout",function(e){return{restrict:"E",scope:{isGadget:"=",columns:"=",selected:"=",onClose:"&"},templateUrl:"/templates/columnsDropdown.html",link:function(e,t,n){e.checked=function(t){return e.selected.indexOf(t.id)>=0?"checked":""},e.save=function(){var t=[];angular.element("#columns-dropdown > div > ul > li > .checked").each(function(e,n){var r=angular.element(n);t.push(r.scope().column.id)}),r(e.selected,t),angular.element("#columns-dropdown-trigger").trigger("aui-button-invoke"),e.onClose()},e.cancel=function(){angular.element("#columns-dropdown > div > ul > li > a").each(function(t,n){var r=angular.element(n),i=r.scope().column.id;-1==e.selected.indexOf(i)?(r.removeClass("checked"),r.removeClass("aui-dropdown2-checked")):r.addClass("checked")}),angular.element("#columns-dropdown-trigger").trigger("aui-button-invoke")};var r=function(e,t){angular.forEach(e,function(n,r){-1==t.indexOf(n)&&e.splice(r,1)}),angular.forEach(t,function(t){-1==e.indexOf(t)&&e.push(t)})}}}}]),app.directive("auiInlineDialog",["$timeout",function(e){return{restrict:"A",scope:{auiInlineDialog:"@",callback:"&auiPopupCallback"},link:function(e,t,n,r){AJS.InlineDialog(t,"auiPopup",e.auiInlineDialog)}}}]),app.directive("highlight",[function(){return{restrict:"A",link:function(e,t,n){e.$watch(n.ngBind,function(){hljs.highlightBlock(t[0])})}}}]),app.directive("codemirror",[function(){return{restrict:"A",require:"ngModel",scope:{codemirrorOpts:"="},link:function(e,t,n,r){var i=CodeMirror.fromTextArea(t[0],e.codemirrorOpts);r.$render=function(){var e=r.$viewValue||"";i.setValue(e)},i.on("changes",function(t,n){var i=t.getValue();i!==r.$viewValue&&(e.$root.$$phase?r.$setViewValue(i):e.$apply(function(){r.$setViewValue(i)}),e.$parent.columnForm&&e.$parent.columnForm.$setPristine())})}}}]),app.directive("selectedColumn",[function(){return{restrict:"E",scope:{label:"=",removeAction:"&removeAction"},template:'<span id="closeable-label-nourl" class="aui-label aui-label-closeable">{{label}}<span ng-click="removeAction()" tabindex="0" class="aui-icon aui-icon-close" original-title="(remove closableNoUrl)">(remove closableNoUrl)</span></span>'}}]),app.filter("prettyHours",function(){return prettyHours}),app.filter("prettyDuration",function(){return function(e){var t=parseInt(e)||0,n="";if(t>=10368e3){var r=Math.floor(t/10368e3);n+=r+" years ",t-=10368e3*r}if(t>=864e3){var i=Math.floor(t/864e3);n+=i+" months ",t-=864e3*i}if(t>=144e3){var o=Math.floor(t/144e3);n+=o+" weeks ",t-=144e3*o}if(t>=28800){var a=Math.floor(t/28800);n+=a+" days ",t-=28800*a}if(t>=3600){var s=Math.floor(t/3600);n+=s+" hours ",t-=3600*s}if(!n&&t>=60){var l=Math.floor(t/60);n+=l+" minutes",t-=60*l}return n}}),app.filter("timeago",[function(){return function(e){var t=moment(e);return t.isValid()?t.fromNow():e}}]),app.filter("timeToResolve",["applicationLoggingService",function(e){return function(t){if(!t)return"";var n=(t.fields.resolution,t.fields.resolutiondate);n=n?moment(n):moment(),e.debug("resolutiondate",n.toDate());var r=moment(t.fields.created);e.debug("created",r.toDate());var i="",o=moment.unix(n.unix()-r.unix());o.add(o.utcOffset()/60,"hours"),e.debug("diff",o.toDate());var a=o.year()-1970;a>0&&(i+=a+"y ");var s=o.month();s>0&&(i+=s+"m ");var l=o.date()-1;if(l>=7){var u=Math.floor(l/7);i+=u+"w ",l-=7*u}l>0&&(i+=l+"d ");var c=o.hours();c>0&&(i+=c+"h ");var d=o.minutes();return i||(i+=d+" min"),e.debug("timeToResolve",i),i}}]),app.filter("timeToResolveLozenge",function(){return function(e){if(!e)return"";var t="aui-lozenge ",n=(e.fields.resolution,e.fields.resolutiondate);n?n=moment(n):(t+="aui-lozenge-subtle ",n=moment());var r=moment(e.fields.created),i=moment.unix(n.unix()-r.unix());i.add(i.utcOffset()/60,"hours");var o=i.year()-1970,a=i.month(),s=i.date()-1,l=i.hours(),u=i.minutes();return t+=o>0||a>0||s>5?"aui-lozenge-error":s>2||2==s&&(l>0||u>0)?"aui-lozenge-current":"aui-lozenge-success"}}),app.filter("timeLeft",function(){return function(e){if(!e)return"";var t=e.fields.duedate;if(!t&&e.fields.timeestimate)return prettyHours(e.fields.timeestimate);if(!t)return"-";t=moment(t);var n=moment(),r=null,i="";t.isBefore(n)?(i+="-",r=n.subtract(1e3*t.unix())):r=t.subtract(1e3*n.unix()),r.add(r.utcOffset()/60,"hours");var o=r.year()-1970;o>0&&(i+=o+"y ");var a=r.month();a>0&&(i+=a+"m ");var s=r.date()-1;if(s>=7){var l=Math.floor(s/7);i+=l+"w ",s-=7*l}s>0&&(i+=s+"d ");var u=r.hours();u>0&&(i+=u+"h ");var c=r.minutes();return i||(i+=c+" min"),i}}),app.filter("timeLeftLozenge",function(){return function(e){if(!e)return"";var t="aui-lozenge ",n=e.fields.duedate,r=e.fields.timeestimate,i=moment();n?n=moment(n):(t+="aui-lozenge-subtle ",n=i);var o=null,a=null;n.isBefore(i)?(o=i.subtract(1e3*n.unix()),a=-o.unix()):(o=n.subtract(1e3*i.unix()),a=o.unix()),o.add(o.utcOffset()/60,"hours");o.year(),o.month(),o.date(),o.hours(),o.minutes();return t+=a&&r>a?"aui-lozenge-error":!r&&a<28800||r&&a&&a-r<28800||!r&&!a?"aui-lozenge-current":"aui-lozenge-success"}}),angular.module("aui",["aui.tpls","aui.dialog2"]),angular.module("aui.tpls",["template/modal/backdrop.html","template/modal/window.html"]),angular.module("aui.dialog2",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,r=0;r<e.length;r++)if(t==e[r].key){n=r;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$modalStack","$timeout",function(e,t){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(n,r,i){t(function(){n.animate=!0}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalWindow",["$timeout",function(e){return{restrict:"EA",scope:{index:"@"},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(t,n,r){t.windowClass=r.windowClass||"",t.windowSizeClass="aui-dialog2-"+(r.windowSize||"small"),e(function(){t.animate=!0})}}}]).factory("$modalStack",["$document","$compile","$rootScope","$$stackedMap","$timeout",function(e,t,n,r,i){function o(){for(var e=-1,t=d.keys(),n=0;n<t.length;n++)d.get(t[n]).value.backdrop&&(e=n);return e}function a(e){var t=d.get(e).value;d.remove(e),t.modalDomEl.remove(),-1==o()&&(l.remove(),l=void 0),t.modalScope.$destroy()}var s,l,u=n.$new(!0),c=e.find("body").eq(0),d=r.createNew(),f={};return n.$watch(o,function(e){u.index=e}),e.bind("keydown",function(e){}),f.open=function(e,n){d.add(e,{deferred:n.deferred,modalScope:n.scope,backdrop:n.backdrop,keyboard:n.keyboard});var r=angular.element("<div modal-window></div>");r.attr("window-class",n.windowClass),r.attr("window-size",n.windowSize),r.attr("index",d.length()-1),r.html(n.content);var i=t(r)(n.scope);d.top().value.modalDomEl=i,c.append(i),o()>=0&&!l&&(s=angular.element("<div modal-backdrop></div>"),l=t(s)(u),c.append(l))},f.close=function(e,t){var n=d.get(e);n&&(n.value.deferred.resolve(t),a(e))},f.dismiss=function(e,t){var n=d.get(e).value;n&&(n.deferred.reject(t),a(e))},f.getTop=function(){return d.top()},f}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,r,i,o,a,s){function l(e){return e.template?r.when(e.template):i.get(e.templateUrl,{cache:o}).then(function(e){return e.data})}function u(e){var n=[];return angular.forEach(e,function(e,i){(angular.isFunction(e)||angular.isArray(e))&&n.push(r.when(t.invoke(e)))}),n}var c={};return c.open=function(t){var i=r.defer(),o=r.defer(),c={result:i.promise,opened:o.promise,close:function(e){s.close(c,e)},dismiss:function(e){s.dismiss(c,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var d=r.all([l(t)].concat(u(t.resolve)));return d.then(function(e){var r=(t.scope||n).$new();r.$close=c.close,r.$dismiss=c.dismiss;var o={},l=1;t.controller&&(o.$scope=r,o.$modalInstance=c,angular.forEach(t.resolve,function(t,n){o[n]=e[l++]}),a(t.controller,o)),s.open(c,{scope:r,deferred:i,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,windowClass:t.windowClass,windowSize:t.windowSize})},function(e){i.reject(e)}),d.then(function(){o.resolve(!0)},function(){o.reject(!1)}),c},c}]};return e}),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="aui-blanket" ng-style="{\'z-index\': 1040 + index*10}" ng-click="close($event)"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<section role="dialog" class="aui-layer aui-dialog2 {{windowSizeClass}} {{ windowClass }}" ng-style="{\'z-index\': 1050 + index*10}" ng-transclude>')}]);var loggingModule=angular.module("talis.services.logging",[]);loggingModule.factory("traceService",function(){return{print:printStackTrace}}),loggingModule.provider("$exceptionHandler",{$get:["exceptionLoggingService",function(e){return e}]}),loggingModule.factory("exceptionLoggingService",["$log","$window","traceService",function(e,t,n){function r(r,i){if(e.error.apply(e,arguments),t.loggerUrl)try{var o=r.toString(),a=n.print({e:r});$.ajax({type:"POST",url:t.loggerUrl,contentType:"application/json",data:angular.toJson({url:t.location.href,message:o,type:"exception",stackTrace:a,cause:i||""})})}catch(t){e.warn("Error server-side logging failed"),e.log(t)}}return r}]),loggingModule.factory("applicationLoggingService",["$log","$window",function(e,t){return{error:function(n){e.error.apply(e,arguments),t.loggerUrl&&$.ajax({type:"POST",url:t.loggerUrl,contentType:"application/json",data:angular.toJson({url:t.location.href,message:n,type:"error"})})},enabled:!1,debug:function(t){this.enabled&&e.log.apply(e,arguments)}}}]),app.service("columnService",["$q","$http","dataService",function(e,t,n){this.data={allColumns:[],currentColumns:[]},this.getAllColumnsGrouped=function(){var e=[];return this.data.allColumns.forEach(function(t){t._global?t._group="System Columns":t._group="User Columns",e.push(t)}),e},this.getColumnIds=function(e){var t=[];return e.forEach(function(e){t.push(e.id)}),t},this.resolveCurrentColumns=function(e,t){e.columnIds.forEach(function(e){this.data.allColumns.forEach(function(t){if(t.id==e)return void this.data.currentColumns.push(t)},this)},this),t.resolve(this.data.currentColumns)},this.getColumnsBak=function(n){var r=e.defer(),i=this;return this.data.currentColumns.splice(0,this.data.currentColumns.length),0==this.data.allColumns.length?t.get("/api/columns/").success(function(e){[].push.apply(i.data.allColumns,e),i.resolveCurrentColumns(n,r)}):i.resolveCurrentColumns(n,r),r.promise},this.getColumns=function(t){var r=e.defer(),i=this;return this.data.currentColumns.splice(0,this.data.currentColumns.length),0==this.data.allColumns.length?n.getProperty("columns",[]).then(function(e){[].push.apply(i.data.allColumns,e),i.resolveCurrentColumns(t,r)}):i.resolveCurrentColumns(t,r),r.promise},this.addColumnBak=function(n){var r=e.defer(),i=this;return t.post("/api/columns/",n).success(function(e){i.data.allColumns.push(e),i.data.currentColumns.push(e),r.resolve(e)}),r.promise},this.addColumn=function(t){var r=e.defer(),i=this;return n.getProperty("columns",[]).then(function(e){var o=e.length>0?e[e.length-1]:{id:0},a=angular.copy(t);a.id=o.id+1,e.push(a),n.setProperty("columns",e).then(function(){i.data.allColumns.push(a),i.data.currentColumns.push(a),r.resolve(a)})}),r.promise},this.updateColumnBak=function(n,r){var i=e.defer(),o=this;return t.put("/api/columns/"+n.id,n).success(function(e){if(o.data.allColumns.forEach(function(t,n){if(e.id==t.id)return void this.data.allColumns.splice(n,1,e)},o),angular.isDefined(r.id)){if(e.id!=r.id){var t=o.indexById(e.id,o.data.currentColumns);-1!=t&&o.data.currentColumns.splice(t,1)}var t=o.indexById(r.id,o.data.currentColumns);o.data.currentColumns.splice(t,1,e)}else{var t=o.indexById(e.id,o.data.currentColumns);-1!=t?o.data.currentColumns.splice(t,1,e):o.data.currentColumns.splice(o.data.currentColumns.length,0,e)}i.resolve(o.data.currentColumns)}),i.promise},this.updateColumn=function(t,r){var i=e.defer(),o=this;return n.getProperty("columns",[]).then(function(e){var r=o.indexById(t.id,e),i=angular.copy(t);e[r]=i,n.setProperty("columns",e).then(function(){var e=o.indexById(t.id,o.data.allColumns);o.data.allColumns.splice(e,1,i);var n=o.indexById(t.id,o.data.currentColumns);o.data.currentColumns.splice(n,1,i)})}),i.promise},this.removeColumnBak=function(n,r){var i=e.defer();if(r){t.delete("/api/columns/"+n.id);var o=this.indexById(n.id,this.data.allColumns);-1!=o&&this.data.allColumns.splice(o,1)}var o=this.indexById(n.id,this.data.currentColumns);return-1!=o&&this.data.currentColumns.splice(o,1),i.resolve(this.data.currentColumns),i.promise},this.removeColumn=function(t,r){var i=e.defer(),o=t.id;if(r){var a=this;n.getProperty("columns",[]).then(function(e){var t=a.indexById(o,e);e.splice(t,1),n.setProperty("columns",e).then(function(){var e=a.indexById(o,a.data.allColumns);a.data.allColumns.splice(e,1)})})}var s=this.indexById(o,this.data.currentColumns);return-1!=s&&this.data.currentColumns.splice(s,1),i.resolve(this.data.currentColumns),i.promise},this.indexById=function(e,t){var n=-1;return t.forEach(function(t,r){if(e==t.id)return void(n=r)}),n},this.findById=function(e,t){var n=this.indexById(e,t);return-1!=n?t[n]:null},this.resetState=function(){this.data.allColumns.splice(0,this.data.allColumns.length)}}]),app.service("dataService",["$q","applicationLoggingService","$http",function(e,t,n){var r=window.RA||window.AP,i="/rest/atlassian-connect/1/addons/lambda-plugin/properties/",o=e.defer(),a={};this.getProperty=function(t,n){var s=e.defer();return o.promise.then(function(){if(!a[t])return void s.resolve(n);r.request({url:i+t,success:function(e){var t=SearchUtils.getJson(e),n=SearchUtils.getJson(t.value);s.resolve(n)},error:function(e){s.resolve(n)}})}),s.promise},this.setProperty=function(t,n){var o=e.defer();return r.request({url:i+t,type:"PUT",data:JSON.stringify(n),contentType:"application/json",success:function(e){var n=SearchUtils.getJson(e),r=SearchUtils.getJson(n.value);o.resolve(r),a[t]=!0},error:function(e){o.reject(e)}}),o.promise};var s=1,l=function(e,t,n){return{id:s++,_global:!0,name:e,template:t,expression:n}};this.createColumns=function(){var t=e.defer(),n=[];return n.push(l("Timespent",'<span ng-bind="{{column.expression}}"/>',"issue.fields.timespent | prettyHours")),n.push(l("Time to resolve",'<span class="{{issue | timeToResolveLozenge}}" ng-bind="{{column.expression}}"/>',"issue | timeToResolve")),n.push(l("Time left",'<span class="{{issue | timeLeftLozenge}}" ng-bind="{{column.expression}}"/>',"issue | timeLeft")),this.setProperty("columns",n).then(t.resolve,t.resolve),t.promise};var u=this;r.request({url:i,success:function(e){if(e=SearchUtils.getJson(e),0==e.keys.length)u.createColumns().then(o.resolve);else{for(var t=0;t<e.keys.length;t++){var n=e.keys[t];a[n.key]=!0}o.resolve()}}})}]),app.service("searchService",["$q","applicationLoggingService",function(e,t){var n=window.RA||window.AP;this.data={allIssues:[],allFilters:[],filters:{},issues:[],issuesCount:{total:null,startAt:0,maxResults:50}},this.getIssues=function(t){var n=e.defer();if(null==this.data.issuesCount.total||this.data.filterId!=t.filterId||angular.isDefined(t.startAt)&&this.data.issuesCount.startAt!=t.startAt){delete this.data.selectedIssueId,this.data.issues.splice(0,this.data.issues.length),this.data.filterId=t.filterId;var r=this;this.getAllIssues(t.startAt,t).then(function(e){Array.prototype.push.apply(r.data.issues,e.issues),r.data.issuesCount.total=e.total,r.data.issuesCount.startAt=e.startAt,r.data.issuesCount.maxResults=e.maxResults,n.resolve(r.data.issues)})}else n.resolve(this.data.issues);return n.promise},this.getIssuesBak=function(t){var n=e.defer();if(0==this.data.allIssues.length||this.filterId!=t.filterId){this.data.allIssues.splice(0,this.data.allIssues.length),this.filterId=t.filterId;var r=this.getAllIssues(0,t),i=this;r.then(function(r){if(r.total>r.maxResults){for(var o=[],a=0;a<r.total/r.maxResults-1;a++){var s=service.getAllIssues(r.maxResults*(a+1),t);o.push(s)}e.all.apply(e,o).then(function(){n.resolve(i.data.allIssues)})}else n.resolve(i.data.allIssues)})}else n.resolve(this.data.allIssues);return n.promise},this.getAllIssues=function(t,r){var i=r.filterQuery,o=r.filterId,a=r.projectKey,s=this,l=r.maxResults||1e3,u=e.defer(),c=(new this.queryBuilder).addQuery("fields","*all").addQuery("startAt",t).addQuery("maxResults",l);i?c.addQuery("jql",i):o?c.addQuery("jql","filter="+o):a&&c.addQuery("jql",'project="'+a+'"');var d=c.build(),f="/rest/api/2/search?"+d;return n.request({url:f,dataType:"json",success:function(e){"string"==typeof e&&(e=JSON.parse(e)),Array.prototype.push.apply(s.data.allIssues,e.issues),u.resolve(e)},error:function(e){var t=Array.prototype.slice.call(arguments);t.push(f,u),s.onError.apply(s,t)}}),u.promise},this.getFilters=function(t,r,i){var o=this,a=e.defer();if(0==o.data.allFilters.length){var s="/rest/api/2/filter/favourite";n.request({url:s,dataType:"json",success:function(e){"string"==typeof e&&(e=JSON.parse(e)),Array.prototype.push.apply(o.data.allFilters,e),i(o.data.allFilters),a.resolve(o.data.allFilters)},error:function(){var e=Array.prototype.slice.call(arguments);e.push(s,a),o.onError.apply(o,e)}})}else a.resolve(o.data.allFilters);return a.promise},this.getFilter=function(t){var r=this,i=e.defer();if(0!=r.data.filters.length&&r.data.filters.hasOwnProperty(t))i.resolve(r.data.filters[t]);else{var o="/rest/api/2/filter/"+t;n.request({url:o,dataType:"json",success:function(e){"string"==typeof e&&(e=JSON.parse(e)),r.data.filters[t]=e,i.resolve(r.data.filters[t])},error:function(){var e=Array.prototype.slice.call(arguments)
;e.push(o,i),r.onError.apply(r,e)}})}return i.promise},this.onError=function(e,t,n,r,i){401==e.status?this.loginExpired():503==e.status?this.serviceUnavailable():403==e.status?this.forbidden():this.unexpectedError(e,n,r),i.reject()},this.loginExpired=function(){n.require("messages",function(e){e.error("JIRA session expired","Please login again to restore connection with JIRA")})},this.serviceUnavailable=function(){n.require("messages",function(e){e.error("JIRA Unavailable","The requested resource failed to load. If the problem persists, please contact Atlassian Cloud Support.")})},this.forbidden=function(){n.require("messages",function(e){e.error("Forbidden","You need to accept WRITE and DELETE scopes for the add-on in UPM")})},this.unexpectedError=function(e,r,i){var o="";if(e&&e.responseText)try{var a=TimesheetUtils.getJson(e.responseText);o=a.errorMessages.join(" "),t.error(a,i)}catch(n){o=e.responseText,t.error(e.responseText,i)}else o=r,t.error(r,i);n.require("messages",function(e){e.error("Unexpected error",o)})},this.getDefaultFilter=function(e){var t={id:""};return t.name=e?"All "+e+" Issues":"All Issues",t},this.getGadgetConfiguration=function(t,r){var i=e.defer();return n.request({url:"/rest/api/2/dashboard/"+t+"/items/"+r+"/properties",success:function(e){e=SearchUtils.getJson(e),e.keys.length>0?n.request({url:"/rest/api/2/dashboard/"+t+"/items/"+r+"/properties/gadgetConfig",success:function(e){e=SearchUtils.getJson(e),i.resolve(e.value)},error:function(e){i.resolve({})}}):i.resolve({})},error:function(e){i.resolve({})}}),i.promise},this.saveGadgetConfiguration=function(t,r,i){var o=e.defer();return n.request({url:"/rest/api/2/dashboard/"+t+"/items/"+r+"/properties/gadgetConfig",type:"PUT",contentType:"application/json",headers:{Accept:"application/json"},data:JSON.stringify(i),success:function(e){o.resolve(SearchUtils.getJson(e))},error:function(e){o.reject()}}),o.promise},this.resetState=function(){this.data.issuesCount.total=null,this.data.issuesCount.startAt=0,this.data.filterId=null,this.data.allIssues.splice(0,this.data.allIssues.length),this.data.allFilters.splice(0,this.data.allFilters.length),this.data.filters={}},this.queryBuilder=function(){var e=[];this.addQuery=function(t,n){return null!=n&&""!=n&&e.push(t+"="+n),this},this.build=function(){for(var t="",n=0;n<e.length;n++)0!=n&&(t+="&"),t+=e[n];return t}}}]),app.service("viewService",["$q","$http","dataService",function(e,t,n){this.data={allViews:[],currentView:{name:"Untitled",columns:[]}},this.updateCurrentView=function(e){var t=this;if(t.data.allViews.forEach(function(n){n.id==e.viewId&&(t.data.currentView.id&&t.data.currentView.id==e.viewId||(angular.copy(n,t.data.currentView),t.data.currentView._origColumns=n.columns))},t),!t.data.currentView.id&&t.data.allViews.length>0){var n=t.data.allViews[0];angular.copy(n,t.data.currentView),t.data.currentView._origColumns=n.columns}},this.getViews=function(t){var r=e.defer(),i=this;return 0==this.data.allViews.length?n.getProperty("views",[]).then(function(e){[].push.apply(i.data.allViews,e),i.updateCurrentView(t),r.resolve(i.data.allViews)}):(i.updateCurrentView(t),r.resolve(i.data.allViews)),r.promise},this.addView=function(t){var r=e.defer(),i=this;return n.getProperty("views",[]).then(function(e){var o=e.length>0?e[e.length-1]:{id:0},a=angular.copy(t);a.id=o.id+1,e.push(a),n.setProperty("views",e).then(function(){i.data.allViews.push(a),angular.copy(a,i.data.currentView),i.data.currentView._origColumns=a.columns,r.resolve(i.data.currentView)})}),r.promise},this.updateView=function(t){var r=e.defer(),i=this;return n.getProperty("views",[]).then(function(e){var o=i.indexById(t.id,e),a=angular.copy(t);e[o]=a,n.setProperty("views",e).then(function(){var e=i.indexById(t.id,i.data.allViews);i.data.allViews.splice(e,1,a),angular.equals(t,i.data.currentView)||angular.copy(t,i.data.currentView),r.resolve(i.data.currentView)})}),r.promise},this.removeView=function(t){var r=e.defer(),i=this,o=t.id;return n.getProperty("views",[]).then(function(e){var t=i.indexById(o,e);e.splice(t,1),n.setProperty("views",e).then(function(){var e=i.indexById(o,i.data.allViews);i.data.allViews.splice(e,1),angular.copy({name:"Untitled",columns:[]},i.data.currentView),r.resolve(i.data.allViews)})}),r.promise},this.indexById=function(e,t){var n=-1;return t.forEach(function(t,r){if(e==t.id)return void(n=r)}),n},this.findById=function(e,t){var n=this.indexById(e,t);return-1!=n?t[n]:null},this.resetState=function(){this.data.allViews.splice(0,this.data.allViews.length)}}]);var SearchUtils={};SearchUtils.getJson=function(e){return angular.isString(e)&&(e=""!=e?JSON.parse(e):{}),e},SearchUtils.normalizeObject=function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++)(null==e[n[r]]||t&&(""==e[n[r]]||e[n[r]]==[]))&&delete e[n[r]];return e},SearchUtils.getLicenseManager=function(e,t){var n="";return"expired"==e.license?n="LICENSE EXPIRED":"none"==e.license?n="NO LICENSE":"active"!=e.license&&(n="LICENSE ERROR"),""!=n&&(n='<span class="red">'+n+"</span>"),{isActive:"active"==e.license,message:t.trustAsHtml(n)}},angular.module("localization",[]).factory("localize",["$http","$rootScope","$window",function(e,t,n){var r={path:"i18n/",language:n.navigator.userLanguage||n.navigator.language,dictionary:void 0,resourceFileLoaded:!1,successCallback:function(e){r.dictionary=e,r.resourceFileLoaded=!0,t.$broadcast("localizeResourcesUpdates")},initLocalizedResources:function(){var t=r.path+r.language+".json";e({method:"GET",url:t,cache:!1}).success(r.successCallback).error(function(){var t=r.path+"default.json";e({method:"GET",url:t,cache:!1}).success(r.successCallback)})},getLocalizedString:function(e){var t="!"+e+"!";if(!r.resourceFileLoaded)return r.initLocalizedResources(),r.resourceFileLoaded=!0,t;if("object"==typeof r.dictionary){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var o=function(e,t){var t=t||null,n=r.dictionary[e];return void 0===n?sprintf(e,t):sprintf(n,t)}(e,n);null!==t&&void 0!=t&&(t=o)}return t},replace:function(e,t){var n=r.getLocalizedString(t);null!==n&&void 0!==n&&""!==n&&e.html(n)}};return r}]).filter("i18n",["localize",function(e){return function(){return e.getLocalizedString.apply(null,arguments)}}]).directive("i18n",["localize",function(e){return{restrict:"EAC",link:function(t,n,r){var i=r.i18n?r.i18n:n.html();e.resourceFileLoaded?e.replace(n,i):deregister=t.$on("localizeResourcesUpdates",function(){deregister(),e.replace(n,i)})}}}]),function(e){function t(){var e=arguments[0],n=t.cache;return n[e]&&n.hasOwnProperty(e)||(n[e]=t.parse(e)),t.format.call(null,n[e],arguments)}function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,t){return Array(t+1).join(e)}var i={not_string:/[^s]/,number:/[dief]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fiosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};t.format=function(e,o){var a,s,l,u,c,d,f,h=1,p=e.length,m="",g=[],v=!0,b="";for(s=0;s<p;s++)if("string"===(m=n(e[s])))g[g.length]=e[s];else if("array"===m){if(u=e[s],u[2])for(a=o[h],l=0;l<u[2].length;l++){if(!a.hasOwnProperty(u[2][l]))throw new Error(t("[sprintf] property '%s' does not exist",u[2][l]));a=a[u[2][l]]}else a=u[1]?o[u[1]]:o[h++];if("function"==n(a)&&(a=a()),i.not_string.test(u[8])&&"number"!=n(a)&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %s",n(a)));switch(i.number.test(u[8])&&(v=a>=0),u[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"e":a=u[7]?a.toExponential(u[7]):a.toExponential();break;case"f":a=u[7]?parseFloat(a).toFixed(u[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&u[7]?a.substring(0,u[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}!i.number.test(u[8])||v&&!u[3]?b="":(b=v?"+":"-",a=a.toString().replace(i.sign,"")),d=u[4]?"0"===u[4]?"0":u[4].charAt(1):" ",f=u[6]-(b+a).length,c=u[6]&&f>0?r(d,f):"",g[g.length]=u[5]?b+a+c:"0"===d?b+c+a:c+b+a}return g.join("")},t.cache={},t.parse=function(e){for(var t=e,n=[],r=[],o=0;t;){if(null!==(n=i.text.exec(t)))r[r.length]=n[0];else if(null!==(n=i.modulo.exec(t)))r[r.length]="%";else{if(null===(n=i.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){o|=1;var a=[],s=n[2],l=[];if(null===(l=i.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(s=s.substring(l[0].length));)if(null!==(l=i.key_access.exec(s)))a[a.length]=l[1];else{if(null===(l=i.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}n[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r[r.length]=n}t=t.substring(n[0].length)}return r};var o=function(e,n,r){return r=(n||[]).slice(0),r.splice(0,0,e),t.apply(null,r)};"undefined"!=typeof exports?(exports.sprintf=t,exports.vsprintf=o):(e.sprintf=t,e.vsprintf=o,"function"==typeof define&&define.amd&&define(function(){return{sprintf:t,vsprintf:o}}))}("undefined"==typeof window?this:window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return An.apply(null,arguments)}function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function r(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,r){return _e(e,t,n,r,!0).utc()}function s(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return null==e._pf&&(e._pf=s()),e._pf}function u(e){if(null==e._isValid){var t=l(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function c(e){var t=a(NaN);return null!=e?o(l(t),e):l(t).userInvalidated=!0,t}function d(e,t){var n,r,i;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=l(t)),void 0!==t._locale&&(e._locale=t._locale),Nn.length>0)for(n in Nn)r=Nn[n],void 0!==(i=t[r])&&(e[r]=i);return e}function f(t){d(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===Hn&&(Hn=!0,e.updateOffset(this),Hn=!1)}function h(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function p(e){return e<0?Math.ceil(e):Math.floor(e)}function m(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=p(t)),n}function g(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&m(e[r])!==m(t[r]))&&a++;return a+o}function v(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function y(e){for(var t,n,r,i,o=0;o<e.length;){for(i=b(e[o]).split("-"),t=i.length,n=b(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=w(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&g(i,n,!0)>=t-1)break;t--}o++}return null}function w(e){var t=null;if(!zn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=In._abbr,require("./locale/"+e),x(t)}catch(e){}return zn[e]}function x(e,t){var n;return e&&(n=void 0===t?C(e):k(e,t))&&(In=n),In._abbr}function k(e,t){return null!==t?(t.abbr=e,zn[e]=zn[e]||new v,zn[e].set(t),x(e),zn[e]):(delete zn[e],null)}function C(e){var n;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return In;if(!t(e)){if(n=w(e))return n;e=[e]}return y(e)}function S(e,t){var n=e.toLowerCase();Pn[n]=Pn[n+"s"]=Pn[t]=e}function M(e){return"string"==typeof e?Pn[e]||Pn[e.toLowerCase()]:void 0}function T(e){var t,n,r={};for(n in e)i(e,n)&&(t=M(n))&&(r[t]=e[n]);return r}function _(t,n){return function(r){return null!=r?(L(this,t,r),e.updateOffset(this,n),this):$(this,t)}}function $(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function L(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function D(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=M(e),"function"==typeof this[e])return this[e](t);return this}function E(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function O(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(jn[e]=i),t&&(jn[t[0]]=function(){return E(i.apply(this,arguments),t[1],t[2])}),n&&(jn[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function A(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,n,r=e.match(Fn);for(t=0,n=r.length;t<n;t++)jn[r[t]]?r[t]=jn[r[t]]:r[t]=A(r[t]);return function(i){var o="";for(t=0;t<n;t++)o+=r[t]instanceof Function?r[t].call(i,e):r[t];return o}}function N(e,t){return e.isValid()?(t=H(t,e.localeData()),Yn[t]=Yn[t]||I(t),Yn[t](e)):e.localeData().invalidDate()}function H(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Wn.lastIndex=0;r>=0&&Wn.test(e);)e=e.replace(Wn,n),Wn.lastIndex=0,r-=1;return e}function z(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function P(e,t,n){rr[e]=z(t)?t:function(e){return e&&n?n:t}}function F(e,t){return i(rr,e)?rr[e](t._strict,t._locale):new RegExp(W(e))}function W(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,n){n[t]=m(e)}),n=0;n<e.length;n++)ir[e[n]]=r}function j(e,t){Y(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function V(e,t,n){null!=t&&i(ir,e)&&ir[e](t,n._a,n,e)}function U(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function R(e){return this._months[e.month()]}function B(e){return this._monthsShort[e.month()]}function G(e,t,n){var r,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=a([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function q(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))?e:(n=Math.min(e.date(),U(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function X(t){return null!=t?(q(this,t),e.updateOffset(this,!0),this):$(this,"Month")}function K(){return U(this.year(),this.month())}function Z(e){var t,n=e._a;return n&&-2===l(e).overflow&&(t=n[ar]<0||n[ar]>11?ar:n[sr]<1||n[sr]>U(n[or],n[ar])?sr:n[lr]<0||n[lr]>24||24===n[lr]&&(0!==n[ur]||0!==n[cr]||0!==n[dr])?lr:n[ur]<0||n[ur]>59?ur:n[cr]<0||n[cr]>59?cr:n[dr]<0||n[dr]>999?dr:-1,l(e)._overflowDayOfYear&&(t<or||t>sr)&&(t=sr),l(e).overflow=t),e}function J(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function Q(e,t){var n=!0;return o(function(){return n&&(J(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function ee(e,t){pr[e]||(J(t),pr[e]=!0)}function te(e){var t,n,r=e._i,i=mr.exec(r);if(i){for(l(e).iso=!0,t=0,n=gr.length;t<n;t++)if(gr[t][1].exec(r)){e._f=gr[t][0];break}for(t=0,n=vr.length;t<n;t++)if(vr[t][1].exec(r)){e._f+=(i[6]||" ")+vr[t][0];break}r.match(er)&&(e._f+="Z"),we(e)}else e._isValid=!1}function ne(t){var n=br.exec(t._i);if(null!==n)return void(t._d=new Date(+n[1]));te(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t))}function re(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<1970&&s.setFullYear(e),s}function ie(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function oe(e){return ae(e)?366:365}function ae(e){return e%4==0&&e%100!=0||e%400==0}function se(){return ae(this.year())}function le(e,t,n){var r,i=n-t,o=n-e.day();return o>i&&(o-=7),o<i-7&&(o+=7),r=$e(e).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ue(e){return le(e,this._week.dow,this._week.doy).week}function ce(){return this._week.dow}function de(){return this._week.doy}function fe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function he(e){var t=le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function pe(e,t,n,r,i){var o,a=6+i-r,s=ie(e,0,1+a),l=s.getUTCDay();return l<i&&(l+=7),n=null!=n?1*n:i,o=1+a+7*(t-1)-l+n,{year:o>0?e:e-1,dayOfYear:o>0?o:oe(e-1)+o}}function me(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ge(e,t,n){return null!=e?e:null!=t?t:n}function ve(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function be(e){var t,n,r,i,o=[];if(!e._d){for(r=ve(e),e._w&&null==e._a[sr]&&null==e._a[ar]&&ye(e),e._dayOfYear&&(i=ge(e._a[or],r[or]),e._dayOfYear>oe(i)&&(l(e)._overflowDayOfYear=!0),n=ie(i,0,e._dayOfYear),e._a[ar]=n.getUTCMonth(),e._a[sr]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[lr]&&0===e._a[ur]&&0===e._a[cr]&&0===e._a[dr]&&(e._nextDay=!0,e._a[lr]=0),e._d=(e._useUTC?ie:re).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[lr]=24)}}function ye(e){var t,n,r,i,o,a,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,a=4,n=ge(t.GG,e._a[or],le($e(),1,4).year),r=ge(t.W,1),i=ge(t.E,1)):(o=e._locale._week.dow,a=e._locale._week.doy,n=ge(t.gg,e._a[or],le($e(),o,a).year),r=ge(t.w,1),null!=t.d?(i=t.d)<o&&++r:i=null!=t.e?t.e+o:o),s=pe(n,r,i,a,o),e._a[or]=s.year,e._dayOfYear=s.dayOfYear}function we(t){if(t._f===e.ISO_8601)return void te(t);t._a=[],l(t).empty=!0;var n,r,i,o,a,s=""+t._i,u=s.length,c=0;for(i=H(t._f,t._locale).match(Fn)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(F(o,t))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&l(t).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),jn[o]?(r?l(t).empty=!1:l(t).unusedTokens.push(o),V(o,r,t)):t._strict&&!r&&l(t).unusedTokens.push(o);l(t).charsLeftOver=u-c,s.length>0&&l(t).unusedInput.push(s),!0===l(t).bigHour&&t._a[lr]<=12&&t._a[lr]>0&&(l(t).bigHour=void 0),t._a[lr]=xe(t._locale,t._a[lr],t._meridiem),be(t),Z(t)}function xe(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function ke(e){var t,n,r,i,a;if(0===e._f.length)return l(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)a=0,t=d({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],we(t),u(t)&&(a+=l(t).charsLeftOver,a+=10*l(t).unusedTokens.length,l(t).score=a,(null==r||a<r)&&(r=a,n=t));o(e,n||t)}function Ce(e){if(!e._d){var t=T(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],be(e)}}function Se(e){var t=new f(Z(Me(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Me(e){var r=e._i,i=e._f;return e._locale=e._locale||C(e._l),null===r||void 0===i&&""===r?c({nullInput:!0}):("string"==typeof r&&(e._i=r=e._locale.preparse(r)),h(r)?new f(Z(r)):(t(i)?ke(e):i?we(e):n(r)?e._d=r:Te(e),e))}function Te(i){var o=i._i;void 0===o?i._d=new Date:n(o)?i._d=new Date(+o):"string"==typeof o?ne(i):t(o)?(i._a=r(o.slice(0),function(e){return parseInt(e,10)}),be(i)):"object"==typeof o?Ce(i):"number"==typeof o?i._d=new Date(o):e.createFromInputFallback(i)}function _e(e,t,n,r,i){var o={};return"boolean"==typeof n&&(r=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,Se(o)}function $e(e,t,n,r){return _e(e,t,n,r,!1)}function Le(e,n){var r,i;if(1===n.length&&t(n[0])&&(n=n[0]),!n.length)return $e();for(r=n[0],i=1;i<n.length;++i)n[i].isValid()&&!n[i][e](r)||(r=n[i]);return r}function De(){return Le("isBefore",[].slice.call(arguments,0))}function Ee(){return Le("isAfter",[].slice.call(arguments,0))}function Oe(e){var t=T(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=C(),this._bubble()}function Ae(e){return e instanceof Oe}function Ie(e,t){O(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+E(~~(e/60),2)+t+E(~~e%60,2)})}function Ne(e){var t=(e||"").match(er)||[],n=t[t.length-1]||[],r=(n+"").match(Cr)||["-",0,0],i=60*r[1]+m(r[2]);return"+"===r[0]?i:-i}function He(t,r){var i,o;return r._isUTC?(i=r.clone(),o=(h(t)||n(t)?+t:+$e(t))-+i,i._d.setTime(+i._d+o),e.updateOffset(i,!1),i):$e(t).local()}function ze(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Pe(t,n){var r,i=this._offset||0;return null!=t?("string"==typeof t&&(t=Ne(t)),Math.abs(t)<16&&(t*=60),!this._isUTC&&n&&(r=ze(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!n||this._changeInProgress?et(this,Xe(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:ze(this)}function Fe(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function We(e){return this.utcOffset(0,e)}function Ye(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ze(this),"m")),this}function je(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ne(this._i)),this}function Ve(e){return e=e?$e(e).utcOffset():0,(this.utcOffset()-e)%60==0}function Ue(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Re(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var e={};if(d(e,this),e=Me(e),e._a){var t=e._isUTC?a(e._a):$e(e._a);this._isDSTShifted=this.isValid()&&g(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Be(){return!this._isUTC}function Ge(){return this._isUTC}function qe(){return this._isUTC&&0===this._offset}function Xe(e,t){var n,r,o,a=e,s=null;return Ae(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(s=Sr.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:m(s[sr])*n,h:m(s[lr])*n,m:m(s[ur])*n,s:m(s[cr])*n,ms:m(s[dr])*n}):(s=Mr.exec(e))?(n="-"===s[1]?-1:1,a={y:Ke(s[2],n),M:Ke(s[3],n),d:Ke(s[4],n),h:Ke(s[5],n),m:Ke(s[6],n),s:Ke(s[7],n),w:Ke(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=Je($e(a.from),$e(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),r=new Oe(a),Ae(e)&&i(e,"_locale")&&(r._locale=e._locale),r}function Ke(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ze(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Je(e,t){var n;return t=He(t,e),e.isBefore(t)?n=Ze(e,t):(n=Ze(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Qe(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(ee(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Xe(n,r),et(this,i,e),this}}function et(t,n,r,i){var o=n._milliseconds,a=n._days,s=n._months;i=null==i||i,o&&t._d.setTime(+t._d+o*r),a&&L(t,"Date",$(t,"Date")+a*r),s&&q(t,$(t,"Month")+s*r),i&&e.updateOffset(t,a||s)}function tt(e,t){var n=e||$e(),r=He(n,this).startOf("day"),i=this.diff(r,"days",!0),o=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,$e(n)))}function nt(){return new f(this)}function rt(e,t){return t=M(void 0!==t?t:"millisecond"),"millisecond"===t?(e=h(e)?e:$e(e),+this>+e):(h(e)?+e:+$e(e))<+this.clone().startOf(t)}function it(e,t){var n;return t=M(void 0!==t?t:"millisecond"),"millisecond"===t?(e=h(e)?e:$e(e),+this<+e):(n=h(e)?+e:+$e(e),+this.clone().endOf(t)<n)}function ot(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function at(e,t){var n;return t=M(t||"millisecond"),"millisecond"===t?(e=h(e)?e:$e(e),+this==+e):(n=+$e(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function st(e,t,n){var r,i,o=He(e,this),a=6e4*(o.utcOffset()-this.utcOffset());return t=M(t),"year"===t||"month"===t||"quarter"===t?(i=lt(this,o),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-o,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?i:p(i)}function lt(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)}function ut(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ct(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():N(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function dt(t){var n=N(this,t||e.defaultFormat);return this.localeData().postformat(n)}function ft(e,t){return this.isValid()?Xe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ht(e){return this.from($e(),e)}function pt(e,t){return this.isValid()?Xe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mt(e){return this.to($e(),e)}function gt(e){var t;return void 0===e?this._locale._abbr:(t=C(e),null!=t&&(this._locale=t),this)}function vt(){return this._locale}function bt(e){switch(e=M(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function yt(e){return e=M(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function wt(){return+this._d-6e4*(this._offset||0)}function xt(){return Math.floor(+this/1e3)}function kt(){return this._offset?new Date(+this):this._d}function Ct(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function St(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Mt(){return u(this)}function Tt(){return o({},l(this))}function _t(){return l(this).overflow}function $t(e,t){O(0,[e,e.length],0,t)}function Lt(e,t,n){return le($e([e,11,31+t-n]),t,n).week}function Dt(e){var t=le(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Et(e){var t=le(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Ot(){return Lt(this.year(),1,4)}function At(){var e=this.localeData()._week;return Lt(this.year(),e.dow,e.doy)}function It(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Nt(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ht(e){return this._weekdays[e.day()]}function zt(e){return this._weekdaysShort[e.day()]}function Pt(e){return this._weekdaysMin[e.day()]}function Ft(e){var t,n,r;for(this._weekdaysParse=this._weekdaysParse||[],t=0;t<7;t++)if(this._weekdaysParse[t]||(n=$e([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Wt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Nt(e,this.localeData()),this.add(e-t,"d")):t}function Yt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function jt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Vt(e,t){O(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ut(e,t){return t._meridiemParse}function Rt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Bt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Gt(e,t){t[dr]=m(1e3*("0."+e))}function qt(){return this._isUTC?"UTC":""}function Xt(){return this._isUTC?"Coordinated Universal Time":""}function Kt(e){return $e(1e3*e)}function Zt(){return $e.apply(null,arguments).parseZone()}function Jt(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r}function Qt(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function en(){return this._invalidDate}function tn(e){return this._ordinal.replace("%d",e)}function nn(e){return e}function rn(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)}function on(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function an(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function sn(e,t,n,r){var i=C(),o=a().set(r,t);return i[n](o,e)}function ln(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return sn(e,t,n,i);var o,a=[];for(o=0;o<r;o++)a[o]=sn(e,o,n,i);return a}function un(e,t){return ln(e,t,"months",12,"month")}function cn(e,t){return ln(e,t,"monthsShort",12,"month")}function dn(e,t){return ln(e,t,"weekdays",7,"day")}function fn(e,t){return ln(e,t,"weekdaysShort",7,"day")}function hn(e,t){return ln(e,t,"weekdaysMin",7,"day")}function pn(){var e=this._data;return this._milliseconds=Br(this._milliseconds),this._days=Br(this._days),this._months=Br(this._months),e.milliseconds=Br(e.milliseconds),e.seconds=Br(e.seconds),e.minutes=Br(e.minutes),e.hours=Br(e.hours),e.months=Br(e.months),e.years=Br(e.years),this}function mn(e,t,n,r){var i=Xe(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function gn(e,t){return mn(this,e,t,1)}function vn(e,t){return mn(this,e,t,-1)}function bn(e){return e<0?Math.floor(e):Math.ceil(e)}function yn(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*bn(xn(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=p(o/1e3),l.seconds=e%60,t=p(e/60),l.minutes=t%60,n=p(t/60),l.hours=n%24,a+=p(n/24),i=p(wn(a)),s+=i,a-=bn(xn(i)),r=p(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function wn(e){return 4800*e/146097}function xn(e){return 146097*e/4800}function kn(e){var t,n,r=this._milliseconds
;if("month"===(e=M(e))||"year"===e)return t=this._days+r/864e5,n=this._months+wn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(xn(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Cn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12)}function Sn(e){return function(){return this.as(e)}}function Mn(e){return e=M(e),this[e+"s"]()}function Tn(e){return function(){return this._data[e]}}function _n(){return p(this.days()/7)}function $n(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Ln(e,t,n){var r=Xe(e).abs(),i=li(r.as("s")),o=li(r.as("m")),a=li(r.as("h")),s=li(r.as("d")),l=li(r.as("M")),u=li(r.as("y")),c=i<ui.s&&["s",i]||1===o&&["m"]||o<ui.m&&["mm",o]||1===a&&["h"]||a<ui.h&&["hh",a]||1===s&&["d"]||s<ui.d&&["dd",s]||1===l&&["M"]||l<ui.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,$n.apply(null,c)}function Dn(e,t){return void 0!==ui[e]&&(void 0===t?ui[e]:(ui[e]=t,!0))}function En(e){var t=this.localeData(),n=Ln(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function On(){var e,t,n,r=ci(this._milliseconds)/1e3,i=ci(this._days),o=ci(this._months);e=p(r/60),t=p(e/60),r%=60,e%=60,n=p(o/12),o%=12;var a=n,s=o,l=i,u=t,c=e,d=r,f=this.asSeconds();return f?(f<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(u||c||d?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var An,In,Nn=e.momentProperties=[],Hn=!1,zn={},Pn={},Fn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Wn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Yn={},jn={},Vn=/\d/,Un=/\d\d/,Rn=/\d{3}/,Bn=/\d{4}/,Gn=/[+-]?\d{6}/,qn=/\d\d?/,Xn=/\d{1,3}/,Kn=/\d{1,4}/,Zn=/[+-]?\d{1,6}/,Jn=/\d+/,Qn=/[+-]?\d+/,er=/Z|[+-]\d\d:?\d\d/gi,tr=/[+-]?\d+(\.\d{1,3})?/,nr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,rr={},ir={},or=0,ar=1,sr=2,lr=3,ur=4,cr=5,dr=6;O("M",["MM",2],"Mo",function(){return this.month()+1}),O("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),O("MMMM",0,0,function(e){return this.localeData().months(this,e)}),S("month","M"),P("M",qn),P("MM",qn,Un),P("MMM",nr),P("MMMM",nr),Y(["M","MM"],function(e,t){t[ar]=m(e)-1}),Y(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ar]=i:l(n).invalidMonth=e});var fr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),hr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),pr={};e.suppressDeprecationWarnings=!1;var mr=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],vr=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],br=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=Q("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),O(0,["YY",2],0,function(){return this.year()%100}),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),S("year","y"),P("Y",Qn),P("YY",qn,Un),P("YYYY",Kn,Bn),P("YYYYY",Zn,Gn),P("YYYYYY",Zn,Gn),Y(["YYYYY","YYYYYY"],or),Y("YYYY",function(t,n){n[or]=2===t.length?e.parseTwoDigitYear(t):m(t)}),Y("YY",function(t,n){n[or]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return m(e)+(m(e)>68?1900:2e3)};var yr=_("FullYear",!1);O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),P("w",qn),P("ww",qn,Un),P("W",qn),P("WW",qn,Un),j(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=m(e)});var wr={dow:0,doy:6};O("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),P("DDD",Xn),P("DDDD",Rn),Y(["DDD","DDDD"],function(e,t,n){n._dayOfYear=m(e)}),e.ISO_8601=function(){};var xr=Q("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=$e.apply(null,arguments);return e<this?this:e}),kr=Q("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=$e.apply(null,arguments);return e>this?this:e});Ie("Z",":"),Ie("ZZ",""),P("Z",er),P("ZZ",er),Y(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ne(e)});var Cr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Sr=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Mr=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Xe.fn=Oe.prototype;var Tr=Qe(1,"add"),_r=Qe(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var $r=Q("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});O(0,["gg",2],0,function(){return this.weekYear()%100}),O(0,["GG",2],0,function(){return this.isoWeekYear()%100}),$t("gggg","weekYear"),$t("ggggg","weekYear"),$t("GGGG","isoWeekYear"),$t("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),P("G",Qn),P("g",Qn),P("GG",qn,Un),P("gg",qn,Un),P("GGGG",Kn,Bn),P("gggg",Kn,Bn),P("GGGGG",Zn,Gn),P("ggggg",Zn,Gn),j(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=m(e)}),j(["gg","GG"],function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)}),O("Q",0,0,"quarter"),S("quarter","Q"),P("Q",Vn),Y("Q",function(e,t){t[ar]=3*(m(e)-1)}),O("D",["DD",2],"Do","date"),S("date","D"),P("D",qn),P("DD",qn,Un),P("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),Y(["D","DD"],sr),Y("Do",function(e,t){t[sr]=m(e.match(qn)[0],10)});var Lr=_("Date",!0);O("d",0,"do","day"),O("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),O("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),O("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),P("d",qn),P("e",qn),P("E",qn),P("dd",nr),P("ddd",nr),P("dddd",nr),j(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:l(n).invalidWeekday=e}),j(["d","e","E"],function(e,t,n,r){t[r]=m(e)});var Dr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Er="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Or="Su_Mo_Tu_We_Th_Fr_Sa".split("_");O("H",["HH",2],0,"hour"),O("h",["hh",2],0,function(){return this.hours()%12||12}),Vt("a",!0),Vt("A",!1),S("hour","h"),P("a",Ut),P("A",Ut),P("H",qn),P("h",qn),P("HH",qn,Un),P("hh",qn,Un),Y(["H","HH"],lr),Y(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),Y(["h","hh"],function(e,t,n){t[lr]=m(e),l(n).bigHour=!0});var Ar=/[ap]\.?m?\.?/i,Ir=_("Hours",!0);O("m",["mm",2],0,"minute"),S("minute","m"),P("m",qn),P("mm",qn,Un),Y(["m","mm"],ur);var Nr=_("Minutes",!1);O("s",["ss",2],0,"second"),S("second","s"),P("s",qn),P("ss",qn,Un),Y(["s","ss"],cr);var Hr=_("Seconds",!1);O("S",0,0,function(){return~~(this.millisecond()/100)}),O(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),O(0,["SSS",3],0,"millisecond"),O(0,["SSSS",4],0,function(){return 10*this.millisecond()}),O(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),O(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),O(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),O(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),O(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),P("S",Xn,Vn),P("SS",Xn,Un),P("SSS",Xn,Rn);var zr;for(zr="SSSS";zr.length<=9;zr+="S")P(zr,Jn);for(zr="S";zr.length<=9;zr+="S")Y(zr,Gt);var Pr=_("Milliseconds",!1);O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName");var Fr=f.prototype;Fr.add=Tr,Fr.calendar=tt,Fr.clone=nt,Fr.diff=st,Fr.endOf=yt,Fr.format=dt,Fr.from=ft,Fr.fromNow=ht,Fr.to=pt,Fr.toNow=mt,Fr.get=D,Fr.invalidAt=_t,Fr.isAfter=rt,Fr.isBefore=it,Fr.isBetween=ot,Fr.isSame=at,Fr.isValid=Mt,Fr.lang=$r,Fr.locale=gt,Fr.localeData=vt,Fr.max=kr,Fr.min=xr,Fr.parsingFlags=Tt,Fr.set=D,Fr.startOf=bt,Fr.subtract=_r,Fr.toArray=Ct,Fr.toObject=St,Fr.toDate=kt,Fr.toISOString=ct,Fr.toJSON=ct,Fr.toString=ut,Fr.unix=xt,Fr.valueOf=wt,Fr.year=yr,Fr.isLeapYear=se,Fr.weekYear=Dt,Fr.isoWeekYear=Et,Fr.quarter=Fr.quarters=It,Fr.month=X,Fr.daysInMonth=K,Fr.week=Fr.weeks=fe,Fr.isoWeek=Fr.isoWeeks=he,Fr.weeksInYear=At,Fr.isoWeeksInYear=Ot,Fr.date=Lr,Fr.day=Fr.days=Wt,Fr.weekday=Yt,Fr.isoWeekday=jt,Fr.dayOfYear=me,Fr.hour=Fr.hours=Ir,Fr.minute=Fr.minutes=Nr,Fr.second=Fr.seconds=Hr,Fr.millisecond=Fr.milliseconds=Pr,Fr.utcOffset=Pe,Fr.utc=We,Fr.local=Ye,Fr.parseZone=je,Fr.hasAlignedHourOffset=Ve,Fr.isDST=Ue,Fr.isDSTShifted=Re,Fr.isLocal=Be,Fr.isUtcOffset=Ge,Fr.isUtc=qe,Fr.isUTC=qe,Fr.zoneAbbr=qt,Fr.zoneName=Xt,Fr.dates=Q("dates accessor is deprecated. Use date instead.",Lr),Fr.months=Q("months accessor is deprecated. Use month instead",X),Fr.years=Q("years accessor is deprecated. Use year instead",yr),Fr.zone=Q("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Fe);var Wr=Fr,Yr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},jr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Vr=/\d{1,2}/,Ur={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Rr=v.prototype;Rr._calendar=Yr,Rr.calendar=Jt,Rr._longDateFormat=jr,Rr.longDateFormat=Qt,Rr._invalidDate="Invalid date",Rr.invalidDate=en,Rr._ordinal="%d",Rr.ordinal=tn,Rr._ordinalParse=Vr,Rr.preparse=nn,Rr.postformat=nn,Rr._relativeTime=Ur,Rr.relativeTime=rn,Rr.pastFuture=on,Rr.set=an,Rr.months=R,Rr._months=fr,Rr.monthsShort=B,Rr._monthsShort=hr,Rr.monthsParse=G,Rr.week=ue,Rr._week=wr,Rr.firstDayOfYear=de,Rr.firstDayOfWeek=ce,Rr.weekdays=Ht,Rr._weekdays=Dr,Rr.weekdaysMin=Pt,Rr._weekdaysMin=Or,Rr.weekdaysShort=zt,Rr._weekdaysShort=Er,Rr.weekdaysParse=Ft,Rr.isPM=Rt,Rr._meridiemParse=Ar,Rr.meridiem=Bt,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=Q("moment.lang is deprecated. Use moment.locale instead.",x),e.langData=Q("moment.langData is deprecated. Use moment.localeData instead.",C);var Br=Math.abs,Gr=Sn("ms"),qr=Sn("s"),Xr=Sn("m"),Kr=Sn("h"),Zr=Sn("d"),Jr=Sn("w"),Qr=Sn("M"),ei=Sn("y"),ti=Tn("milliseconds"),ni=Tn("seconds"),ri=Tn("minutes"),ii=Tn("hours"),oi=Tn("days"),ai=Tn("months"),si=Tn("years"),li=Math.round,ui={s:45,m:45,h:22,d:26,M:11},ci=Math.abs,di=Oe.prototype;return di.abs=pn,di.add=gn,di.subtract=vn,di.as=kn,di.asMilliseconds=Gr,di.asSeconds=qr,di.asMinutes=Xr,di.asHours=Kr,di.asDays=Zr,di.asWeeks=Jr,di.asMonths=Qr,di.asYears=ei,di.valueOf=Cn,di._bubble=yn,di.get=Mn,di.milliseconds=ti,di.seconds=ni,di.minutes=ri,di.hours=ii,di.days=oi,di.weeks=_n,di.months=ai,di.years=si,di.humanize=En,di.toISOString=On,di.toString=On,di.toJSON=On,di.locale=gt,di.localeData=vt,di.toIsoString=Q("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",On),di.lang=$r,O("X",0,0,"unix"),O("x",0,0,"valueOf"),P("x",Qn),P("X",tr),Y("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),Y("x",function(e,t,n){n._d=new Date(m(e))}),e.version="2.10.6",function(e){An=e}($e),e.fn=Wr,e.min=De,e.max=Ee,e.utc=a,e.unix=Kt,e.months=un,e.isDate=n,e.locale=x,e.invalid=c,e.duration=Xe,e.isMoment=h,e.weekdays=dn,e.parseZone=Zt,e.localeData=C,e.isDuration=Ae,e.monthsShort=cn,e.weekdaysMin=hn,e.defineLocale=k,e.weekdaysShort=fn,e.normalizeUnits=M,e.relativeTimeThreshold=Dn,e}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.printStackTrace=t()}(this,function(){function e(t){t=t||{guess:!0};var n=t.e||null,r=!!t.guess,i=t.mode||null,o=new e.implementation,a=o.run(n,i);return r?o.guessAnonymousFunctions(a):a}return e.implementation=function(){},e.implementation.prototype={run:function(e,t){return e=e||this.createException(),t=t||this.mode(e),"other"===t?this.other(arguments.callee):this[t](e)},createException:function(){try{this.undef()}catch(e){return e}},mode:function(e){return"undefined"!=typeof window&&window.navigator.userAgent.indexOf("PhantomJS")>-1?"phantomjs":e.arguments&&e.stack?"chrome":e.stack&&e.sourceURL?"safari":e.stack&&e.number?"ie":e.stack&&e.fileName?"firefox":e.message&&e["opera#sourceloc"]?e.stacktrace?e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?"opera9":"opera10a":"opera9":e.message&&e.stack&&e.stacktrace?e.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":e.stack&&!e.fileName?"chrome":"other"},instrumentFunction:function(t,n,r){t=t||window;var i=t[n];t[n]=function(){return r.call(this,e().slice(4)),t[n]._instrumented.apply(this,arguments)},t[n]._instrumented=i},deinstrumentFunction:function(e,t){e[t].constructor===Function&&e[t]._instrumented&&e[t]._instrumented.constructor===Function&&(e[t]=e[t]._instrumented)},chrome:function(e){return(e.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(e){return e.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(e){return e.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(e){return e.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(e){for(var t=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,n=e.stacktrace.split("\n"),r=[],i=0,o=n.length;i<o;i+=2){var a=t.exec(n[i]);if(a){var s=a[4]+":"+a[1]+":"+a[2],l=a[3]||"global code";l=l.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,"{anonymous}"),r.push(l+"@"+s+" -- "+n[i+1].replace(/^\s+/,""))}}return r},opera10b:function(e){for(var t=/^(.*)@(.+):(\d+)$/,n=e.stacktrace.split("\n"),r=[],i=0,o=n.length;i<o;i++){var a=t.exec(n[i]);if(a){var s=a[1]?a[1]+"()":"global code";r.push(s+"@"+a[2]+":"+a[3])}}return r},opera10a:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],i=0,o=n.length;i<o;i+=2){var a=t.exec(n[i]);if(a){var s=a[3]||"{anonymous}";r.push(s+"()@"+a[2]+":"+a[1]+" -- "+n[i+1].replace(/^\s+/,""))}}return r},opera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],i=2,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push("{anonymous}()@"+a[2]+":"+a[1]+" -- "+n[i+1].replace(/^\s+/,""))}return r},phantomjs:function(e){for(var t=/(\S+) \((\S+)\)/i,n=e.stack.split("\n"),r=[],i=1,o=n.length;i<o;i++){n[i]=n[i].replace(/^\s+at\s+/gm,"");var a=t.exec(n[i]);a?r.push(a[1]+"()@"+a[2]):r.push("{anonymous}()@"+n[i])}return r},other:function(e){for(var t,n,r=/function(?:\s+([\w$]+))?\s*\(/,i=[],o=Array.prototype.slice;e&&i.length<10;){t=r.test(e.toString())?RegExp.$1||"{anonymous}":"{anonymous}";try{n=o.call(e.arguments||[])}catch(e){n=["Cannot access arguments: "+e]}i[i.length]=t+"("+this.stringifyArguments(n)+")";try{e=e.caller}catch(e){i[i.length]="Cannot access caller: "+e;break}}return i},stringifyArguments:function(e){for(var t=[],n=Array.prototype.slice,r=0;r<e.length;++r){var i=e[r];void 0===i?t[r]="undefined":null===i?t[r]="null":i.constructor&&(i.constructor===Array?i.length<3?t[r]="["+this.stringifyArguments(i)+"]":t[r]="["+this.stringifyArguments(n.call(i,0,1))+"..."+this.stringifyArguments(n.call(i,-1))+"]":i.constructor===Object?t[r]="#object":i.constructor===Function?t[r]="#function":i.constructor===String?t[r]='"'+i+'"':i.constructor===Number?t[r]=i:t[r]="?")}return t.join(",")},sourceCache:{},ajax:function(e){var t=this.createXMLHTTPObject();if(t)try{return t.open("GET",e,!1),t.send(null),t.responseText}catch(e){}return""},createXMLHTTPObject:function(){for(var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;n<t.length;n++)try{return e=t[n](),this.createXMLHTTPObject=t[n],e}catch(e){}},isSameDomain:function(e){return"undefined"!=typeof location&&-1!==e.indexOf(location.hostname)},getSource:function(e){return e in this.sourceCache||(this.sourceCache[e]=this.ajax(e).split("\n")),this.sourceCache[e]},guessAnonymousFunctions:function(e){for(var t=0;t<e.length;++t){var n=/\{anonymous\}\(.*\)@(.*)/,r=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,i=e[t],o=n.exec(i);if(o){var a=r.exec(o[1]);if(a){var s=a[1],l=a[2],u=a[3]||0;if(s&&this.isSameDomain(s)&&l){var c=this.guessAnonymousFunction(s,l,u);e[t]=i.replace("{anonymous}",c)}}}}return e},guessAnonymousFunction:function(e,t,n){var r;try{r=this.findFunctionName(this.getSource(e),t)}catch(t){r="getSource failed with url: "+e+", exception: "+t.toString()}return r},findFunctionName:function(e,t){for(var n,r,i,o=/function\s+([^(]*?)\s*\(([^)]*)\)/,a=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,s=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,l="",u=Math.min(t,20),c=0;c<u;++c)if(n=e[t-c-1],i=n.indexOf("//"),i>=0&&(n=n.substr(0,i)),n){if(l=n+l,(r=a.exec(l))&&r[1])return r[1];if((r=o.exec(l))&&r[1])return r[1];if((r=s.exec(l))&&r[1])return r[1]}return"(?)"}},e}),angular.module("xeditable",[]).value("editableOptions",{theme:"default",icon_set:"default",buttons:"right",blurElem:"cancel",blurForm:"ignore",activate:"focus",isDisabled:!1,activationEvent:"click"}),angular.module("xeditable").directive("editableBsdate",["editableDirectiveFactory",function(e){return e({directiveName:"editableBsdate",inputTpl:"<div></div>",render:function(){this.parent.render.call(this);var e=angular.element('<input type="text" class="form-control" ng-model="$data"/>'),t=angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>'),n=angular.element('<span class="input-group-btn"></span>');e.attr("uib-datepicker-popup",this.attrs.eDatepickerPopupXEditable||"yyyy/MM/dd"),e.attr("is-open",this.attrs.eIsOpen),e.attr("date-disabled",this.attrs.eDateDisabled),e.attr("uib-datepicker-popup",this.attrs.eDatepickerPopup),e.attr("min-date",this.attrs.eMinDate),e.attr("max-date",this.attrs.eMaxDate),e.attr("year-range",this.attrs.eYearRange||20),e.attr("show-button-bar",this.attrs.eShowButtonBar||!0),e.attr("current-text",this.attrs.eCurrentText||"Today"),e.attr("clear-text",this.attrs.eClearText||"Clear"),e.attr("close-text",this.attrs.eCloseText||"Done"),e.attr("close-on-date-selection",this.attrs.eCloseOnDateSelection||!0),e.attr("datepicker-append-to-body",this.attrs.eDatePickerAppendToBody||!1),e.attr("date-disabled",this.attrs.eDateDisabled),e.attr("name",this.attrs.eName),this.scope.dateOptions={formatDay:this.attrs.eFormatDay||"dd",formatMonth:this.attrs.eFormatMonth||"MMMM",formatYear:this.attrs.eFormatYear||"yyyy",formatDayHeader:this.attrs.eFormatDayHeader||"EEE",formatDayTitle:this.attrs.eFormatDayTitle||"MMMM yyyy",formatMonthTitle:this.attrs.eFormatMonthTitle||"yyyy",showWeeks:!this.attrs.eShowWeeks||"true"===this.attrs.eShowWeeks.toLowerCase(),startingDay:this.attrs.eStartingDay||0,minMode:this.attrs.eMinMode||"day",maxMode:this.attrs.eMaxMode||"year",initDate:this.attrs.eInitDate||new Date,datepickerMode:this.attrs.eDatepickerMode||"day"},e.attr("datepicker-options","dateOptions"),t.attr("ng-click",this.attrs.eNgClick),n.append(t),this.inputEl.prepend(e),this.inputEl.append(n),this.inputEl.removeAttr("class"),this.inputEl.removeAttr("ng-click"),this.inputEl.removeAttr("is-open"),this.inputEl.removeAttr("init-date"),this.inputEl.removeAttr("datepicker-popup"),this.inputEl.removeAttr("required"),this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("date-picker-append-to-body"),this.inputEl.removeAttr("name"),this.inputEl.attr("class","input-group")}})}]),angular.module("xeditable").directive("editableBstime",["editableDirectiveFactory",function(e){return e({directiveName:"editableBstime",inputTpl:"<uib-timepicker></uib-timepicker>",render:function(){this.parent.render.call(this);var e=angular.element('<div class="well well-small" style="display:inline-block;"></div>');e.attr("ng-model",this.inputEl.attr("ng-model")),this.inputEl.removeAttr("ng-model"),this.attrs.eNgChange&&(e.attr("ng-change",this.inputEl.attr("ng-change")),this.inputEl.removeAttr("ng-change")),this.inputEl.wrap(e)}})}]),angular.module("xeditable").directive("editableCheckbox",["editableDirectiveFactory",function(e){return e({directiveName:"editableCheckbox",inputTpl:'<input type="checkbox">',render:function(){this.parent.render.call(this),this.attrs.eTitle&&(this.inputEl.wrap("<label></label>"),this.inputEl.parent().append(this.attrs.eTitle))},autosubmit:function(){var e=this;e.inputEl.bind("change",function(){setTimeout(function(){e.scope.$apply(function(){e.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableChecklist",["editableDirectiveFactory","editableNgOptionsParser",function(e,t){return e({directiveName:"editableChecklist",inputTpl:"<span></span>",useCopy:!0,render:function(){this.parent.render.call(this);var e=t(this.attrs.eNgOptions),n='<label ng-repeat="'+e.ngRepeat+'"><input type="checkbox" checklist-model="$parent.$data" checklist-value="'+e.locals.valueFn+'"><span ng-bind="'+e.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)}})}]),angular.module("xeditable").directive("editableCombodate",["editableDirectiveFactory","editableCombodate",function(e,t){return e({directiveName:"editableCombodate",inputTpl:'<input type="text">',render:function(){this.parent.render.call(this);var e={value:new Date(this.scope.$data)},n=this;angular.forEach(["format","template","minYear","maxYear","yearDescending","minuteStep","secondStep","firstItem","errorClass","customClass","roundTime","smartDays"],function(t){var r="e"+t.charAt(0).toUpperCase()+t.slice(1);r in n.attrs&&(e[t]=n.attrs[r])});var r=t.getInstance(this.inputEl,e);r.$widget.find("select").bind("change",function(e){n.scope.$data=new Date(r.getValue()).toISOString()})}})}]),function(){var e="text|password|email|tel|number|url|search|color|date|datetime|time|month|week|file".split("|");angular.forEach(e,function(e){var t="editable"+e.charAt(0).toUpperCase()+e.slice(1);angular.module("xeditable").directive(t,["editableDirectiveFactory",function(n){return n({directiveName:t,inputTpl:'<input type="'+e+'">'})}])}),angular.module("xeditable").directive("editableRange",["editableDirectiveFactory",function(e){return e({directiveName:"editableRange",inputTpl:'<input type="range" id="range" name="range">',render:function(){this.parent.render.call(this),this.inputEl.after("<output>{{$data}}</output>")}})}])}(),angular.module("xeditable").directive("editableRadiolist",["editableDirectiveFactory","editableNgOptionsParser",function(e,t){return e({directiveName:"editableRadiolist",inputTpl:"<span></span>",render:function(){this.parent.render.call(this);var e=t(this.attrs.eNgOptions),n='<label ng-repeat="'+e.ngRepeat+'"><input type="radio" ng-disabled="'+this.attrs.eNgDisabled+'" ng-model="$parent.$data" value="{{'+e.locals.valueFn+'}}"><span ng-bind="'+e.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)},autosubmit:function(){var e=this;e.inputEl.bind("change",function(){setTimeout(function(){e.scope.$apply(function(){e.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableSelect",["editableDirectiveFactory",function(e){return e({directiveName:"editableSelect",inputTpl:"<select></select>",autosubmit:function(){var e=this;e.inputEl.bind("change",function(){e.scope.$apply(function(){e.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableTextarea",["editableDirectiveFactory",function(e){return e({directiveName:"editableTextarea",inputTpl:"<textarea></textarea>",addListeners:function(){var e=this;e.parent.addListeners.call(e),e.single&&"no"!==e.buttons&&e.autosubmit()},autosubmit:function(){var e=this;e.inputEl.bind("keydown",function(t){(t.ctrlKey||t.metaKey)&&13===t.keyCode&&e.scope.$apply(function(){e.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableUiSelect",["editableDirectiveFactory",function(e){var t=function(e,t){var n=angular.element("<"+e+"/>");n.html(t.html());for(var r=t[0].attributes,i=0;i<r.length;++i)n.attr(r.item(i).nodeName,r.item(i).value);return n},n=null,r=null,i=e({directiveName:"editableUiSelect",inputTpl:"<ui-select></ui-select>",render:function(){this.parent.render.call(this),this.inputEl.append(t("ui-select-match",n)),this.inputEl.append(t("ui-select-choices",r)),this.inputEl.removeAttr("ng-model"),this.inputEl.attr("ng-model","$parent.$data")}}),o=i.link;return i.link=function(e,t,i,a){var s=t.find("editable-ui-select-match"),l=t.find("editable-ui-select-choices");return n=s.clone(),r=l.clone(),s.remove(),l.remove(),o(e,t,i,a)},i}]),angular.module("xeditable").factory("editableController",["$q","editableUtils",function(e,t){function n(e,n,r,i,o,a,s,l,u,c){var d,f,h=this;h.scope=e,h.elem=r,h.attrs=n,h.inputEl=null,h.editorEl=null,h.single=!0,h.error="",h.theme=o[s.theme]||o.default,h.parent={},h.icon_set="default"===s.icon_set?a.default[s.theme]:a.external[s.icon_set],h.inputTpl="",h.directiveName="",h.useCopy=!1,h.single=null,h.buttons="right",h.init=function(t){if(h.single=t,h.name=n.eName||n[h.directiveName],!n[h.directiveName])throw"You should provide value for `"+h.directiveName+"` in editable element!";d=i(n[h.directiveName]),h.single?h.buttons=h.attrs.buttons||s.buttons:h.buttons="no",n.eName&&h.scope.$watch("$data",function(e){h.scope.$form.$data[n.eName]=e}),n.onshow&&(h.onshow=function(){return h.catchError(i(n.onshow)(e))}),n.onhide&&(h.onhide=function(){return i(n.onhide)(e)}),n.oncancel&&(h.oncancel=function(){return i(n.oncancel)(e)}),n.onbeforesave&&(h.onbeforesave=function(){return h.catchError(i(n.onbeforesave)(e))}),n.onaftersave&&(h.onaftersave=function(){return h.catchError(i(n.onaftersave)(e))}),e.$parent.$watch(n[h.directiveName],function(e,t){h.setLocalValue(),h.handleEmpty()})},h.render=function(){var e=h.theme;h.inputEl=angular.element(h.inputTpl),h.controlsEl=angular.element(e.controlsTpl),h.controlsEl.append(h.inputEl),"no"!==h.buttons&&(h.buttonsEl=angular.element(e.buttonsTpl),h.submitEl=angular.element(e.submitTpl),h.cancelEl=angular.element(e.cancelTpl),h.icon_set&&(h.submitEl.find("span").addClass(h.icon_set.ok),h.cancelEl.find("span").addClass(h.icon_set.cancel)),h.buttonsEl.append(h.submitEl).append(h.cancelEl),h.controlsEl.append(h.buttonsEl),h.inputEl.addClass("editable-has-buttons")),h.errorEl=angular.element(e.errorTpl),h.controlsEl.append(h.errorEl),h.editorEl=angular.element(h.single?e.formTpl:e.noformTpl),h.editorEl.append(h.controlsEl);for(var r in n.$attr)if(!(r.length<=1)){var i=!1,o=r.substring(1,2);if("e"===r.substring(0,1)&&o===o.toUpperCase()&&"Form"!==(i=r.substring(1))&&"NgSubmit"!==i){i=i.substring(0,1).toLowerCase()+t.camelToDash(i.substring(1));var a="value"!==i&&""===n[r]?i:n[r];h.inputEl.attr(i,a)}}h.inputEl.addClass("editable-input"),h.inputEl.attr("ng-model","$data"),h.editorEl.addClass(t.camelToDash(h.directiveName)),h.single&&(h.editorEl.attr("editable-form","$form"),h.editorEl.attr("blur",h.attrs.blur||("no"===h.buttons?"cancel":s.blurElem))),angular.isFunction(e.postrender)&&e.postrender.call(h)},h.setLocalValue=function(){h.scope.$data=h.useCopy?angular.copy(d(e.$parent)):d(e.$parent)},h.show=function(){return h.setLocalValue(),h.render(),r.after(h.editorEl),u(h.editorEl)(e),h.addListeners(),r.addClass("editable-hide"),h.onshow()},h.hide=function(){return h.editorEl.remove(),r.removeClass("editable-hide"),h.onhide()},h.cancel=function(){h.oncancel()},h.addListeners=function(){h.inputEl.bind("keyup",function(e){if(h.single)switch(e.keyCode){case 27:h.scope.$apply(function(){h.scope.$form.$cancel()})}}),h.single&&"no"===h.buttons&&h.autosubmit(),h.editorEl.bind("click",function(e){e.which&&1!==e.which||h.scope.$form.$visible&&(h.scope.$form._clicked=!0)})},h.setWaiting=function(e){e?(f=!h.inputEl.attr("disabled")&&!h.inputEl.attr("ng-disabled")&&!h.inputEl.attr("ng-enabled"))&&(h.inputEl.attr("disabled","disabled"),h.buttonsEl&&h.buttonsEl.find("button").attr("disabled","disabled")):f&&(h.inputEl.removeAttr("disabled"),h.buttonsEl&&h.buttonsEl.find("button").removeAttr("disabled"))},h.activate=function(e,t){setTimeout(function(){var n=h.inputEl[0];"focus"===s.activate&&n.focus&&(e&&(t=t||e,n.onfocus=function(){var n=this;setTimeout(function(){n.setSelectionRange(e,t)})}),n.focus()),"select"===s.activate&&n.select&&n.select()},0)},h.setError=function(t){angular.isObject(t)||(e.$error=t,h.error=t)},h.catchError=function(e,t){return angular.isObject(e)&&!0!==t?c.when(e).then(angular.bind(this,function(e){this.catchError(e,!0)}),angular.bind(this,function(e){this.catchError(e,!0)})):t&&angular.isObject(e)&&e.status&&200!==e.status&&e.data&&angular.isString(e.data)?(this.setError(e.data),e=e.data):angular.isString(e)&&this.setError(e),e},h.save=function(){d.assign(e.$parent,h.useCopy?angular.copy(h.scope.$data):h.scope.$data)},h.handleEmpty=function(){var t=d(e.$parent),n=null===t||void 0===t||""===t||angular.isArray(t)&&0===t.length;r.toggleClass("editable-empty",n)},h.autosubmit=angular.noop,h.onshow=angular.noop,h.onhide=angular.noop,h.oncancel=angular.noop,h.onbeforesave=angular.noop,h.onaftersave=angular.noop}return n.$inject=["$scope","$attrs","$element","$parse","editableThemes","editableIcons","editableOptions","$rootScope","$compile","$q"],n}]),angular.module("xeditable").factory("editableDirectiveFactory",["$parse","$compile","editableThemes","$rootScope","$document","editableController","editableFormController","editableOptions",function(e,t,n,r,i,o,a,s){return function(t){return{restrict:"A",scope:!0,require:[t.directiveName,"?^form"],controller:o,link:function(n,o,l,u){var c,d=u[0],f=!1;if(u[1])c=u[1],f=void 0===l.eSingle;else if(l.eForm){var h=e(l.eForm)(n);if(h)c=h,f=!0;else for(var p=0;p<i[0].forms.length;p++)if(i[0].forms[p].name===l.eForm){c=null,f=!0;break}}if(angular.forEach(t,function(e,t){void 0!==d[t]&&(d.parent[t]=d[t])}),angular.extend(d,t),!(angular.isDefined(l.editDisabled)?n.$eval(l.editDisabled):s.isDisabled))if(d.init(!f),n.$editable=d,o.addClass("editable"),f)if(c){if(n.$form=c,!n.$form.$addEditable)throw"Form with editable elements should have `editable-form` attribute.";n.$form.$addEditable(d)}else r.$$editableBuffer=r.$$editableBuffer||{},r.$$editableBuffer[l.eForm]=r.$$editableBuffer[l.eForm]||[],r.$$editableBuffer[l.eForm].push(d),n.$form=null;else n.$form=a(),n.$form.$addEditable(d),l.eForm&&(n.$parent[l.eForm]=n.$form),(!l.eForm||l.eClickable)&&(o.addClass("editable-click"),
o.bind(s.activationEvent,function(e){e.preventDefault(),e.editable=d,n.$apply(function(){n.$form.$show()})}))}}}}]),angular.module("xeditable").factory("editableFormController",["$parse","$document","$rootScope","editablePromiseCollection","editableUtils",function(e,t,n,r,i){var o=[],a=function(e,t){if(t==e)return!0;for(var n=t.parentNode;null!==n;){if(n==e)return!0;n=n.parentNode}return!1},s=function(e,t){var n=!0,r=e.$editables;return angular.forEach(r,function(e){var r=e.editorEl[0];a(r,t.target)&&(n=!1)}),n};t.bind("click",function(e){if(!e.which||1===e.which){for(var t=[],r=[],i=0;i<o.length;i++)o[i]._clicked?o[i]._clicked=!1:o[i].$waiting||("cancel"===o[i]._blur&&s(o[i],e)&&t.push(o[i]),"submit"===o[i]._blur&&s(o[i],e)&&r.push(o[i]));(t.length||r.length)&&n.$apply(function(){angular.forEach(t,function(e){e.$cancel()}),angular.forEach(r,function(e){e.$submit()})})}}),n.$on("closeEdit",function(){for(var e=0;e<o.length;e++)o[e].$hide()});var l={$addEditable:function(e){this.$editables.push(e),e.elem.bind("$destroy",angular.bind(this,this.$removeEditable,e)),e.scope.$form||(e.scope.$form=this),this.$visible&&e.catchError(e.show()),e.catchError(e.setWaiting(this.$waiting))},$removeEditable:function(e){for(var t=0;t<this.$editables.length;t++)if(this.$editables[t]===e)return void this.$editables.splice(t,1)},$show:function(){if(!this.$visible){this.$visible=!0;var e=r();e.when(this.$onshow()),this.$setError(null,""),angular.forEach(this.$editables,function(t){e.when(t.show())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$activate),onFalse:angular.bind(this,this.$activate),onString:angular.bind(this,this.$activate)}),setTimeout(angular.bind(this,function(){this._clicked=!1,-1===i.indexOf(o,this)&&o.push(this)}),0)}},$activate:function(e){var t;if(this.$editables.length){if(angular.isString(e))for(t=0;t<this.$editables.length;t++)if(this.$editables[t].name===e)return void this.$editables[t].activate();for(t=0;t<this.$editables.length;t++)if(this.$editables[t].error)return void this.$editables[t].activate();this.$editables[0].activate(this.$editables[0].elem[0].selectionStart,this.$editables[0].elem[0].selectionEnd)}},$hide:function(){this.$visible&&(this.$visible=!1,this.$onhide(),angular.forEach(this.$editables,function(e){e.hide()}),i.arrayRemove(o,this))},$cancel:function(){this.$visible&&(this.$oncancel(),angular.forEach(this.$editables,function(e){e.cancel()}),this.$hide())},$setWaiting:function(e){this.$waiting=!!e,angular.forEach(this.$editables,function(t){t.setWaiting(!!e)})},$setError:function(e,t){angular.forEach(this.$editables,function(n){e&&n.name!==e||n.setError(t)})},$submit:function(){function e(e){var t=r();t.when(this.$onbeforesave()),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:e?angular.bind(this,this.$save):angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})}if(!this.$waiting){this.$setError(null,"");var t=r();angular.forEach(this.$editables,function(e){t.when(e.onbeforesave())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,e,!0),onFalse:angular.bind(this,e,!1),onString:angular.bind(this,this.$activate)})}},$save:function(){angular.forEach(this.$editables,function(e){e.save()});var e=r();e.when(this.$onaftersave()),angular.forEach(this.$editables,function(t){e.when(t.onaftersave())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})},$onshow:angular.noop,$oncancel:angular.noop,$onhide:angular.noop,$onbeforesave:angular.noop,$onaftersave:angular.noop};return function(){return angular.extend({$editables:[],$visible:!1,$waiting:!1,$data:{},_clicked:!1,_blur:null},l)}}]),angular.module("xeditable").directive("editableForm",["$rootScope","$parse","editableFormController","editableOptions",function(e,t,n,r){return{restrict:"A",require:["form"],compile:function(){return{pre:function(t,r,i,o){var a,s=o[0];i.editableForm?t[i.editableForm]&&t[i.editableForm].$show?(a=t[i.editableForm],angular.extend(s,a)):(a=n(),t[i.editableForm]=a,angular.extend(a,s)):(a=n(),angular.extend(s,a));var l=e.$$editableBuffer,u=s.$name;u&&l&&l[u]&&(angular.forEach(l[u],function(e){a.$addEditable(e)}),delete l[u])},post:function(e,n,i,o){var a;a=i.editableForm&&e[i.editableForm]&&e[i.editableForm].$show?e[i.editableForm]:o[0],i.onshow&&(a.$onshow=angular.bind(a,t(i.onshow),e)),i.onhide&&(a.$onhide=angular.bind(a,t(i.onhide),e)),i.oncancel&&(a.$oncancel=angular.bind(a,t(i.oncancel),e)),i.shown&&t(i.shown)(e)&&a.$show(),a._blur=i.blur||r.blurForm,i.ngSubmit||i.submit||(i.onbeforesave&&(a.$onbeforesave=function(){return t(i.onbeforesave)(e,{$data:a.$data})}),i.onaftersave&&(a.$onaftersave=function(){return t(i.onaftersave)(e,{$data:a.$data})}),n.bind("submit",function(t){t.preventDefault(),e.$apply(function(){a.$submit()})})),n.bind("click",function(e){e.which&&1!==e.which||a.$visible&&(a._clicked=!0)})}}}}}]),angular.module("xeditable").factory("editablePromiseCollection",["$q",function(e){function t(){return{promises:[],hasFalse:!1,hasString:!1,when:function(t,n){if(!1===t)this.hasFalse=!0;else if(!n&&angular.isObject(t))this.promises.push(e.when(t));else{if(!angular.isString(t))return;this.hasString=!0}},then:function(t){function n(){s.hasString||s.hasFalse?!s.hasString&&s.hasFalse?i():o():r()}t=t||{};var r=t.onTrue||angular.noop,i=t.onFalse||angular.noop,o=t.onString||angular.noop,a=t.onWait||angular.noop,s=this;this.promises.length?(a(!0),e.all(this.promises).then(function(e){a(!1),angular.forEach(e,function(e){s.when(e,!0)}),n()},function(e){a(!1),o()})):n()}}}return t}]),angular.module("xeditable").factory("editableUtils",[function(){return{indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},arrayRemove:function(e,t){var n=this.indexOf(e,t);return n>=0&&e.splice(n,1),t},camelToDash:function(e){var t=/[A-Z]/g;return e.replace(t,function(e,t){return(t?"-":"")+e.toLowerCase()})},dashToCamel:function(e){var t=/([\:\-\_]+(.))/g,n=/^moz([A-Z])/;return e.replace(t,function(e,t,n,r){return r?n.toUpperCase():n}).replace(n,"Moz$1")}}}]),angular.module("xeditable").factory("editableNgOptionsParser",[function(){function e(e){var n;if(!(n=e.match(t)))throw"ng-options parse error";var r,i=n[2]||n[1],o=n[4]||n[6],a=n[5],s=(n[3],n[2]?n[1]:o),l=n[7],u=n[8],c=u?n[8]:null;return void 0===a?(r=o+" in "+l,void 0!==u&&(r+=" track by "+c)):r="("+a+", "+o+") in "+l,{ngRepeat:r,locals:{valueName:o,keyName:a,valueFn:s,displayFn:i}}}var t=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;return e}]),angular.module("xeditable").factory("editableCombodate",[function(){function e(e,t){if(this.$element=angular.element(e),"INPUT"!=this.$element[0].nodeName)throw"Combodate should be applied to INPUT element";var n=(new Date).getFullYear();this.defaults={format:"YYYY-MM-DD HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:n,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,customClass:"",roundTime:!0,smartDays:!0},this.options=angular.extend({},this.defaults,t),this.init()}return e.prototype={constructor:e,init:function(){if(this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=angular.element('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.options.smartDays){var e=this;this.$widget.find("select").bind("change",function(t){(angular.element(t.target).hasClass("month")||angular.element(t.target).hasClass("year"))&&e.fillCombo("day")})}this.$widget.find("select").css("width","auto"),this.$element.css("display","none").after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template,t=this.options.customClass;return angular.forEach(this.map,function(t,n){t=t[0];var r=new RegExp(t+"+"),i=t.length>1?t.substring(1,2):t;e=e.replace(r,"{"+i+"}")}),e=e.replace(/ /g,"&nbsp;"),angular.forEach(this.map,function(n,r){n=n[0];var i=n.length>1?n.substring(1,2):n;e=e.replace("{"+i+"}",'<select class="'+r+" "+t+'"></select>')}),e},initCombos:function(){for(var e in this.map){var t=this.$widget[0].querySelectorAll("."+e);this["$"+e]=t.length?angular.element(t):null,this.fillCombo(e)}},fillCombo:function(e){var t=this["$"+e];if(t){var n="fill"+e.charAt(0).toUpperCase()+e.slice(1),r=this[n](),i=t.val();t.html("");for(var o=0;o<r.length;o++)t.append('<option value="'+r[o][0]+'">'+r[o][1]+"</option>");t.val(i)}},fillCommon:function(e){var t,n=[];if("name"===this.options.firstItem){t=moment.relativeTime||moment.langData()._relativeTime;var r="function"==typeof t[e]?t[e](1,!0,e,!1):t[e];r=r.split(" ").reverse()[0],n.push(["",r])}else"empty"===this.options.firstItem&&n.push(["",""]);return n},fillDay:function(){var e,t,n=this.fillCommon("d"),r=-1!==this.options.template.indexOf("DD"),i=31;if(this.options.smartDays&&this.$month&&this.$year){var o=parseInt(this.$month.val(),10),a=parseInt(this.$year.val(),10);isNaN(o)||isNaN(a)||(i=moment([a,o]).daysInMonth())}for(t=1;i>=t;t++)e=r?this.leadZero(t):t,n.push([t,e]);return n},fillMonth:function(){var e,t,n=this.fillCommon("M"),r=-1!==this.options.template.indexOf("MMMM"),i=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(t=0;11>=t;t++)e=r?moment().date(1).month(t).format("MMMM"):i?moment().date(1).month(t).format("MMM"):o?this.leadZero(t+1):t+1,n.push([t,e]);return n},fillYear:function(){var e,t,n=[],r=-1!==this.options.template.indexOf("YYYY");for(t=this.options.maxYear;t>=this.options.minYear;t--)e=r?t:(t+"").substring(2),n[this.options.yearDescending?"push":"unshift"]([t,e]);return n=this.fillCommon("y").concat(n)},fillHour:function(){var e,t,n=this.fillCommon("h"),r=-1!==this.options.template.indexOf("h"),i=(this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=r?1:0,a=r?12:23;for(t=o;a>=t;t++)e=i?this.leadZero(t):t,n.push([t,e]);return n},fillMinute:function(){var e,t,n=this.fillCommon("m"),r=-1!==this.options.template.indexOf("mm");for(t=0;59>=t;t+=this.options.minuteStep)e=r?this.leadZero(t):t,n.push([t,e]);return n},fillSecond:function(){var e,t,n=this.fillCommon("s"),r=-1!==this.options.template.indexOf("ss");for(t=0;59>=t;t+=this.options.secondStep)e=r?this.leadZero(t):t,n.push([t,e]);return n},fillAmpm:function(){var e=-1!==this.options.template.indexOf("a");return this.options.template.indexOf("A"),[["am",e?"am":"AM"],["pm",e?"pm":"PM"]]},getValue:function(e){var t,n={},r=this,i=!1;return angular.forEach(this.map,function(e,t){if("ampm"!==t){var o="day"===t?1:0;return n[t]=r["$"+t]?parseInt(r["$"+t].val(),10):o,isNaN(n[t])?(i=!0,!1):void 0}}),i?"":(this.$ampm&&(12===n.hour?n.hour="am"===this.$ampm.val()?0:12:n.hour="am"===this.$ampm.val()?n.hour:n.hour+12),t=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(t),e=void 0===e?this.options.format:e,null===e?t.isValid()?t:null:t.isValid()?t.format(e):"")},setValue:function(e){function t(e,t){var n={};return angular.forEach(e.children("option"),function(e,r){var i=angular.element(e).attr("value");if(""!==i){var o=Math.abs(i-t);(void 0===n.distance||o<n.distance)&&(n={value:i,distance:o})}}),n.value}if(e){var n="string"==typeof e?moment(e,this.options.format,!0):moment(e),r=this,i={};n.isValid()&&(angular.forEach(this.map,function(e,t){"ampm"!==t&&(i[t]=n[e[1]]())}),this.$ampm&&(i.hour>=12?(i.ampm="pm",i.hour>12&&(i.hour-=12)):(i.ampm="am",0===i.hour&&(i.hour=12))),angular.forEach(i,function(e,n){r["$"+n]&&("minute"===n&&r.options.minuteStep>1&&r.options.roundTime&&(e=t(r["$"+n],e)),"second"===n&&r.options.secondStep>1&&r.options.roundTime&&(e=t(r["$"+n],e)),r["$"+n].val(e))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(n.format(this.options.format)).triggerHandler("change"))}},highlight:function(e){e.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(e){return 9>=e?"0"+e:e},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},{getInstance:function(t,n){return new e(t,n)}}}]),angular.module("xeditable").factory("editableIcons",function(){return{default:{bs2:{ok:"icon-ok icon-white",cancel:"icon-remove"},bs3:{ok:"glyphicon glyphicon-ok",cancel:"glyphicon glyphicon-remove"}},external:{"font-awesome":{ok:"fa fa-check",cancel:"fa fa-times"}}}}),angular.module("xeditable").factory("editableThemes",function(){return{default:{formTpl:'<form class="editable-wrap"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<span class="editable-controls"></span>',inputTpl:"",errorTpl:'<div class="editable-error" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit">save</button>',cancelTpl:'<button type="button" ng-click="$form.$cancel()">cancel</button>'},bs2:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn" ng-click="$form.$cancel()"><span></span></button>'},bs3:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span></span></button>',buttonsClass:"",inputClass:"",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableBsdate":case"editableTime":case"editableMonth":case"editableWeek":case"editablePassword":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}break;case"editableCheckbox":this.editorEl.addClass("checkbox")}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}},semantic:{formTpl:'<form class="editable-wrap ui form" ng-class="{\'error\': $error}" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls ui fluid input" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error ui error message" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="mini ui buttons"></span>',submitTpl:'<button type="submit" class="ui primary button"><i class="ui check icon"></i></button>',cancelTpl:'<button type="button" class="ui button" ng-click="$form.$cancel()"><i class="ui cancel icon"></i></button>'}}}),function(){"use strict";angular.module("ui.sortable",[]).constant("sortableConfig",{itemClass:"as-sortable-item",handleClass:"as-sortable-item-handle",placeHolderClass:"as-sortable-placeholder",dragClass:"as-sortable-drag",hiddenClass:"as-sortable-hidden"})}(),function(){"use strict";angular.module("ui.sortable").factory("$helper",["$document","$window",function(e,t){return{height:function(e){return e.prop("offsetHeight")},width:function(e){return e.prop("offsetWidth")},offset:function(n,r){var i=n[0].getBoundingClientRect();return r||(r=e[0].documentElement),{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||r.scrollTop-r.offsetTop),left:i.left+(t.pageXOffset||r.scrollLeft-r.offsetLeft)}},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},isTouchInvalid:function(e){var t=!1;return void 0!==e.touches&&e.touches.length>1?t=!0:void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&e.originalEvent.touches.length>1&&(t=!0),t},positionStarted:function(e,t,n){var r={};return r.offsetX=e.pageX-this.offset(t,n).left,r.offsetY=e.pageY-this.offset(t,n).top,r.startX=r.lastX=e.pageX,r.startY=r.lastY=e.pageY,r.nowX=r.nowY=r.distX=r.distY=r.dirAx=0,r.dirX=r.dirY=r.lastDirX=r.lastDirY=r.distAxX=r.distAxY=0,r},calculatePosition:function(e,t){e.lastX=e.nowX,e.lastY=e.nowY,e.nowX=t.pageX,e.nowY=t.pageY,e.distX=e.nowX-e.lastX,e.distY=e.nowY-e.lastY,e.lastDirX=e.dirX,e.lastDirY=e.dirY,e.dirX=0===e.distX?0:e.distX>0?1:-1,e.dirY=0===e.distY?0:e.distY>0?1:-1;var n=Math.abs(e.distX)>Math.abs(e.distY)?1:0;e.dirAx!==n?(e.distAxX=0,e.distAxY=0):(e.distAxX+=Math.abs(e.distX),0!==e.dirX&&e.dirX!==e.lastDirX&&(e.distAxX=0),e.distAxY+=Math.abs(e.distY),0!==e.dirY&&e.dirY!==e.lastDirY&&(e.distAxY=0)),e.dirAx=n},movePosition:function(e,t,n,r,i,o){var a,s="relative"===i;t.x=e.pageX-n.offsetX,t.y=e.pageY-n.offsetY,r&&(a=this.offset(r,o),s&&(t.x-=a.left,t.y-=a.top,a.left=0,a.top=0),t.x<a.left?t.x=a.left:t.x>=a.width+a.left-this.offset(t).width&&(t.x=a.width+a.left-this.offset(t).width),t.y<a.top?t.y=a.top:t.y>=a.height+a.top-this.offset(t).height&&(t.y=a.height+a.top-this.offset(t).height)),t.css({left:t.x+"px",top:t.y+"px"}),this.calculatePosition(n,e)},dragItem:function(e){return{index:e.index(),parent:e.sortableScope,source:e,sourceInfo:{index:e.index(),itemScope:e.itemScope,sortableScope:e.sortableScope},moveTo:function(e,t){this.parent=e,this.isSameParent()&&this.source.index()<t&&(t-=1),this.index=t},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index),this.parent.insertItem(this.index,this.source.modelValue)}}},noDrag:function(e){return void 0!==e.attr("no-drag")||void 0!==e.attr("data-no-drag")}}}])}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableController",["$scope",function(e){this.scope=e,e.modelValue=null,e.callbacks=null,e.type="sortable",e.options={},e.isDisabled=!1,e.insertItem=function(t,n){e.safeApply(function(){e.modelValue.splice(t,0,n)})},e.removeItem=function(t){var n=null;return t>-1&&e.safeApply(function(){n=e.modelValue.splice(t,1)[0]}),n},e.isEmpty=function(){return e.modelValue&&0===e.modelValue.length},e.accept=function(t,n,r){return e.callbacks.accept(t,n,r)},e.safeApply=function(e){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?e&&"function"==typeof e&&e():this.$apply(e)}}]),e.directive("asSortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"ui.sortable.sortableController",link:function(e,t,n,r){var i,o;(i=r)&&(i.$render=function(){i.$modelValue&&angular.isArray(i.$modelValue)||i.$setViewValue([]),e.modelValue=i.$modelValue},e.element=t,o={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragCancel:null,dragEnd:null},o.accept=function(){return!0},o.orderChanged=function(){},o.itemMoved=function(){},o.dragStart=function(){},o.dragCancel=function(){},o.dragEnd=function(){},e.$watch(n.asSortable,function(t){angular.forEach(t,function(t,n){o[n]?"function"==typeof t&&(o[n]=t):e.options[n]=t}),e.callbacks=o},!0),angular.isDefined(n.isDisabled)&&e.$watch(n.isDisabled,function(t){angular.isUndefined(t)||(e.isDisabled=t)},!0))}}})}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableItemHandleController",["$scope",function(e){this.scope=e,e.itemScope=null,e.type="handle"}]),e.directive("asSortableItemHandle",["sortableConfig","$helper","$window","$document",function(e,t,n,r){return{require:"^asSortableItem",scope:!0,restrict:"A",controller:"ui.sortable.sortableItemHandleController",link:function(i,o,a,s){function l(e,t){e[0].parentNode.insertBefore(f[0],e[0]),m.moveTo(t.sortableScope,t.index())}function u(e,t){e.after(f),m.moveTo(t.sortableScope,t.index()+1)}function c(){h.replaceWith(i.itemScope.element),f.remove(),d.remove(),d=null,O=!1,g.css("cursor","")}var d,f,h,p,m,g,v,b,y,w,x,k,C,S,M,T,_,$,L,D,E,O,A=!1;E=n.hasOwnProperty("ontouchstart"),e.handleClass&&o.addClass(e.handleClass),i.itemScope=s.scope,i.$watch("sortableScope.isDisabled",function(e){A!==e&&(A=e,A?$():_())}),b=function(e){var n,i=function(){angular.element(r).unbind("mousemove",a),angular.element(r).unbind("touchmove",a),o.unbind("mouseup",i),o.unbind("touchend",i),o.unbind("touchcancel",i)},a=function(r){r.preventDefault();var o=t.eventObj(r);n||(n={clientX:o.clientX,clientY:o.clientY}),Math.abs(o.clientX-n.clientX)+Math.abs(o.clientY-n.clientY)>10&&(i(),w(e))};angular.element(r).bind("mousemove",a),angular.element(r).bind("touchmove",a),o.bind("mouseup",i),o.bind("touchend",i),o.bind("touchcancel",i)},w=function(n){var o,a;(E||2!==n.button&&3!==n.which)&&(E&&t.isTouchInvalid(n)||!O&&S(n)&&(O=!0,n.preventDefault(),o=t.eventObj(n),y=angular.element(r[0].querySelector(i.sortableScope.options.scrollableContainer)).length>0?r[0].querySelector(i.sortableScope.options.scrollableContainer):r[0].documentElement,g=angular.element(angular.element(r[0].querySelector(i.sortableScope.options.containment)).length>0?r[0].querySelector(i.sortableScope.options.containment):r[0].body),g.css("cursor","move"),v=i.sortableScope.options.containerPositioning||"absolute",m=t.dragItem(i),a=i.itemScope.element.prop("tagName"),d=angular.element(r[0].createElement(i.sortableScope.element.prop("tagName"))).addClass(i.sortableScope.element.attr("class")).addClass(e.dragClass),d.css("width",t.width(i.itemScope.element)+"px"),d.css("height",t.height(i.itemScope.element)+"px"),f=angular.element(r[0].createElement(a)).addClass(e.placeHolderClass).addClass(i.sortableScope.options.additionalPlaceholderClass),f.css("width",t.width(i.itemScope.element)+"px"),f.css("height",t.height(i.itemScope.element)+"px"),h=angular.element(r[0].createElement(a)),e.hiddenClass&&h.addClass(e.hiddenClass),p=t.positionStarted(o,i.itemScope.element,y),i.itemScope.element.after(f),i.itemScope.element.after(h),d.append(i.itemScope.element),g.append(d),t.movePosition(o,d,p,g,v,y),i.sortableScope.$apply(function(){i.callbacks.dragStart(m.eventArgs())}),L()))},S=function(e){var n,r,i;for(n=angular.element(e.target),r=n.scope(),i=!1;!i&&void 0!==r;)r.type&&"handle"===r.type?i=!0:r=r.$parent;for(;i&&n[0]!==o[0];)t.noDrag(n)&&(i=!1),n=n.parent();return i},x=function(o){var a,s,c,h,b;if((!E||!t.isTouchInvalid(o))&&O&&d){if(o.preventDefault(),a=t.eventObj(o),t.movePosition(a,d,p,g,v,y),s=a.pageX-r[0].documentElement.scrollLeft,c=a.pageY-(n.pageYOffset||r[0].documentElement.scrollTop),d.addClass(e.hiddenClass),r[0].elementFromPoint(s,c),b=angular.element(r[0].elementFromPoint(s,c)),d.removeClass(e.hiddenClass),!(h=b.scope())||!h.type)return;if("handle"===h.type&&(h=h.itemScope),"item"!==h.type&&"sortable"!==h.type)return;"item"===h.type&&(b=h.element,h.sortableScope.accept(i,h.sortableScope,h)&&(p.dirAx&&i.itemScope.sortableScope.$id===h.sortableScope.$id?(p.distAxX=0,p.distX<0?l(b,h):p.distX>0&&u(b,h)):M(a,b)?l(b,h):u(b,h))),"sortable"===h.type&&h.accept(i,h)&&b[0].parentNode!==h.element[0]&&(T(b)||(b[0].appendChild(f[0]),m.moveTo(h,h.modelValue.length)))}},T=function(t){var n,r,i;for(n=t.children(),i=0;i<n.length;i+=1)if(angular.element(n[i]).hasClass(e.placeHolderClass)){r=!0;break}return r},M=function(e,n){var r;return!1,r=t.offset(n),t.offset(f).top>r.top?t.offset(d).top<r.top+t.height(n)/2:e.pageY<r.top},k=function(e){O&&(e.preventDefault(),d&&(c(),m.apply(),i.sortableScope.$apply(function(){m.isSameParent()?m.isOrderChanged()&&i.callbacks.orderChanged(m.eventArgs()):i.callbacks.itemMoved(m.eventArgs())}),i.sortableScope.$apply(function(){i.callbacks.dragEnd(m.eventArgs())}),m=null),D())},C=function(e){O&&(e.preventDefault(),d&&(c(),i.sortableScope.$apply(function(){i.callbacks.dragCancel(m.eventArgs())}),m=null),D())},_=function(){o.bind("touchstart",b),o.bind("mousedown",b)},$=function(){o.unbind("touchstart",b),o.unbind("mousedown",b)},_(),angular.element(r[0].body).bind("keydown",function(e){27===e.keyCode&&C(e)}),L=function(){angular.element(r).bind("touchmove",x),angular.element(r).bind("touchend",k),angular.element(r).bind("touchcancel",C),angular.element(r).bind("mousemove",x),angular.element(r).bind("mouseup",k)},D=function(){angular.element(r).unbind("touchend",k),angular.element(r).unbind("touchcancel",C),angular.element(r).unbind("touchmove",x),angular.element(r).unbind("mouseup",k),angular.element(r).unbind("mousemove",x)}}}}])}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableItemController",["$scope",function(e){this.scope=e,e.sortableScope=null,e.modelValue=null,e.type="item",e.index=function(){return e.sortableScope.modelValue.indexOf(e.modelValue)},e.itemData=function(){return e.sortableScope.modelValue[e.$index]}}]),e.directive("asSortableItem",["sortableConfig",function(e){return{require:"^asSortable",restrict:"A",controller:"ui.sortable.sortableItemController",link:function(t,n,r,i){e.itemClass&&n.addClass(e.itemClass),t.sortableScope=i.scope,t.modelValue=i.scope.modelValue[t.$index],t.element=n}}}])}();var hljs=new function(){function e(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function t(e){return e.nodeName.toLowerCase()}function n(e,t){var n=e&&e.exec(t);return n&&0==n.index}function r(e){return Array.prototype.map.call(e.childNodes,function(e){return 3==e.nodeType?b.useBR?e.nodeValue.replace(/\n/g,""):e.nodeValue:"br"==t(e)?"\n":r(e)}).join("")}function i(e){var t=(e.className+" "+(e.parentNode?e.parentNode.className:"")).split(/\s+/);return t=t.map(function(e){return e.replace(/^language-/,"")}),t.filter(function(e){return v(e)||"no-highlight"==e})[0]}function o(e,t){var n={};for(var r in e)n[r]=e[r];if(t)for(var r in t)n[r]=t[r];return n}function a(e){var n=[];return function e(r,i){for(var o=r.firstChild;o;o=o.nextSibling)3==o.nodeType?i+=o.nodeValue.length:"br"==t(o)?i+=1:1==o.nodeType&&(n.push({event:"start",offset:i,node:o}),i=e(o,i),n.push({event:"stop",offset:i,node:o}));return i}(e,0),n}function s(n,r,i){function o(){return n.length&&r.length?n[0].offset!=r[0].offset?n[0].offset<r[0].offset?n:r:"start"==r[0].event?n:r:n.length?n:r}function a(n){function r(t){return" "+t.nodeName+'="'+e(t.value)+'"'}c+="<"+t(n)+Array.prototype.map.call(n.attributes,r).join("")+">"}function s(e){c+="</"+t(e)+">"}function l(e){("start"==e.event?a:s)(e.node)}for(var u=0,c="",d=[];n.length||r.length;){var f=o();if(c+=e(i.substr(u,f[0].offset-u)),u=f[0].offset,f==n){d.reverse().forEach(s);do{l(f.splice(0,1)[0]),f=o()}while(f==n&&f.length&&f[0].offset==u);d.reverse().forEach(a)}else"start"==f[0].event?d.push(f[0].node):d.pop(),l(f.splice(0,1)[0])}return c+e(i.substr(u))}function l(e){function t(e){return e&&e.source||e}function n(n,r){return RegExp(t(n),"m"+(e.cI?"i":"")+(r?"g":""))}function r(i,a){function s(t,n){e.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(e){var n=e.split("|");l[n[0]]=[t,n[1]?Number(n[1]):1]})}if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var l={};"string"==typeof i.k?s("keyword",i.k):Object.keys(i.k).forEach(function(e){s(e,i.k[e])}),i.k=l}i.lR=n(i.l||/\b[A-Za-z0-9_]+\b/,!0),a&&(i.bK&&(i.b=i.bK.split(" ").join("|")),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=t(i.e)||"",i.eW&&a.tE&&(i.tE+=(i.e?"|":"")+a.tE)),i.i&&(i.iR=n(i.i)),void 0===i.r&&(i.r=1),i.c||(i.c=[]);var u=[];i.c.forEach(function(e){e.v?e.v.forEach(function(t){u.push(o(e,t))}):u.push("self"==e?i:e)}),i.c=u,i.c.forEach(function(e){r(e,i)}),i.starts&&r(i.starts,a);var c=i.c.map(function(e){return e.bK?"\\.?\\b("+e.b+")\\b\\.?":e.b}).concat([i.tE]).concat([i.i]).map(t).filter(Boolean);i.t=c.length?n(c.join("|"),!0):{exec:function(e){return null}},i.continuation={}}}r(e)}function u(t,r,i,o){function a(e,t){for(var r=0;r<t.c.length;r++)if(n(t.c[r].bR,e))return t.c[r]}function s(e,t){return n(e.eR,t)?e:e.eW?s(e.parent,t):void 0}function d(e,t){return!i&&n(t.iR,e)}function f(e,t){var n=k.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function h(e,t,n,r){var i=r?"":b.classPrefix,o='<span class="'+i,a=n?"":"</span>";return(o+=e+'">')+t+a}function p(){var t=e(T);if(!C.k)return t;var n="",r=0;C.lR.lastIndex=0;for(var i=C.lR.exec(t);i;){n+=t.substr(r,i.index-r);var o=f(C,i);o?(_+=o[1],n+=h(o[0],i[0])):n+=i[0],r=C.lR.lastIndex,i=C.lR.exec(t)}return n+t.substr(r)}function m(){if(C.sL&&!y[C.sL])return e(T);var t=C.sL?u(C.sL,T,!0,C.continuation.top):c(T);return C.r>0&&(_+=t.r),"continuous"==C.subLanguageMode&&(C.continuation.top=t.top),h(t.language,t.value,!1,!0)}function g(){return void 0!==C.sL?m():p()}function w(t,n){var r=t.cN?h(t.cN,"",!0):"";t.rB?(S+=r,T=""):t.eB?(S+=e(n)+r,T=""):(S+=r,T=n),C=Object.create(t,{parent:{value:C}})}function x(t,n){if(T+=t,void 0===n)return S+=g(),0;var r=a(n,C);if(r)return S+=g(),w(r,n),r.rB?0:n.length;var i=s(C,n);if(i){var o=C;o.rE||o.eE||(T+=n),S+=g();do{C.cN&&(S+="</span>"),_+=C.r,C=C.parent}while(C!=i.parent);return o.eE&&(S+=e(n)),T="",i.starts&&w(i.starts,""),o.rE?0:n.length}if(d(n,C))throw new Error('Illegal lexeme "'+n+'" for mode "'+(C.cN||"<unnamed>")+'"');return T+=n,n.length||1}var k=v(t);if(!k)throw new Error('Unknown language: "'+t+'"');l(k);for(var C=o||k,S="",M=C;M!=k;M=M.parent)M.cN&&(S=h(M.cN,S,!0));var T="",_=0;try{for(var $,L,D=0;;){if(C.t.lastIndex=D,!($=C.t.exec(r)))break;L=x(r.substr(D,$.index-D),$[0]),D=$.index+L}x(r.substr(D));for(var M=C;M.parent;M=M.parent)M.cN&&(S+="</span>");return{r:_,value:S,language:t,top:C}}catch(t){if(-1!=t.message.indexOf("Illegal"))return{r:0,value:e(r)};throw t}}function c(t,n){n=n||b.languages||Object.keys(y);var r={r:0,value:e(t)},i=r;return n.forEach(function(e){if(v(e)){var n=u(e,t,!1);n.language=e,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}}),i.language&&(r.second_best=i),r}function d(e){return b.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t,n,r){return t.replace(/\t/g,b.tabReplace)})),b.useBR&&(e=e.replace(/\n/g,"<br>")),e}function f(e){var t=r(e),n=i(e);if("no-highlight"!=n){var o=n?u(n,t,!0):c(t),l=a(e);if(l.length){var f=document.createElementNS("http://www.w3.org/1999/xhtml","pre");f.innerHTML=o.value,o.value=s(l,a(f),t)}o.value=d(o.value),e.innerHTML=o.value,e.className+=" hljs "+(!n&&o.language||""),e.result={language:o.language,re:o.r},o.second_best&&(e.second_best={language:o.second_best.language,re:o.second_best.r})}}function h(e){b=o(b,e)}function p(){if(!p.called){p.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,f)}}function m(){addEventListener("DOMContentLoaded",p,!1),addEventListener("load",p,!1)}function g(e,t){var n=y[e]=t(this)
;n.aliases&&n.aliases.forEach(function(t){w[t]=e})}function v(e){return y[e]||y[w[e]]}var b={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},y={},w={};this.highlight=u,this.highlightAuto=c,this.fixMarkup=d,this.highlightBlock=f,this.configure=h,this.initHighlighting=p,this.initHighlightingOnLoad=m,this.registerLanguage=g,this.getLanguage=v,this.inherit=o,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\[\\s\\S]",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE]},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE]},this.CLCM={cN:"comment",b:"//",e:"$"},this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"},this.HCM={cN:"comment",b:"#",e:"$"},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.REGEXP_MODE={cN:"regexp",b:/\//,e:/\/[gim]*/,i:/\n/,c:[this.BE,{b:/\[/,e:/\]/,r:0,c:[this.BE]}]},this.TM={cN:"title",b:this.IR,r:0},this.UTM={cN:"title",b:this.UIR,r:0}};hljs.registerLanguage("json",function(e){var t={literal:"true false null"},n=[e.QSM,e.CNM],r={cN:"value",e:",",eW:!0,eE:!0,c:n,k:t},i={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[e.BE],i:"\\n",starts:r}],i:"\\S"},o={b:"\\[",e:"\\]",c:[e.inherit(r,{cN:null})],i:"\\S"};return n.splice(n.length,0,i,o),{c:n,k:t,i:"\\S"}}),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r||{},ii(wo,r,!1),p(r);var i=r.value;"string"==typeof i&&(i=new Uo(i,r.mode)),this.doc=i;var o=this.display=new t(n,i);o.wrapper.CodeMirror=this,c(this),l(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!Ji&&ht(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Zr},zi&&setTimeout(oi(ft,this,!0),20),gt(this),yi();var a=this;Ke(this,function(){a.curOp.forceUpdate=!0,br(a,i),r.autofocus&&!Ji||hi()==o.input?setTimeout(oi(Ft,a),20):Wt(a);for(var e in xo)xo.hasOwnProperty(e)&&xo[e](a,r[e],ko);for(var t=0;t<To.length;++t)To[t](a)})}function t(e,t){var n=this,r=n.input=ui("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Vi?r.style.width="1000px":r.setAttribute("wrap","off"),Zi&&(r.style.border="1px solid black"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false"),n.inputDiv=ui("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=ui("div",[ui("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=ui("div",[ui("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=ui("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=ui("div",null,"CodeMirror-gutter-filler"),n.lineDiv=ui("div",null,"CodeMirror-code"),n.selectionDiv=ui("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=ui("div",null,"CodeMirror-cursors"),n.measure=ui("div",null,"CodeMirror-measure"),n.lineMeasure=ui("div",null,"CodeMirror-measure"),n.lineSpace=ui("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=ui("div",[ui("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=ui("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=ui("div",null,null,"position: absolute; height: "+ta+"px; width: 1px;"),n.gutters=ui("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=ui("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=ui("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Pi&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),Zi&&(r.style.width="0px"),Vi||(n.scroller.draggable=!0),qi&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),Pi&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),n.viewFrom=n.viewTo=t.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Zr,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,be(e,100),e.state.modeGen++,e.curOp&&nt(e)}function i(e){e.options.lineWrapping?(gi(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(mi(e.display.wrapper,"CodeMirror-wrap"),h(e)),a(e),nt(e),Ne(e),setTimeout(function(){g(e)},100)}function o(e){var t=Be(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Ge(e.display)-3);return function(i){if(Rn(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function a(e){var t=e.doc,n=o(e);t.iter(function(e){var t=n(e);t!=e.height&&kr(e,t)})}function s(e){var t=Eo[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ne(e)}function u(e){c(e),nt(e),setTimeout(function(){b(e)},20)}function c(e){var t=e.display.gutters,n=e.options.gutters;ci(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(ui("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",d(e)}function d(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function f(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Pn(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Fn(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,r=i.to.line,n+=r.text.length-i.to.ch}return n}function h(e){var t=e.display,n=e.doc;t.maxLine=yr(n,n.first),t.maxLineLength=f(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=f(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function p(e){var t=ti(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function m(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Ce(e.display))}}function g(e,t){t||(t=m(e));var n=e.display,r=t.docHeight+ta,i=t.scrollWidth>t.clientWidth,o=r>t.clientHeight;if(o?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=i?xi(n.measure)+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,r-t.clientHeight+(t.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),i?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=o?xi(n.measure)+"px":"0",n.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),i&&o?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=xi(n.measure)+"px"):n.scrollbarFiller.style.display="",i&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=xi(n.measure)+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===xi(n.measure)){var a=Qi&&!Xi?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=a;var s=function(t){Vr(t)!=n.scrollbarV&&Vr(t)!=n.scrollbarH&&Ze(e,wt)(t)};Zo(n.scrollbarV,"mousedown",s),Zo(n.scrollbarH,"mousedown",s)}e.state.checkedOverlayScrollbar=!0}}function v(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-ke(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=Sr(t,r),a=Sr(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;if(o>s)return{from:s,to:Sr(t,Mr(yr(t,s))+e.wrapper.clientHeight)};if(Math.min(l,t.lastLine())>=a)return{from:Sr(t,Mr(yr(t,l))-e.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(a,o+1)}}function b(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=x(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=o);var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function y(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=w(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ui("div",[ui("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a),r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",d(e),!0}return!1}function w(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function x(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function k(e,t,n){for(var r,i=e.display.viewFrom,o=e.display.viewTo,a=v(e.display,e.doc,t),s=!0;;s=!1){var l=e.display.scroller.clientWidth;if(!C(e,a,n))break;r=!0,e.display.maxLineChanged&&!e.options.lineWrapping&&S(e);var u=m(e);if(pe(e),M(e,u),g(e,u),Vi&&e.options.lineWrapping&&T(e,u),s&&e.options.lineWrapping&&l!=e.display.scroller.clientWidth)n=!0;else if(n=!1,t&&null!=t.top&&(t={top:Math.min(u.docHeight-ta-u.clientHeight,t.top)}),a=v(e.display,e.doc,t),a.from>=e.display.viewFrom&&a.to<=e.display.viewTo)break}return e.display.updateLineNumbers=null,r&&(Rr(e,"update",e),(e.display.viewFrom!=i||e.display.viewTo!=o)&&Rr(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)),r}function C(e,t,n){var r=e.display,i=e.doc;if(!r.wrapper.offsetWidth)return void it(e);if(!(!n&&t.from>=r.viewFrom&&t.to<=r.viewTo&&0==lt(e))){y(e)&&it(e);var o=L(e),a=i.first+i.size,s=Math.max(t.from-e.options.viewportMargin,i.first),l=Math.min(a,t.to+e.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(i.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(a,r.viewTo)),oo&&(s=Vn(e.doc,s),l=Un(e.doc,l));var u=s!=r.viewFrom||l!=r.viewTo||r.lastSizeC!=r.wrapper.clientHeight;st(e,s,l),r.viewOffset=Mr(yr(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var c=lt(e);if(u||0!=c||n){var d=hi();return c>4&&(r.lineDiv.style.display="none"),D(e,r.updateLineNumbers,o),c>4&&(r.lineDiv.style.display=""),d&&hi()!=d&&d.offsetHeight&&d.focus(),ci(r.cursorDiv),ci(r.selectionDiv),u&&(r.lastSizeC=r.wrapper.clientHeight,be(e,400)),_(e),!0}}}function S(e){var t=e.display,n=$e(e,t.maxLine,t.maxLine.text.length).left;t.maxLineChanged=!1;var r=Math.max(0,n+3),i=Math.max(0,t.sizer.offsetLeft+r+ta-t.scroller.clientWidth);t.sizer.style.minWidth=r+"px",i<e.doc.scrollLeft&&Lt(e,Math.min(t.scroller.scrollLeft,i),!0)}function M(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-ta)+"px"}function T(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function _(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,o=t.view[r];if(!o.hidden){if(Pi){var a=o.node.offsetTop+o.node.offsetHeight;i=a-n,n=a}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var l=o.line.height-i;if(2>i&&(i=Be(t)),(l>.001||-.001>l)&&(kr(o.line,i),$(o.line),o.rest))for(var u=0;u<o.rest.length;u++)$(o.rest[u])}}}function $(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function L(e){for(var t=e.display,n={},r={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)n[e.options.gutters[o]]=i.offsetLeft,r[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:x(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function D(e,t,n){function r(t){var n=t.nextSibling;return Vi&&Qi&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild,l=i.view,u=i.viewFrom,c=0;c<l.length;c++){var d=l[c];if(d.hidden);else if(d.node){for(;s!=d.node;)s=r(s);var f=o&&null!=t&&u>=t&&d.lineNumber;d.changes&&(ti(d.changes,"gutter")>-1&&(f=!1),E(e,d,u,n)),f&&(ci(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(w(e.options,u)))),s=d.node.nextSibling}else{var h=F(e,d,u,n);a.insertBefore(h,s)}u+=d.size}for(;s;)s=r(s)}function E(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?N(e,t):"gutter"==o?z(e,t,n,r):"class"==o?H(t):"widget"==o&&P(t,r)}t.changes=null}function O(e){return e.node==e.text&&(e.node=ui("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Pi&&(e.node.style.zIndex=2)),e.node}function A(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=O(e);e.background=n.insertBefore(ui("div",null,t),n.firstChild)}}function I(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):ar(e,t)}function N(e,t){var n=t.text.className,r=I(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,H(t)):n&&(t.text.className=n)}function H(e){A(e),e.line.wrapClass?O(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function z(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=O(t),a=t.gutter=o.insertBefore(ui("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),t.text);if(!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(ui("div",w(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],u=i.hasOwnProperty(l)&&i[l];u&&a.appendChild(ui("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function P(e,t){e.alignable&&(e.alignable=null);for(var n,r=e.node.firstChild;r;r=n){var n=r.nextSibling;"CodeMirror-linewidget"==r.className&&e.node.removeChild(r)}W(e,t)}function F(e,t,n,r){var i=I(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),H(t),z(e,t,n,r),W(t,r),t.node}function W(e,t){if(Y(e.line,e,t,!0),e.rest)for(var n=0;n<e.rest.length;n++)Y(e.rest[n],e,t,!1)}function Y(e,t,n,r){if(e.widgets)for(var i=O(t),o=0,a=e.widgets;o<a.length;++o){var s=a[o],l=ui("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(l.ignoreEvents=!0),j(s,l,t,n),r&&s.above?i.insertBefore(l,t.gutter||t.text):i.appendChild(l),Rr(s,"redraw")}}function j(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function V(e){return ao(e.line,e.ch)}function U(e,t){return so(e,t)<0?t:e}function R(e,t){return so(e,t)<0?e:t}function B(e,t){this.ranges=e,this.primIndex=t}function G(e,t){this.anchor=e,this.head=t}function q(e,t){var n=e[t];e.sort(function(e,t){return so(e.from(),t.from())}),t=ti(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(so(o.to(),i.from())>=0){var a=R(o.from(),i.from()),s=U(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;t>=r&&--t,e.splice(--r,2,new G(l?s:a,l?a:s))}}return new B(e,t)}function X(e,t){return new B([new G(e,t||e)],0)}function K(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Z(e,t){if(t.line<e.first)return ao(e.first,0);var n=e.first+e.size-1;return t.line>n?ao(n,yr(e,n).text.length):J(t,yr(e,t.line).text.length)}function J(e,t){var n=e.ch;return null==n||n>t?ao(e.line,t):0>n?ao(e.line,0):e}function Q(e,t){return t>=e.first&&t<e.first+e.size}function ee(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Z(e,t[r]);return n}function te(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var o=so(n,i)<0;o!=so(r,i)<0?(i=n,n=r):o!=so(n,r)<0&&(n=r)}return new G(i,n)}return new G(r||n,n)}function ne(e,t,n,r){le(e,new B([te(e,e.sel.primary(),t,n)],0),r)}function re(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=te(e,e.sel.ranges[i],t[i],null);le(e,q(r,e.sel.primIndex),n)}function ie(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,le(e,q(i,e.sel.primIndex),r)}function oe(e,t,n,r){le(e,X(t,n),r)}function ae(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new G(Z(e,t[n].anchor),Z(e,t[n].head))}};return Qo(e,"beforeSelectionChange",e,n),e.cm&&Qo(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?q(n.ranges,n.ranges.length-1):t}function se(e,t,n){var r=e.history.done,i=ei(r);i&&i.ranges?(r[r.length-1]=t,ue(e,t,n)):le(e,t,n)}function le(e,t,n){ue(e,t,n),Ar(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function ue(e,t,n){(Xr(e,"beforeSelectionChange")||e.cm&&Xr(e.cm,"beforeSelectionChange"))&&(t=ae(e,t)),ce(e,fe(e,t,n&&n.bias||(so(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||sn(e.cm)}function ce(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,qr(e.cm)),Rr(e,"cursorActivity",e))}function de(e){ce(e,fe(e,e.sel,null,!1),ra)}function fe(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=he(e,a.anchor,n,r),l=he(e,a.head,n,r);(i||s!=a.anchor||l!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new G(s,l))}return i?q(i,t.primIndex):t}function he(e,t,n,r){var i=!1,o=t,a=n||1;e.cantEdit=!1;e:for(;;){var s=yr(e,o.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var u=s.markedSpans[l],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(r&&(Qo(c,"beforeCursorEnter"),c.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!c.atomic)continue;var d=c.find(0>a?-1:1);if(0==so(d,o)&&(d.ch+=a,d.ch<0?d=d.line>e.first?Z(e,ao(d.line-1)):null:d.ch>s.text.length&&(d=d.line<e.first+e.size-1?ao(d.line+1,0):null),!d)){if(i)return r?(e.cantEdit=!0,ao(e.first,0)):he(e,t,n,!0);i=!0,d=t,a=-a}o=d;continue e}}return o}}function pe(e){for(var t=e.display,n=e.doc,r=document.createDocumentFragment(),i=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++){var a=n.sel.ranges[o],s=a.empty();(s||e.options.showCursorWhenSelecting)&&me(e,a,r),s||ge(e,a,i)}if(e.options.moveInputWithCursor){var l=Ye(e,n.sel.primary().head,"div"),u=t.wrapper.getBoundingClientRect(),c=t.lineDiv.getBoundingClientRect(),d=Math.max(0,Math.min(t.wrapper.clientHeight-10,l.top+c.top-u.top)),f=Math.max(0,Math.min(t.wrapper.clientWidth-10,l.left+c.left-u.left));t.inputDiv.style.top=d+"px",t.inputDiv.style.left=f+"px"}di(t.cursorDiv,r),di(t.selectionDiv,i)}function me(e,t,n){var r=Ye(e,t.head,"div"),i=n.appendChild(ui("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(ui("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function ge(e,t,n){function r(e,t,n,r){0>t&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(ui("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?c-e:n)+"px; height: "+(r-t)+"px"))}function i(t,n,i){function o(n,r){return We(e,ao(t,n),"div",d,r)}var s,l,d=yr(a,t),f=d.text.length;return Si(Tr(d),n||0,null==i?f:i,function(e,t,a){var d,h,p,m=o(e,"left");if(e==t)d=m,h=p=m.left;else{if(d=o(t-1,"right"),"rtl"==a){var g=m;m=d,d=g}h=m.left,p=d.right}null==n&&0==e&&(h=u),d.top-m.top>3&&(r(h,m.top,null,m.bottom),h=u,m.bottom<d.top&&r(h,m.bottom,null,d.top)),null==i&&t==f&&(p=c),(!s||m.top<s.top||m.top==s.top&&m.left<s.left)&&(s=m),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),u+1>h&&(h=u),r(h,d.top,p-h,d.bottom)}),{start:s,end:l}}var o=e.display,a=e.doc,s=document.createDocumentFragment(),l=Se(e.display),u=l.left,c=o.lineSpace.offsetWidth-l.right,d=t.from(),f=t.to();if(d.line==f.line)i(d.line,d.ch,f.ch);else{var h=yr(a,d.line),p=yr(a,f.line),m=Yn(h)==Yn(p),g=i(d.line,d.ch,m?h.text.length+1:null).end,v=i(f.line,m?0:null,f.ch).start;m&&(g.top<v.top-2?(r(g.right,g.top,null,g.bottom),r(u,v.top,v.left,v.bottom)):r(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&r(u,g.bottom,null,v.top)}n.appendChild(s)}function ve(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0&&(t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate))}}function be(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,oi(ye,e))}function ye(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=$o(t.mode,xe(e,t.frontier));Ke(e,function(){t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(i){if(t.frontier>=e.display.viewFrom){var o=i.styles,a=nr(e,i,r,!0);i.styles=a.styles,a.classes?i.styleClasses=a.classes:i.styleClasses&&(i.styleClasses=null);for(var s=!o||o.length!=i.styles.length,l=0;!s&&l<o.length;++l)s=o[l]!=i.styles[l];s&&rt(e,t.frontier,"text"),i.stateAfter=$o(t.mode,r)}else ir(e,i.text,r),i.stateAfter=0==t.frontier%5?$o(t.mode,r):null;return++t.frontier,+new Date>n?(be(e,e.options.workDelay),!0):void 0})})}}function we(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=yr(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var u=aa(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=s-1,r=u)}return i}function xe(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=we(e,t,n),a=o>r.first&&yr(r,o-1).stateAfter;return a=a?$o(r.mode,a):Lo(r.mode),r.iter(o,t,function(n){ir(e,n.text,a);var s=o==t-1||0==o%5||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=s?$o(r.mode,a):null,++o}),n&&(r.frontier=o),a}function ke(e){return e.lineSpace.offsetTop}function Ce(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Se(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=di(e.measure,ui("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Me(e,t,n){var r=e.options.lineWrapping,i=r&&e.display.scroller.clientWidth;if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Te(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(Cr(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function _e(e,t){t=Yn(t);var n=Cr(t),r=e.display.externalMeasured=new et(e.doc,t,n);r.lineN=n;var i=r.built=ar(e,r);return r.text=i.pre,di(e.display.lineMeasure,i.pre),r}function $e(e,t,n,r){return Ee(e,De(e,t),n,r)}function Le(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ot(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function De(e,t){var n=Cr(t),r=Le(e,n);r&&!r.text?r=null:r&&r.changes&&E(e,r,n,L(e)),r||(r=_e(e,t));var i=Te(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ee(e,t,n,r){t.before&&(n=-1);var i,o=n+(r||"");return t.cache.hasOwnProperty(o)?i=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Me(e,t.view,t.rect),t.hasHeights=!0),i=Oe(e,t,n,r),i.bogus||(t.cache[o]=i)),{left:i.left,right:i.right,top:i.top,bottom:i.bottom}}function Oe(e,t,n,r){for(var i,o,a,s,l=t.map,u=0;u<l.length;u+=3){var c=l[u],d=l[u+1];if(c>n?(o=0,a=1,s="left"):d>n?(o=n-c,a=o+1):(u==l.length-3||n==d&&l[u+3]>n)&&(a=d-c,o=a-1,n>=d&&(s="right")),null!=o){if(i=l[u+2],c==d&&r==(i.insertLeft?"left":"right")&&(s=r),"left"==r&&0==o)for(;u&&l[u-2]==l[u-3]&&l[u-1].insertLeft;)i=l[2+(u-=3)],s="left";if("right"==r&&o==d-c)for(;u<l.length-3&&l[u+3]==l[u+4]&&!l[u+5].insertLeft;)i=l[(u+=3)+2],s="right";break}}var f;if(3==i.nodeType){for(;o&&li(t.line.text.charAt(c+o));)--o;for(;d>c+a&&li(t.line.text.charAt(c+a));)++a;if(Fi&&0==o&&a==d-c)f=i.parentNode.getBoundingClientRect();else if(ji&&e.options.lineWrapping){var h=ua(i,o,a).getClientRects();f=h.length?h["right"==r?h.length-1:0]:fo}else f=ua(i,o,a).getBoundingClientRect()||fo}else{o>0&&(s=r="right");var h;f=e.options.lineWrapping&&(h=i.getClientRects()).length>1?h["right"==r?h.length-1:0]:i.getBoundingClientRect()}if(Fi&&!o&&(!f||!f.left&&!f.right)){var p=i.parentNode.getClientRects()[0];f=p?{left:p.left,right:p.left+Ge(e.display),top:p.top,bottom:p.bottom}:fo}for(var m,g=(f.bottom+f.top)/2-t.rect.top,v=t.view.measure.heights,u=0;u<v.length-1&&!(g<v[u]);u++);m=u?v[u-1]:0,g=v[u];var b={left:("right"==s?f.right:f.left)-t.rect.left,right:("left"==s?f.left:f.right)-t.rect.left,top:m,bottom:g};return f.left||f.right||(b.bogus=!0),b}function Ae(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ie(e){e.display.externalMeasure=null,ci(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ae(e.display.view[t])}function Ne(e){Ie(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function He(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ze(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Pe(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=qn(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Mr(t);if("local"==r?a+=ke(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:ze());var l=s.left+("window"==r?0:He());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Fe(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=He(),i-=ze();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function We(e,t,n,r,i){return r||(r=yr(e.doc,t.line)),Pe(e,r,$e(e,r,t.ch,i),n)}function Ye(e,t,n,r,i){function o(t,o){var a=Ee(e,i,t,o?"right":"left");return o?a.left=a.right:a.right=a.left,Pe(e,r,a,n)}function a(e,t){var n=s[t],r=n.level%2;return e==Mi(n)&&t&&n.level<s[t-1].level?(n=s[--t],e=Ti(n)-(n.level%2?0:1),r=!0):e==Ti(n)&&t<s.length-1&&n.level<s[t+1].level&&(n=s[++t],e=Mi(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?o(e-1):o(e,r)}r=r||yr(e.doc,t.line),i||(i=De(e,r));var s=Tr(r),l=t.ch;if(!s)return o(l);var u=Oi(s,l),c=a(l,u);return null!=ka&&(c.other=a(l,ka)),c}function je(e,t){var n=0,t=Z(e.doc,t);e.options.lineWrapping||(n=Ge(e.display)*t.ch);var r=yr(e.doc,t.line),i=Mr(r)+ke(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Ve(e,t,n,r){var i=ao(e,t);return i.xRel=r,n&&(i.outside=!0),i}function Ue(e,t,n){var r=e.doc;if(0>(n+=e.display.viewOffset))return Ve(r.first,0,!0,-1);var i=Sr(r,n),o=r.first+r.size-1;if(i>o)return Ve(r.first+r.size-1,yr(r,o).text.length,!0,1);0>t&&(t=0);for(var a=yr(r,i);;){var s=Re(e,a,i,t,n),l=Fn(a),u=l&&l.find(0,!0);if(!l||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=Cr(a=u.to.line)}}function Re(e,t,n,r,i){function o(r){var i=Ye(e,ao(n,r),"line",t,u);return s=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(s=!1,i.left)}var a=i-Mr(t),s=!1,l=2*e.display.wrapper.clientWidth,u=De(e,t),c=Tr(t),d=t.text.length,f=_i(t),h=$i(t),p=o(f),m=s,g=o(h),v=s;if(r>g)return Ve(n,h,v,1);for(;;){if(c?h==f||h==Ii(t,f,1):1>=h-f){for(var b=p>r||g-r>=r-p?f:h,y=r-(b==f?p:g);li(t.text.charAt(b));)++b;return Ve(n,b,b==f?m:v,-1>y?-1:y>1?1:0)}var w=Math.ceil(d/2),x=f+w;if(c){x=f;for(var k=0;w>k;++k)x=Ii(t,x,1)}var C=o(x);C>r?(h=x,g=C,(v=s)&&(g+=1e3),d=w):(f=x,p=C,m=s,d-=w)}}function Be(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==lo){lo=ui("pre");for(var t=0;49>t;++t)lo.appendChild(document.createTextNode("x")),lo.appendChild(ui("br"));lo.appendChild(document.createTextNode("x"))}di(e.measure,lo);var n=lo.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ci(e.measure),n||1}function Ge(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=ui("span","xxxxxxxxxx"),n=ui("pre",[t]);di(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function qe(e){e.curOp={viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++ho},ea++||(Go=[])}function Xe(e){var t=e.curOp,n=e.doc,r=e.display;if(e.curOp=null,t.updateMaxLine&&h(e),t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<r.viewFrom||t.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&e.options.lineWrapping){var i=k(e,{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate);e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)}
if(!i&&t.selectionChanged&&pe(e),i||t.startHeight==e.doc.height||g(e),null==r.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=t.scrollTop&&r.scroller.scrollTop!=t.scrollTop){var o=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,t.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=o}if(null!=t.scrollLeft&&r.scroller.scrollLeft!=t.scrollLeft){var a=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,t.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=a,b(e)}if(t.scrollToPos){var s=nn(e,Z(e.doc,t.scrollToPos.from),Z(e.doc,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&tn(e,s)}t.selectionChanged&&ve(e),e.state.focused&&t.updateInput&&ft(e,t.typing);var l=t.maybeHiddenMarkers,u=t.maybeUnhiddenMarkers;if(l)for(var c=0;c<l.length;++c)l[c].lines.length||Qo(l[c],"hide");if(u)for(var c=0;c<u.length;++c)u[c].lines.length&&Qo(u[c],"unhide");var d;if(--ea||(d=Go,Go=null),t.changeObjs&&Qo(e,"changes",e,t.changeObjs),d)for(var c=0;c<d.length;++c)d[c]();if(t.cursorActivityHandlers)for(var c=0;c<t.cursorActivityHandlers.length;c++)t.cursorActivityHandlers[c](e)}function Ke(e,t){if(e.curOp)return t();qe(e);try{return t()}finally{Xe(e)}}function Ze(e,t){return function(){if(e.curOp)return t.apply(e,arguments);qe(e);try{return t.apply(e,arguments)}finally{Xe(e)}}}function Je(e){return function(){if(this.curOp)return e.apply(this,arguments);qe(this);try{return e.apply(this,arguments)}finally{Xe(this)}}}function Qe(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);qe(t);try{return e.apply(this,arguments)}finally{Xe(t)}}}function et(e,t,n){this.line=t,this.rest=jn(t),this.size=this.rest?Cr(ei(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Rn(e,t)}function tt(e,t,n){for(var r,i=[],o=t;n>o;o=r){var a=new et(e.doc,yr(e.doc,o),o);r=o+a.size,i.push(a)}return i}function nt(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)oo&&Vn(e.doc,t)<i.viewTo&&it(e);else if(n<=i.viewFrom)oo&&Un(e.doc,n+r)>i.viewFrom?it(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)it(e);else if(t<=i.viewFrom){var o=at(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):it(e)}else if(n>=i.viewTo){var o=at(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):it(e)}else{var a=at(e,t,t,-1),s=at(e,n,n+r,1);a&&s?(i.view=i.view.slice(0,a.index).concat(tt(e,a.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):it(e)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:t<l.lineN+l.size&&(i.externalMeasured=null))}function rt(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[ot(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==ti(a,n)&&a.push(n)}}}function it(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ot(e,t){if(t>=e.display.viewTo)return null;if(0>(t-=e.display.viewFrom))return null;for(var n=e.display.view,r=0;r<n.length;r++)if(0>(t-=n[r].size))return r}function at(e,t,n,r){var i,o=ot(e,t),a=e.display.view;if(!oo||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=0,l=e.display.viewFrom;o>s;s++)l+=a[s].size;if(l!=t){if(r>0){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,n+=i}for(;Vn(e.doc,n)!=n;){if(o==(0>r?0:a.length-1))return null;n+=r*a[o-(0>r?1:0)].size,o+=r}return{index:o,lineN:n}}function st(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=tt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=tt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(ot(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(tt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ot(e,n)))),r.viewTo=n}function lt(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ut(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){dt(e),e.state.focused&&ut(e)})}function ct(e){function t(){dt(e)||n?(e.display.pollingFast=!1,ut(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function dt(e){var t=e.display.input,n=e.display.prevInput,r=e.doc;if(!e.state.focused||ya(t)&&!n||mt(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(ji&&!Fi&&e.display.inputHasSelection===i)return ft(e),!1;var o=!e.curOp;o&&qe(e),e.display.shift=!1,8203!=i.charCodeAt(0)||r.sel!=e.display.selForContextMenu||n||(n="​");for(var a=0,s=Math.min(n.length,i.length);s>a&&n.charCodeAt(a)==i.charCodeAt(a);)++a;for(var l=i.slice(a),u=ba(l),c=e.state.pasteIncoming&&u.length>1&&r.sel.ranges.length==u.length,d=r.sel.ranges.length-1;d>=0;d--){var f=r.sel.ranges[d],h=f.from(),p=f.to();a<n.length?h=ao(h.line,h.ch-(n.length-a)):e.state.overwrite&&f.empty()&&!e.state.pasteIncoming&&(p=ao(p.line,Math.min(yr(r,p.line).text.length,p.ch+ei(u).length)));var m=e.curOp.updateInput,g={from:h,to:p,text:c?[u[d]]:u,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(qt(e.doc,g),Rr(e,"inputRead",e,g),l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&f.head.ch<100&&(!d||r.sel.ranges[d-1].head.line!=f.head.line)){var v=e.getModeAt(f.head);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(l.indexOf(v.electricChars.charAt(b))>-1){un(e,f.head.line,"smart");break}}else if(v.electricInput){var y=yo(g);v.electricInput.test(yr(r,y.line).text.slice(0,y.ch))&&un(e,f.head.line,"smart")}}}return sn(e),e.curOp.updateInput=m,e.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=i,o&&Xe(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function ft(e,t){var n,r,i=e.doc;if(e.somethingSelected()){e.display.prevInput="";var o=i.sel.primary();n=wa&&(o.to().line-o.from().line>100||(r=e.getSelection()).length>1e3);var a=n?"-":r||e.getSelection();e.display.input.value=a,e.state.focused&&la(e.display.input),ji&&!Fi&&(e.display.inputHasSelection=a)}else t||(e.display.prevInput=e.display.input.value="",ji&&!Fi&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=n}function ht(e){"nocursor"==e.options.readOnly||Ji&&hi()==e.display.input||e.display.input.focus()}function pt(e){e.state.focused||(ht(e),Ft(e))}function mt(e){return e.options.readOnly||e.doc.cantEdit}function gt(e){function t(){e.state.focused&&setTimeout(oi(ht,e),0)}function n(t){Gr(e,t)||Ko(t)}function r(t){if(e.somethingSelected())i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=e.getSelection(),la(i.input));else{for(var n="",r=[],o=0;o<e.doc.sel.ranges.length;o++){var a=e.doc.sel.ranges[o].head.line,s={anchor:ao(a,0),head:ao(a+1,0)};r.push(s),n+=e.getRange(s.anchor,s.head)}"cut"==t.type?e.setSelections(r,null,ra):(i.prevInput="",i.input.value=n,la(i.input))}"cut"==t.type&&(e.state.cutIncoming=!0)}var i=e.display;Zo(i.scroller,"mousedown",Ze(e,wt)),zi?Zo(i.scroller,"dblclick",Ze(e,function(t){if(!Gr(e,t)){var n=yt(e,t);if(n&&!Mt(e,t)&&!bt(e.display,t)){qo(t);var r=pn(e,n);ne(e.doc,r.anchor,r.head)}}})):Zo(i.scroller,"dblclick",function(t){Gr(e,t)||qo(t)}),Zo(i.lineSpace,"selectstart",function(e){bt(i,e)||qo(e)}),ro||Zo(i.scroller,"contextmenu",function(t){Yt(e,t)}),Zo(i.scroller,"scroll",function(){i.scroller.clientHeight&&($t(e,i.scroller.scrollTop),Lt(e,i.scroller.scrollLeft,!0),Qo(e,"scroll",e))}),Zo(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&$t(e,i.scrollbarV.scrollTop)}),Zo(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&Lt(e,i.scrollbarH.scrollLeft)}),Zo(i.scroller,"mousewheel",function(t){Dt(e,t)}),Zo(i.scroller,"DOMMouseScroll",function(t){Dt(e,t)}),Zo(i.scrollbarH,"mousedown",t),Zo(i.scrollbarV,"mousedown",t),Zo(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),Zo(i.input,"keyup",Ze(e,zt)),Zo(i.input,"input",function(){ji&&!Fi&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),ct(e)}),Zo(i.input,"keydown",Ze(e,Nt)),Zo(i.input,"keypress",Ze(e,Pt)),Zo(i.input,"focus",oi(Ft,e)),Zo(i.input,"blur",oi(Wt,e)),e.options.dragDrop&&(Zo(i.scroller,"dragstart",function(t){_t(e,t)}),Zo(i.scroller,"dragenter",n),Zo(i.scroller,"dragover",n),Zo(i.scroller,"drop",Ze(e,Tt))),Zo(i.scroller,"paste",function(t){bt(i,t)||(e.state.pasteIncoming=!0,ht(e),ct(e))}),Zo(i.input,"paste",function(){if(Vi&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=i.input.selectionStart,n=i.input.selectionEnd;i.input.value+="$",i.input.selectionStart=t,i.input.selectionEnd=n,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,ct(e)}),Zo(i.input,"cut",r),Zo(i.input,"copy",r),qi&&Zo(i.sizer,"mouseup",function(){hi()==i.input&&i.input.blur(),ht(e)})}function vt(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function bt(e,t){for(var n=Vr(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function yt(e,t,n,r){var i=e.display;if(!n){var o=Vr(t);if(o==i.scrollbarH||o==i.scrollbarV||o==i.scrollbarFiller||o==i.gutterFiller)return null}var a,s,l=i.lineSpace.getBoundingClientRect();try{a=t.clientX-l.left,s=t.clientY-l.top}catch(t){return null}var u,c=Ue(e,a,s);if(r&&1==c.xRel&&(u=yr(e.doc,c.line).text).length==c.ch){var d=aa(u,u.length,e.options.tabSize)-u.length;c=ao(c.line,Math.max(0,Math.round((a-Se(e.display).left)/Ge(e.display))-d))}return c}function wt(e){if(!Gr(this,e)){var t=this,n=t.display;if(n.shift=e.shiftKey,bt(n,e))return void(Vi||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Mt(t,e)){var r=yt(t,e);switch(window.focus(),Ur(e)){case 1:r?xt(t,e,r):Vr(e)==n.scroller&&qo(e);break;case 2:Vi&&(t.state.lastMiddleDown=+new Date),r&&ne(t.doc,r),setTimeout(oi(ht,t),20),qo(e);break;case 3:ro&&Yt(t,e)}}}}function xt(e,t,n){setTimeout(oi(pt,e),0);var r,i=+new Date;co&&co.time>i-400&&0==so(co.pos,n)?r="triple":uo&&uo.time>i-400&&0==so(uo.pos,n)?(r="double",co={time:i,pos:n}):(r="single",uo={time:i,pos:n});var o=e.doc.sel,a=Qi?t.metaKey:t.ctrlKey;e.options.dragDrop&&va&&!mt(e)&&"single"==r&&o.contains(n)>-1&&o.somethingSelected()?kt(e,t,n,a):Ct(e,t,n,r,a)}function kt(e,t,n,r){var i=e.display,o=Ze(e,function(a){Vi&&(i.scroller.draggable=!1),e.state.draggingText=!1,Jo(document,"mouseup",o),Jo(i.scroller,"drop",o),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(qo(a),r||ne(e.doc,n),ht(e),zi&&!Fi&&setTimeout(function(){document.body.focus(),ht(e)},20))});Vi&&(i.scroller.draggable=!0),e.state.draggingText=o,i.scroller.dragDrop&&i.scroller.dragDrop(),Zo(document,"mouseup",o),Zo(i.scroller,"drop",o)}function Ct(e,t,n,r,i){function o(t){if(0!=so(m,t))if(m=t,"rect"==r){for(var i=[],o=e.options.tabSize,a=aa(yr(u,n.line).text,n.ch,o),s=aa(yr(u,t.line).text,t.ch,o),l=Math.min(a,s),h=Math.max(a,s),p=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));g>=p;p++){var v=yr(u,p).text,b=Jr(v,l,o);l==h?i.push(new G(ao(p,b),ao(p,b))):v.length>b&&i.push(new G(ao(p,b),ao(p,Jr(v,h,o))))}i.length||i.push(new G(n,n)),le(u,q(f.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=c,w=y.anchor,x=t;if("single"!=r){if("double"==r)var k=pn(e,t);else var k=new G(ao(t.line,0),Z(u,ao(t.line+1,0)));so(k.anchor,w)>0?(x=k.head,w=R(y.from(),k.anchor)):(x=k.anchor,w=U(y.to(),k.head))}var i=f.ranges.slice(0);i[d]=new G(Z(u,w),x),le(u,q(i,d),ia)}}function a(t){var n=++b,i=yt(e,t,!0,"rect"==r);if(i)if(0!=so(i,m)){pt(e),o(i);var s=v(l,u);(i.line>=s.to||i.line<s.from)&&setTimeout(Ze(e,function(){b==n&&a(t)}),150)}else{var c=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;c&&setTimeout(Ze(e,function(){b==n&&(l.scroller.scrollTop+=c,a(t))}),50)}}function s(t){b=1/0,qo(t),ht(e),Jo(document,"mousemove",y),Jo(document,"mouseup",w),u.history.lastSelOrigin=null}var l=e.display,u=e.doc;qo(t);var c,d,f=u.sel;if(i&&!t.shiftKey?(d=u.sel.contains(n),c=d>-1?u.sel.ranges[d]:new G(n,n)):c=u.sel.primary(),t.altKey)r="rect",i||(c=new G(n,n)),n=yt(e,t,!0,!0),d=-1;else if("double"==r){var h=pn(e,n);c=e.display.shift||u.extend?te(u,c,h.anchor,h.head):h}else if("triple"==r){var p=new G(ao(n.line,0),Z(u,ao(n.line+1,0)));c=e.display.shift||u.extend?te(u,c,p.anchor,p.head):p}else c=te(u,c,n);i?d>-1?ie(u,d,c,ia):(d=u.sel.ranges.length,le(u,q(u.sel.ranges.concat([c]),d),{scroll:!1,origin:"*mouse"})):(d=0,le(u,new B([c],0),ia),f=u.sel);var m=n,g=l.wrapper.getBoundingClientRect(),b=0,y=Ze(e,function(e){(ji&&!Wi?e.buttons:Ur(e))?a(e):s(e)}),w=Ze(e,s);Zo(document,"mousemove",y),Zo(document,"mouseup",w)}function St(e,t,n,r,i){try{var o=t.clientX,a=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&qo(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(a>l.bottom||!Xr(e,n))return jr(t);a-=l.top-s.viewOffset;for(var u=0;u<e.options.gutters.length;++u){var c=s.gutters.childNodes[u];if(c&&c.getBoundingClientRect().right>=o){return i(e,n,e,Sr(e.doc,a),e.options.gutters[u],t),jr(t)}}}function Mt(e,t){return St(e,t,"gutterClick",!0,Rr)}function Tt(e){var t=this;if(!Gr(t,e)&&!bt(t.display,e)){qo(e),ji&&(po=+new Date);var n=yt(t,e,!0),r=e.dataTransfer.files;if(n&&!mt(t))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,s=0;i>s;++s)!function(e,r){var s=new FileReader;s.onload=Ze(t,function(){if(o[r]=s.result,++a==i){n=Z(t.doc,n);var e={from:n,to:n,text:ba(o.join("\n")),origin:"paste"};qt(t.doc,e),se(t.doc,X(n,yo(e)))}}),s.readAsText(e)}(r[s],s);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(oi(ht,t),20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(Qi?e.metaKey:e.ctrlKey))var l=t.listSelections();if(ue(t.doc,X(n,n)),l)for(var s=0;s<l.length;++s)en(t.doc,"",l[s].anchor,l[s].head,"drag");t.replaceSelection(o,"around","paste"),ht(t)}}catch(e){}}}}function _t(e,t){if(ji&&(!e.state.draggingText||+new Date-po<100))return void Ko(t);if(!Gr(e,t)&&!bt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!Gi)){var n=ui("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Bi&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Bi&&n.parentNode.removeChild(n)}}function $t(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Hi||k(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Hi&&k(e),be(e,100))}function Lt(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,b(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Dt(e,t){var n=t.wheelDeltaX,r=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==r&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:null==r&&(r=t.wheelDelta);var i=e.display,o=i.scroller;if(n&&o.scrollWidth>o.clientWidth||r&&o.scrollHeight>o.clientHeight){if(r&&Qi&&Vi)e:for(var a=t.target,s=i.view;a!=o;a=a.parentNode)for(var l=0;l<s.length;l++)if(s[l].node==a){e.display.currentWheelTarget=a;break e}if(n&&!Hi&&!Bi&&null!=go)return r&&$t(e,Math.max(0,Math.min(o.scrollTop+r*go,o.scrollHeight-o.clientHeight))),Lt(e,Math.max(0,Math.min(o.scrollLeft+n*go,o.scrollWidth-o.clientWidth))),qo(t),void(i.wheelStartX=null);if(r&&null!=go){var u=r*go,c=e.doc.scrollTop,d=c+i.wrapper.clientHeight;0>u?c=Math.max(0,c+u-50):d=Math.min(e.doc.height,d+u+50),k(e,{top:c,bottom:d})}20>mo&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=n,i.wheelDY=r,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(go=(go*mo+n)/(mo+1),++mo)}},200)):(i.wheelDX+=n,i.wheelDY+=r))}}function Et(e,t,n){if("string"==typeof t&&!(t=Do[t]))return!1;e.display.pollingFast&&dt(e)&&(e.display.pollingFast=!1);var r=e.display.shift,i=!1;try{mt(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=na}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function Ot(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function At(e,t){var n=gn(e.options.keyMap),r=n.auto;clearTimeout(vo),r&&!Ao(t)&&(vo=setTimeout(function(){gn(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,s(e))},50));var i=Io(t,!0),o=!1;if(!i)return!1;var a=Ot(e);return o=t.shiftKey?Oo("Shift-"+i,a,function(t){return Et(e,t,!0)})||Oo(i,a,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?Et(e,t):void 0}):Oo(i,a,function(t){return Et(e,t)}),o&&(qo(t),ve(e),Rr(e,"keyHandled",e,i,t)),o}function It(e,t,n){var r=Oo("'"+n+"'",Ot(e),function(t){return Et(e,t,!0)});return r&&(qo(t),ve(e),Rr(e,"keyHandled",e,"'"+n+"'",t)),r}function Nt(e){var t=this;if(pt(t),!Gr(t,e)){zi&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=At(t,e);Bi&&(bo=r?n:null,!r&&88==n&&!wa&&(Qi?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||Ht(t)}}function Ht(e){function t(e){18!=e.keyCode&&e.altKey||(mi(n,"CodeMirror-crosshair"),Jo(document,"keyup",t),Jo(document,"mouseover",t))}var n=e.display.lineDiv;gi(n,"CodeMirror-crosshair"),Zo(document,"keyup",t),Zo(document,"mouseover",t)}function zt(e){Gr(this,e)||16==e.keyCode&&(this.doc.sel.shift=!1)}function Pt(e){var t=this;if(!Gr(t,e)){var n=e.keyCode,r=e.charCode;if(Bi&&n==bo)return bo=null,void qo(e);if(!(Bi&&(!e.which||e.which<10)||qi)||!At(t,e)){It(t,e,String.fromCharCode(null==r?n:r))||(ji&&!Fi&&(t.display.inputHasSelection=null),ct(t))}}}function Ft(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Qo(e,"focus",e),e.state.focused=!0,gi(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(ft(e),Vi&&setTimeout(oi(ft,e,!0),0))),ut(e),ve(e))}function Wt(e){e.state.focused&&(Qo(e,"blur",e),e.state.focused=!1,mi(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Yt(e,t){function n(){if(null!=i.input.selectionStart){var t=e.somethingSelected(),n=i.input.value="​"+(t?i.input.value:"");i.prevInput=t?"":"​",i.input.selectionStart=1,i.input.selectionEnd=n.length,i.selForContextMenu=e.doc.sel}}function r(){if(i.inputDiv.style.position="relative",i.input.style.cssText=s,Fi&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),ut(e),null!=i.input.selectionStart){(!ji||Fi)&&n();var t=0,r=function(){i.selForContextMenu==e.doc.sel&&0==i.input.selectionStart?Ze(e,Do.selectAll)(e):t++<10?i.detectingSelectAll=setTimeout(r,500):ft(e)};i.detectingSelectAll=setTimeout(r,200)}}if(!Gr(e,t,"contextmenu")){var i=e.display;if(!bt(i,t)&&!jt(e,t)){var o=yt(e,t),a=i.scroller.scrollTop;if(o&&!Bi){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(o)&&Ze(e,le)(e.doc,X(o),ra);var s=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(ji?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ht(e),ft(e),e.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=e.doc.sel,clearTimeout(i.detectingSelectAll),ji&&!Fi&&n(),ro){Ko(t);var l=function(){Jo(window,"mouseup",l),setTimeout(r,20)};Zo(window,"mouseup",l)}else setTimeout(r,50)}}}}function jt(e,t){return!!Xr(e,"gutterContextMenu")&&St(e,t,"gutterContextMenu",!1,Qo)}function Vt(e,t){if(so(e,t.from)<0)return e;if(so(e,t.to)<=0)return yo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=yo(t).ch-t.to.ch),ao(n,r)}function Ut(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new G(Vt(i.anchor,t),Vt(i.head,t)))}return q(n,e.sel.primIndex)}function Rt(e,t,n){return e.line==t.line?ao(n.line,e.ch-t.ch+n.ch):ao(n.line+(e.line-t.line),e.ch)}function Bt(e,t,n){for(var r=[],i=ao(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=Rt(s.from,i,o),u=Rt(yo(s),i,o);if(i=s.to,o=u,"around"==n){var c=e.sel.ranges[a],d=so(c.head,c.anchor)<0;r[a]=new G(d?u:l,d?l:u)}else r[a]=new G(l,l)}return new B(r,e.sel.primIndex)}function Gt(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Z(e,t)),n&&(this.to=Z(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Qo(e,"beforeChange",e,r),e.cm&&Qo(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function qt(e,t,n){if(e.cm){if(!e.cm.curOp)return Ze(e.cm,qt)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Xr(e,"beforeChange")||e.cm&&Xr(e.cm,"beforeChange"))||(t=Gt(e,t,!0))){var r=io&&!n&&En(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Xt(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Xt(e,t)}}function Xt(e,t){if(1!=t.text.length||""!=t.text[0]||0!=so(t.from,t.to)){var n=Ut(e,t);Er(e,t,n,e.cm?e.cm.curOp.id:NaN),Jt(e,t,n,$n(e,t));var r=[];vr(e,function(e,n){n||-1!=ti(r,e.history)||(Yr(e.history,t),r.push(e.history)),Jt(e,t,null,$n(e,t))})}}function Kt(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;r=a.pop(),r.ranges;){if(Ir(r,s),n&&!r.equals(e.sel))return void le(e,r,{clearRedo:!1});o=r}var u=[];Ir(o,s),s.push({changes:u,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var c=Xr(e,"beforeChange")||e.cm&&Xr(e.cm,"beforeChange"),l=r.changes.length-1;l>=0;--l){var d=r.changes[l];if(d.origin=t,c&&!Gt(e,d,!1))return void(a.length=0);u.push($r(e,d));var f=l?Ut(e,d,null):ei(a);Jt(e,d,f,Dn(e,d)),!l&&e.cm&&e.cm.scrollIntoView(d);var h=[];vr(e,function(e,t){t||-1!=ti(h,e.history)||(Yr(e.history,d),h.push(e.history)),Jt(e,d,null,Dn(e,d))})}}}}function Zt(e,t){if(0!=t&&(e.first+=t,e.sel=new B(ni(e.sel.ranges,function(e){return new G(ao(e.anchor.line+t,e.anchor.ch),ao(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){nt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)rt(e.cm,r,"gutter")}}function Jt(e,t,n,r){if(e.cm&&!e.cm.curOp)return Ze(e.cm,Jt)(e,t,n,r);if(t.to.line<e.first)return void Zt(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Zt(e,i),t={from:ao(e.first,0),to:ao(t.to.line+i,t.to.ch),text:[ei(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ao(o,yr(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=wr(e,t.from,t.to),n||(n=Ut(e,t,null)),e.cm?Qt(e.cm,t,r):pr(e,t,r),ue(e,n,ra)}}function Qt(e,t,n){var r=e.doc,i=e.display,a=t.from,s=t.to,l=!1,u=a.line;e.options.lineWrapping||(u=Cr(Yn(yr(r,a.line))),r.iter(u,s.line+1,function(e){return e==i.maxLine?(l=!0,!0):void 0})),r.sel.contains(t.from,t.to)>-1&&qr(e),pr(r,t,n,o(e)),e.options.lineWrapping||(r.iter(u,a.line+t.text.length,function(e){var t=f(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),be(e,400);var c=t.text.length-(s.line-a.line)-1;a.line!=s.line||1!=t.text.length||hr(e.doc,t)?nt(e,a.line,s.line+1,c):rt(e,a.line,"text");var d=Xr(e,"changes"),h=Xr(e,"change");if(h||d){var p={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&Rr(e,"change",e,p),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function en(e,t,n,r,i){if(r||(r=n),so(r,n)<0){var o=r;r=n,n=o}"string"==typeof t&&(t=ba(t)),qt(e,{from:n,to:r,text:t,origin:i})}function tn(e,t){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Ki){var o=ui("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-ke(e.display))+"px; height: "+(t.bottom-t.top+ta)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}function nn(e,t,n,r){for(null==r&&(r=0);;){var i=!1,o=Ye(e,t),a=n&&n!=t?Ye(e,n):o,s=on(e,Math.min(o.left,a.left),Math.min(o.top,a.top)-r,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+r),l=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=s.scrollTop&&($t(e,s.scrollTop),Math.abs(e.doc.scrollTop-l)>1&&(i=!0)),null!=s.scrollLeft&&(Lt(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(i=!0)),!i)return o}}function rn(e,t,n,r,i){var o=on(e,t,n,r,i);null!=o.scrollTop&&$t(e,o.scrollTop),null!=o.scrollLeft&&Lt(e,o.scrollLeft)}function on(e,t,n,r,i){var o=e.display,a=Be(e.display);0>n&&(n=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-ta,u={},c=e.doc.height+Ce(o),d=a>n,f=i>c-a;if(s>n)u.scrollTop=d?0:n;else if(i>s+l){var h=Math.min(n,(f?c:i)-l);h!=s&&(u.scrollTop=h)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=o.scroller.clientWidth-ta;t+=o.gutters.offsetWidth,r+=o.gutters.offsetWidth;var g=o.gutters.offsetWidth,v=g+10>t;return p+g>t||v?(v&&(t=0),u.scrollLeft=Math.max(0,t-10-g)):r>m+p-3&&(u.scrollLeft=r+10-m),u}function an(e,t,n){(null!=t||null!=n)&&ln(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function sn(e){ln(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?ao(t.line,t.ch-1):t,r=ao(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function ln(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=je(e,t.from),r=je(e,t.to),i=on(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function un(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(e.doc.mode.indent?i=xe(e,t):n="prev");var a=e.options.tabSize,s=yr(o,t),l=aa(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&(u=e.doc.mode.indent(i,s.text.slice(c.length),s.text))==na){if(!r)return;n="prev"}}else u=0,n="not";"prev"==n?u=t>o.first?aa(yr(o,t-1).text,null,a):0:"add"==n?u=l+e.options.indentUnit:"subtract"==n?u=l-e.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var d="",f=0;if(e.options.indentWithTabs)for(var h=Math.floor(u/a);h;--h)f+=a,d+="\t";if(u>f&&(d+=Qr(u-f)),d!=c)en(e.doc,d,ao(t,0),ao(t,c.length),"+input");else for(var h=0;h<o.sel.ranges.length;h++){var p=o.sel.ranges[h];if(p.head.line==t&&p.head.ch<c.length){var f=ao(t,c.length);ie(o,h,new G(f,f));break}}s.stateAfter=null}function cn(e,t,n,r){var i=t,o=t,a=e.doc;return"number"==typeof t?o=yr(a,K(a,t)):i=Cr(t),null==i?null:(r(o,i)&&rt(e,i,n),o)}function dn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&so(o.from,ei(r).to)<=0;){var a=r.pop();if(so(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Ke(e,function(){for(var t=r.length-1;t>=0;t--)en(e.doc,"",r[t].from,r[t].to,"+delete");sn(e)})}function fn(e,t,n,r,i){function o(){var t=s+n;return t<e.first||t>=e.first+e.size?d=!1:(s=t,c=yr(e,t))}function a(e){var t=(i?Ii:Ni)(c,l,n,!0);if(null==t){if(e||!o())return d=!1;l=i?(0>n?$i:_i)(c):0>n?c.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,u=n,c=yr(e,s),d=!0;if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var f=null,h="group"==r,p=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>n)||a(!m);m=!1){var g=c.text.charAt(l)||"\n",v=ai(g,p)?"w":h&&"\n"==g?"n":!h||/\s/.test(g)?null:"p";if(!h||m||v||(v="s"),f&&f!=v){0>n&&(n=1,a());break}if(v&&(f=v),n>0&&!a(!m))break}var b=he(e,ao(s,l),u,!0);return d||(b.hitSide=!0),b}function hn(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(s-(0>n?1.5:.5)*Be(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var l=Ue(e,a,i);if(!l.outside)break;if(0>n?0>=i:i>=o.height){l.hitSide=!0;break}i+=5*n}return l}function pn(e,t){var n=e.doc,r=yr(n,t.line).text,i=t.ch,o=t.ch;if(r){var a=e.getHelper(t,"wordChars");(t.xRel<0||o==r.length)&&i?--i:++o;for(var s=r.charAt(i),l=ai(s,a)?function(e){return ai(e,a)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ai(e)};i>0&&l(r.charAt(i-1));)--i;for(;o<r.length&&l(r.charAt(o));)++o}return new G(ao(t.line,i),ao(t.line,o))}function mn(t,n,r,i){e.defaults[t]=n,r&&(xo[t]=i?function(e,t,n){n!=ko&&r(e,t,n)}:r)}function gn(e){return"string"==typeof e?Eo[e]:e}function vn(e,t,n,r,i){if(r&&r.shared)return bn(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Ze(e.cm,vn)(e,t,n,r,i);var o=new Ho(e,i),a=so(t,n);if(r&&ii(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=ui("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Wn(e,t.line,t,n,o)||t.line!=n.line&&Wn(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");oo=!0}o.addToHistory&&Er(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,u=e.cm;if(e.iter(l,n.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&Yn(e)==u.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&kr(e,0),Mn(e,new kn(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Rn(e,t)&&kr(t,0)}),o.clearOnEnter&&Zo(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(io=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++zo,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)nt(u,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var c=t.line;c<=n.line;c++)rt(u,c,"text");o.atomic&&de(u.doc),Rr(u,"markerAdded",u,o)}return o}function bn(e,t,n,r,i){r=ii(r),r.shared=!1;var o=[vn(e,t,n,r,i)],a=o[0],s=r.widgetNode;return vr(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(vn(e,Z(e,t),Z(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=ei(o)}),new Po(o,a)}function yn(e){return e.findMarks(ao(e.first,0),e.clipPos(ao(e.lastLine())),function(e){return e.parent})}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(so(o,a)){var s=vn(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function xn(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];vr(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==ti(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}}}function kn(e,t,n){this.marker=e,this.from=t,this.to=n}function Cn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r
}}function Sn(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Mn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Tn(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new kn(a,o.from,l?null:o.to))}}return r}function _n(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new kn(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}function $n(e,t){var n=Q(e,t.from.line)&&yr(e,t.from.line).markedSpans,r=Q(e,t.to.line)&&yr(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==so(t.from,t.to),s=Tn(n,i,a),l=_n(r,o,a),u=1==t.text.length,c=ei(t.text).length+(u?i:0);if(s)for(var d=0;d<s.length;++d){var f=s[d];if(null==f.to){var h=Cn(l,f.marker);h?u&&(f.to=null==h.to?null:h.to+c):f.to=i}}if(l)for(var d=0;d<l.length;++d){var f=l[d];if(null!=f.to&&(f.to+=c),null==f.from){var h=Cn(s,f.marker);h||(f.from=c,u&&(s||(s=[])).push(f))}else f.from+=c,u&&(s||(s=[])).push(f)}s&&(s=Ln(s)),l&&l!=s&&(l=Ln(l));var p=[s];if(!u){var m,g=t.text.length-2;if(g>0&&s)for(var d=0;d<s.length;++d)null==s[d].to&&(m||(m=[])).push(new kn(s[d].marker,null,null));for(var d=0;g>d;++d)p.push(m);p.push(l)}return p}function Ln(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Dn(e,t){var n=zr(e,t),r=$n(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function En(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=ti(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var u=i[l];if(!(so(u.to,s.from)<0||so(u.from,s.to)>0)){var c=[l,1],d=so(u.from,s.from),f=so(u.to,s.to);(0>d||!a.inclusiveLeft&&!d)&&c.push({from:u.from,to:s.from}),(f>0||!a.inclusiveRight&&!f)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),l+=c.length-1}}return i}function On(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function An(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function In(e){return e.inclusiveLeft?-1:0}function Nn(e){return e.inclusiveRight?1:0}function Hn(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=so(r.from,i.from)||In(e)-In(t);if(o)return-o;var a=so(r.to,i.to)||Nn(e)-Nn(t);return a||t.id-e.id}function zn(e,t){var n,r=oo&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||Hn(n,i.marker)<0)&&(n=i.marker);return n}function Pn(e){return zn(e,!0)}function Fn(e){return zn(e,!1)}function Wn(e,t,n,r,i){var o=yr(e,t),a=oo&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=so(u.from,n)||In(l.marker)-In(i),d=so(u.to,r)||Nn(l.marker)-Nn(i);if(!(c>=0&&0>=d||0>=c&&d>=0)&&(0>=c&&(so(u.to,n)||Nn(l.marker)-In(i))>0||c>=0&&(so(u.from,r)||In(l.marker)-Nn(i))<0))return!0}}}function Yn(e){for(var t;t=Pn(e);)e=t.find(-1,!0).line;return e}function jn(e){for(var t,n;t=Fn(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function Vn(e,t){var n=yr(e,t),r=Yn(n);return n==r?t:Cr(r)}function Un(e,t){if(t>e.lastLine())return t;var n,r=yr(e,t);if(!Rn(e,r))return t;for(;n=Fn(r);)r=n.find(1,!0).line;return Cr(r)+1}function Rn(e,t){var n=oo&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Bn(e,t,r))return!0}}function Bn(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Bn(e,r.line,Cn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Bn(e,t,i))return!0}function Gn(e,t,n){Mr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&an(e,null,n)}function qn(e){return null!=e.height?e.height:(fi(document.body,e.node)||di(e.cm.display.measure,ui("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Xn(e,t,n,r){var i=new Fo(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),cn(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!Rn(e.doc,t)){var r=Mr(t)<e.doc.scrollTop;kr(t,t.height+qn(i)),r&&an(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function Kn(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),On(e),An(e,n);var i=r?r(e):1;i!=e.height&&kr(e,i)}function Zn(e){e.parent=null,On(e)}function Jn(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Qn(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var r=e.innerMode(t,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function er(e,t,n){for(var r=0;10>r;r++){var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function tr(t,n,r,i,o,a,s){var l=r.flattenSpans;null==l&&(l=t.options.flattenSpans);var u,c=0,d=null,f=new No(n,t.options.tabSize);for(""==n&&Jn(Qn(r,i),a);!f.eol();){if(f.pos>t.options.maxHighlightLength?(l=!1,s&&ir(t,n,i,f.pos),f.pos=n.length,u=null):u=Jn(er(r,f,i),a),t.options.addModeClass){var h=e.innerMode(r,i).mode.name;h&&(u="m-"+(u?h+" "+u:h))}l&&d==u||(c<f.start&&o(f.start,d),c=f.start,d=u),f.start=f.pos}for(;c<f.pos;){var p=Math.min(f.pos,c+5e4);o(p,d),c=p}}function nr(e,t,n,r){var i=[e.state.modeGen],o={};tr(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},o,r);for(var a=0;a<e.state.overlays.length;++a){var s=e.state.overlays[a],l=1,u=0;tr(e,t.text,s.mode,!0,function(e,t){for(var n=l;e>u;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,u=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;l>n;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function rr(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=nr(e,t,t.stateAfter=xe(e,Cr(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function ir(e,t,n,r){var i=e.doc.mode,o=new No(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&Qn(i,n);!o.eol()&&o.pos<=e.options.maxHighlightLength;)er(i,o,n),o.start=o.pos}function or(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?jo:Yo;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function ar(e,t){var n=ui("span",null,null,Vi?"padding-right: .1px":null),r={pre:ui("pre",[n]),content:n,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,a=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=lr,(ji||Vi)&&e.getOption("lineWrapping")&&(r.addToken=ur(r.addToken)),Ci(e.display.measure)&&(o=Tr(a))&&(r.addToken=cr(r.addToken,o)),r.map=[],fr(a,r,rr(e,a)),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=vi(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=vi(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(ki(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return Qo(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=vi(r.pre.className,r.textClass||"")),r}function sr(e){var t=ui("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function lr(e,t,n,r,i,o){if(t){var a=e.cm.options.specialChars,s=!1;if(a.test(t))for(var l=document.createDocumentFragment(),u=0;;){a.lastIndex=u;var c=a.exec(t),d=c?c.index-u:t.length-u;if(d){var f=document.createTextNode(t.slice(u,u+d));Fi?l.appendChild(ui("span",[f])):l.appendChild(f),e.map.push(e.pos,e.pos+d,f),e.col+=d,e.pos+=d}if(!c)break;if(u+=d+1,"\t"==c[0]){var h=e.cm.options.tabSize,p=h-e.col%h,f=l.appendChild(ui("span",Qr(p),"cm-tab"));e.col+=p}else{var f=e.cm.options.specialCharPlaceholder(c[0]);Fi?l.appendChild(ui("span",[f])):l.appendChild(f),e.col+=1}e.map.push(e.pos,e.pos+1,f),e.pos++}else{e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),Fi&&(s=!0),e.pos+=t.length}if(n||r||i||s){var m=n||"";r&&(m+=r),i&&(m+=i);var g=ui("span",[l],m);return o&&(g.title=o),e.content.appendChild(g)}e.content.appendChild(l)}}function ur(e){function t(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}return function(n,r,i,o,a,s){e(n,r.replace(/ {3,}/g,t),i,o,a,s)}}function cr(e,t){return function(n,r,i,o,a,s){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,u=l+r.length;;){for(var c=0;c<t.length;c++){var d=t[c];if(d.to>l&&d.from<=l)break}if(d.to>=u)return e(n,r,i,o,a,s);e(n,r.slice(0,d.to-l),i,o,null,s),o=null,r=r.slice(d.to-l),l=d.to}}}function dr(e,t,n,r){var i=!r&&n.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function fr(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,u,c,d,f=i.length,h=0,p=1,m="",g=0;;){if(g==h){s=l=u=c="",d=null,g=1/0;for(var v=[],b=0;b<r.length;++b){var y=r[b],w=y.marker;y.from<=h&&(null==y.to||y.to>h)?(null!=y.to&&g>y.to&&(g=y.to,l=""),w.className&&(s+=" "+w.className),w.startStyle&&y.from==h&&(u+=" "+w.startStyle),w.endStyle&&y.to==g&&(l+=" "+w.endStyle),w.title&&!c&&(c=w.title),w.collapsed&&(!d||Hn(d.marker,w)<0)&&(d=y)):y.from>h&&g>y.from&&(g=y.from),"bookmark"==w.type&&y.from==h&&w.widgetNode&&v.push(w)}if(d&&(d.from||0)==h&&(dr(t,(null==d.to?f+1:d.to)-h,d.marker,null==d.from),null==d.to))return;if(!d&&v.length)for(var b=0;b<v.length;++b)dr(t,0,v[b])}if(h>=f)break;for(var x=Math.min(f,g);;){if(m){var k=h+m.length;if(!d){var C=k>x?m.slice(0,x-h):m;t.addToken(t,C,a?a+s:s,u,h+C.length==g?l:"",c)}if(k>=x){m=m.slice(x-h),h=x;break}h=k,u=""}m=i.slice(o,o=n[p++]),a=or(n[p++],t.cm.options)}}else for(var p=1;p<n.length;p+=2)t.addToken(t,i.slice(o,o=n[p]),or(n[p+1],t.cm.options))}function hr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==ei(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function pr(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){Kn(e,n,i,r),Rr(e,"change",e,t)}var a=t.from,s=t.to,l=t.text,u=yr(e,a.line),c=yr(e,s.line),d=ei(l),f=i(l.length-1),h=s.line-a.line;if(hr(e,t)){for(var p=0,m=[];p<l.length-1;++p)m.push(new Wo(l[p],i(p),r));o(c,c.text,f),h&&e.remove(a.line,h),m.length&&e.insert(a.line,m)}else if(u==c)if(1==l.length)o(u,u.text.slice(0,a.ch)+d+u.text.slice(s.ch),f);else{for(var m=[],p=1;p<l.length-1;++p)m.push(new Wo(l[p],i(p),r));m.push(new Wo(d+u.text.slice(s.ch),f,r)),o(u,u.text.slice(0,a.ch)+l[0],i(0)),e.insert(a.line+1,m)}else if(1==l.length)o(u,u.text.slice(0,a.ch)+l[0]+c.text.slice(s.ch),i(0)),e.remove(a.line+1,h);else{o(u,u.text.slice(0,a.ch)+l[0],i(0)),o(c,d+c.text.slice(s.ch),f);for(var p=1,m=[];p<l.length-1;++p)m.push(new Wo(l[p],i(p),r));h>1&&e.remove(a.line+1,h-1),e.insert(a.line+1,m)}Rr(e,"change",e,t)}function mr(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function gr(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function vr(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;(!n||l)&&(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function br(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,a(e),n(e),e.options.lineWrapping||h(e),e.options.mode=t.modeOption,nt(e)}function yr(e,t){if(0>(t-=e.first)||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(o>t){n=i;break}t-=o}return n.lines[t]}function wr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function xr(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function kr(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Cr(e){if(null==e.parent)return null;for(var t=e.parent,n=ti(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Sr(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(o>t){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var a=e.lines[r],s=a.height;if(s>t)break;t-=s}return n+r}function Mr(e){e=Yn(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var r=0;r<o.children.length;++r){var a=o.children[r];if(a==n)break;t+=a.height}return t}function Tr(e){var t=e.order;return null==t&&(t=e.order=Ca(e.text)),t}function _r(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function $r(e,t){var n={from:V(t.from),to:yo(t),text:wr(e,t.from,t.to)};return Nr(e,n,t.from.line,t.to.line+1),vr(e,function(e){Nr(e,n,t.from.line,t.to.line+1)},!0),n}function Lr(e){for(;e.length;){if(!ei(e).ranges)break;e.pop()}}function Dr(e,t){return t?(Lr(e.done),ei(e.done)):e.done.length&&!ei(e.done).ranges?ei(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),ei(e.done)):void 0}function Er(e,t,n,r){var i=e.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Dr(i,i.lastOp==r))){var s=ei(o.changes);0==so(t.from,t.to)&&0==so(t.from,s.to)?s.to=yo(t):o.changes.push($r(e,t))}else{var l=ei(i.done);for(l&&l.ranges||Ir(e.sel,i.done),o={changes:[$r(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||Qo(e,"historyAdded")}function Or(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ar(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Or(e,o,ei(i.done),t))?i.done[i.done.length-1]=t:Ir(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastOp=n,r&&!1!==r.clearRedo&&Lr(i.undone)}function Ir(e,t){var n=ei(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Nr(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function Hr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function zr(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(Hr(n[r]));return i}function Pr(e,t,n){for(var r=0,i=[];r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?B.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var u,c=a[l];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(u=d.match(/^spans_(\d+)$/))&&ti(t,Number(u[1]))>-1&&(ei(s)[d]=c[d],delete c[d])}}}return i}function Fr(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Wr(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)Fr(o.ranges[s].anchor,t,n,r),Fr(o.ranges[s].head,t,n,r)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(n<l.from.line)l.from=ao(l.from.line+r,l.from.ch),l.to=ao(l.to.line+r,l.to.ch);else if(t<=l.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function Yr(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Wr(e.done,n,r,i),Wr(e.undone,n,r,i)}function jr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Vr(e){return e.target||e.srcElement}function Ur(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Qi&&e.ctrlKey&&1==t&&(t=3),t}function Rr(e,t){var n=e._handlers&&e._handlers[t];if(n){var r=Array.prototype.slice.call(arguments,2);Go||(++ea,Go=[],setTimeout(Br,0));for(var i=0;i<n.length;++i)Go.push(function(e){return function(){e.apply(null,r)}}(n[i]))}}function Br(){--ea;var e=Go;Go=null;for(var t=0;t<e.length;++t)e[t]()}function Gr(e,t,n){return Qo(e,n||t.type,e,t),jr(t)||t.codemirrorIgnore}function qr(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==ti(n,t[r])&&n.push(t[r])}function Xr(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Kr(e){e.prototype.on=function(e,t){Zo(this,e,t)},e.prototype.off=function(e,t){Jo(this,e,t)}}function Zr(){this.id=null}function Jr(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=t)return r}}function Qr(e){for(;sa.length<=e;)sa.push(ei(sa)+" ");return sa[e]}function ei(e){return e[e.length-1]}function ti(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function ni(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function ri(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&ii(t,n),n}function ii(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function oi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ai(e,t){return t?!!(t.source.indexOf("\\w")>-1&&da(e))||t.test(e):da(e)}function si(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function li(e){return e.charCodeAt(0)>=768&&fa.test(e)}function ui(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function ci(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function di(e,t){return ci(e).appendChild(t)}function fi(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function hi(){return document.activeElement}function pi(e){return new RegExp("\\b"+e+"\\b\\s*")}function mi(e,t){var n=pi(t);n.test(e.className)&&(e.className=e.className.replace(n,""))}function gi(e,t){pi(t).test(e.className)||(e.className+=" "+t)}function vi(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!pi(n[r]).test(t)&&(t+=" "+n[r]);return t}function bi(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function yi(){ga||(wi(),ga=!0)}function wi(){var e;Zo(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ha=null,bi(vt)},100))}),Zo(window,"blur",function(){bi(Wt)})}function xi(e){if(null!=ha)return ha;var t=ui("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return di(e,t),t.offsetWidth&&(ha=t.offsetHeight-t.clientHeight),ha||0}function ki(e){if(null==pa){var t=ui("span","​");di(e,ui("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(pa=t.offsetWidth<=1&&t.offsetHeight>2&&!Pi)}return pa?ui("span","​"):ui("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Ci(e){if(null!=ma)return ma;var t=di(e,document.createTextNode("AخA")),n=ua(t,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var r=ua(t,1,2).getBoundingClientRect();return ma=r.right-n.right<3}function Si(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function Mi(e){return e.level%2?e.to:e.from}function Ti(e){return e.level%2?e.from:e.to}function _i(e){var t=Tr(e);return t?Mi(t[0]):0}function $i(e){var t=Tr(e);return t?Ti(ei(t)):e.text.length}function Li(e,t){var n=yr(e.doc,t),r=Yn(n);r!=n&&(t=Cr(r));var i=Tr(r),o=i?i[0].level%2?$i(r):_i(r):0;return ao(t,o)}function Di(e,t){for(var n,r=yr(e.doc,t);n=Fn(r);)r=n.find(1,!0).line,t=null;var i=Tr(r),o=i?i[0].level%2?_i(r):$i(r):r.text.length;return ao(null==t?Cr(r):t,o)}function Ei(e,t,n){var r=e[0].level;return t==r||n!=r&&n>t}function Oi(e,t){ka=null;for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return Ei(e,i.level,e[n].level)?(i.from!=i.to&&(ka=n),r):(i.from!=i.to&&(ka=r),n);n=r}}return n}function Ai(e,t,n,r){if(!r)return t+n;do{t+=n}while(t>0&&li(e.text.charAt(t)));return t}function Ii(e,t,n,r){var i=Tr(e);if(!i)return Ni(e,t,n,r);for(var o=Oi(i,t),a=i[o],s=Ai(e,t,a.level%2?-n:n,r);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return Oi(i,s)==o?s:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(!(a=i[o+=n]))return null;s=n>0==a.level%2?Ai(e,a.to,-1,r):Ai(e,a.from,1,r)}}function Ni(e,t,n,r){var i=t+n;if(r)for(;i>0&&li(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var Hi=/gecko\/\d/i.test(navigator.userAgent),zi=/MSIE \d/.test(navigator.userAgent),Pi=zi&&(null==document.documentMode||document.documentMode<8),Fi=zi&&(null==document.documentMode||document.documentMode<9),Wi=zi&&(null==document.documentMode||document.documentMode<10),Yi=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),ji=zi||Yi,Vi=/WebKit\//.test(navigator.userAgent),Ui=Vi&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Ri=/Chrome\//.test(navigator.userAgent),Bi=/Opera\//.test(navigator.userAgent),Gi=/Apple Computer/.test(navigator.vendor),qi=/KHTML\//.test(navigator.userAgent),Xi=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Ki=/PhantomJS/.test(navigator.userAgent),Zi=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Ji=Zi||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Qi=Zi||/Mac/.test(navigator.platform),eo=/win/i.test(navigator.platform),to=Bi&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);to&&(to=Number(to[1])),to&&to>=15&&(Bi=!1,Vi=!0);var no=Qi&&(Ui||Bi&&(null==to||12.11>to)),ro=Hi||ji&&!Fi,io=!1,oo=!1,ao=e.Pos=function(e,t){return this instanceof ao?(this.line=e,void(this.ch=t)):new ao(e,t)},so=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};B.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=so(n.anchor,r.anchor)||0!=so(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new G(V(this.ranges[t].anchor),V(this.ranges[t].head));return new B(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(so(t,r.from())>=0&&so(e,r.to())<=0)return n}return-1}},G.prototype={from:function(){return R(this.anchor,this.head)},to:function(){return U(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var lo,uo,co,fo={left:0,right:0,top:0,bottom:0},ho=0,po=0,mo=0,go=null;ji?go=-.53:Hi?go=15:Ri?go=-.7:Gi&&(go=-1/3);var vo,bo=null,yo=e.changeEnd=function(e){return e.text?ao(e.from.line+e.text.length-1,ei(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),ht(this),ct(this)},setOption:function(e,t){var n=this.options,r=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,xo.hasOwnProperty(e)&&Ze(this,xo[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||"string"!=typeof t[n]&&t[n].name==e)return t.splice(n,1),!0},addOverlay:Je(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,nt(this)}),removeOverlay:Je(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void nt(this)}}),indentLine:Je(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Q(this.doc,e)&&un(this,e,t,n)}),indentSelection:Je(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(un(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&sn(this));else{var o=Math.max(n,i.from().line),a=i.to();n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=o;n>s;++s)un(this,s,e)}}}),getTokenAt:function(e,t){var n=this.doc;e=Z(n,e);for(var r=xe(this,e.line,t),i=this.doc.mode,o=yr(n,e.line),a=new No(o.text,this.options.tabSize);a.pos<e.ch&&!a.eol();){a.start=a.pos;var s=er(i,a,r)}return{start:a.start,end:a.pos,string:a.current(),type:s||null,state:r}},getTokenTypeAt:function(e){e=Z(this.doc,e);var t,n=rr(this,yr(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("cm-overlay "):-1;return 0>s?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!_o.hasOwnProperty(t))return _o;var r=_o[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=r[i[t][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var o=0;o<r._global.length;o++){var s=r._global[o];s.pred(i,this)&&-1==ti(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=K(n,null==e?n.first+n.size-1:e),xe(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?Z(this.doc,e):e?r.from():r.to(),Ye(this,n,t||"page")},charCoords:function(e,t){return We(this,Z(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Fe(this,e,t||"page"),Ue(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Fe(this,{top:e,left:0},t||"page").top,Sr(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=yr(this.doc,e);return Pe(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Mr(i):0)},defaultTextHeight:function(){return Be(this.display)},defaultCharWidth:function(){return Ge(this.display)},setGutterMarker:Je(function(e,t,n){return cn(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&si(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Je(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,rt(t,r,"gutter"),si(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineClass:Je(function(e,t,n){return cn(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[r]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Je(function(e,t,n){return cn(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Je(function(e,t,n){return Xn(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!Q(this.doc,e))return null;var t=e;if(!(e=yr(this.doc,e)))return null}else{var t=Cr(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=Ye(this,Z(this.doc,e));var a=e.bottom,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&rn(this,s,a,s+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:Je(Nt),triggerOnKeyPress:Je(Pt),triggerOnKeyUp:Je(zt),execCommand:function(e){return Do.hasOwnProperty(e)?Do[e](this):void 0},findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var o=0,a=Z(this.doc,e);t>o&&(a=fn(this.doc,a,i,n,r),!a.hitSide);++o);return a},moveH:Je(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?fn(n.doc,r.head,e,t,n.options.rtlMoveVisually):0>e?r.from():r.to()},oa)}),deleteH:Je(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):dn(this,function(n){var i=fn(r,n.head,e,t,!1);return 0>e?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;0>t&&(i=-1,t=-t);for(var a=0,s=Z(this.doc,e);t>a;++a){var l=Ye(this,s,"div");if(null==o?o=l.left:l.left=o,s=hn(this,l,i,n),s.hitSide)break}return s},moveV:Je(function(e,t){var n=this,r=this.doc,i=[],o=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return 0>e?a.from():a.to();var s=Ye(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=hn(n,s,e,t);return"page"==t&&a==r.sel.primary()&&an(n,null,We(n,l,"div").top-s.top),l},oa),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),toggleOverwrite:function(e){
(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?gi(this.display.cursorDiv,"CodeMirror-overwrite"):mi(this.display.cursorDiv,"CodeMirror-overwrite"),Qo(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return hi()==this.display.input},scrollTo:Je(function(e,t){(null!=e||null!=t)&&ln(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=ta;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Je(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ao(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)ln(this),this.curOp.scrollToPos=e;else{var n=on(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Je(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&Ie(this),this.curOp.forceUpdate=!0,Qo(this,"refresh",this)}),operation:function(e){return Ke(this,e)},refresh:Je(function(){var e=this.display.cachedTextHeight;nt(this),this.curOp.forceUpdate=!0,Ne(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==e||Math.abs(e-Be(this.display))>.5)&&a(this),Qo(this,"refresh",this)}),swapDoc:Je(function(e){var t=this.doc;return t.cm=null,br(this,e),Ne(this),ft(this),this.scrollTo(e.scrollLeft,e.scrollTop),Rr(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Kr(e);var wo=e.defaults={},xo=e.optionHandlers={},ko=e.Init={toString:function(){return"CodeMirror.Init"}};mn("value","",function(e,t){e.setValue(t)},!0),mn("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),mn("indentUnit",2,n,!0),mn("indentWithTabs",!1),mn("smartIndent",!0),mn("tabSize",4,function(e){r(e),Ne(e),nt(e)},!0),mn("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),e.refresh()},!0),mn("specialCharPlaceholder",sr,function(e){e.refresh()},!0),mn("electricChars",!0),mn("rtlMoveVisually",!eo),mn("wholeLineUpdateBefore",!0),mn("theme","default",function(e){l(e),u(e)},!0),mn("keyMap","default",s),mn("extraKeys",null),mn("lineWrapping",!1,i,!0),mn("gutters",[],function(e){p(e.options),u(e)},!0),mn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?x(e.display)+"px":"0",e.refresh()},!0),mn("coverGutterNextToScrollbar",!1,g,!0),mn("lineNumbers",!1,function(e){p(e.options),u(e)},!0),mn("firstLineNumber",1,u,!0),mn("lineNumberFormatter",function(e){return e},u,!0),mn("showCursorWhenSelecting",!1,pe,!0),mn("resetSelectionOnContextMenu",!0),mn("readOnly",!1,function(e,t){"nocursor"==t?(Wt(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||ft(e))}),mn("disableInput",!1,function(e,t){t||ft(e)},!0),mn("dragDrop",!0),mn("cursorBlinkRate",530),mn("cursorScrollMargin",0),mn("cursorHeight",1),mn("workTime",100),mn("workDelay",100),mn("flattenSpans",!0,r,!0),mn("addModeClass",!1,r,!0),mn("pollInterval",100),mn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),mn("historyEventDelay",1250),mn("viewportMargin",10,function(e){e.refresh()},!0),mn("maxHighlightLength",1e4,r,!0),mn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),mn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),mn("autofocus",null);var Co=e.modes={},So=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}Co[t]=n},e.defineMIME=function(e,t){So[e]=t},e.resolveMode=function(t){if("string"==typeof t&&So.hasOwnProperty(t))t=So[t];else if(t&&"string"==typeof t.name&&So.hasOwnProperty(t.name)){var n=So[t.name];"string"==typeof n&&(n={name:n}),t=ri(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=Co[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(Mo.hasOwnProperty(n.name)){var o=Mo[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)i[a]=n.modeProps[a];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Mo=e.modeExtensions={};e.extendMode=function(e,t){ii(t,Mo.hasOwnProperty(e)?Mo[e]:Mo[e]={})},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){Uo.prototype[e]=t},e.defineOption=mn;var To=[];e.defineInitHook=function(e){To.push(e)};var _o=e.helpers={};e.registerHelper=function(t,n,r){_o.hasOwnProperty(t)||(_o[t]=e[t]={_global:[]}),_o[t][n]=r},e.registerGlobalHelper=function(t,n,r,i){e.registerHelper(t,n,i),_o[t]._global.push({pred:r,val:i})};var $o=e.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},Lo=e.startState=function(e,t,n){return!e.startState||e.startState(t,n)};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var Do=e.commands={selectAll:function(e){e.setSelection(ao(e.firstLine(),0),ao(e.lastLine()),ra)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ra)},killLine:function(e){dn(e,function(t){if(t.empty()){var n=yr(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ao(t.head.line+1,0)}:{from:t.head,to:ao(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){dn(e,function(t){return{from:ao(t.from().line,0),to:Z(e.doc,ao(t.to().line+1,0))}})},delLineLeft:function(e){dn(e,function(e){return{from:ao(e.from().line,0),to:e.from()}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(ao(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(ao(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Li(e,t.head.line)},oa)},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){var n=Li(e,t.head.line),r=e.getLineHandle(n.line),i=Tr(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.head.line==n.line&&t.head.ch<=o&&t.head.ch;return ao(n.line,a?0:o)}return n},oa)},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Di(e,t.head.line)},oa)},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},oa)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},oa)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=aa(e.getLine(o.line),o.ch,r);t.push(new Array(r-a%r+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Ke(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=yr(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ao(i.line,i.ch-1)),i.ch>0)i=new ao(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ao(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=yr(e.doc,i.line-1).text;a&&e.replaceRange(o.charAt(0)+"\n"+a.charAt(a.length-1),ao(i.line-1,a.length-1),ao(i.line,1),"+transpose")}n.push(new G(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){Ke(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var r=e.listSelections()[n];e.replaceRange("\n",r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0),sn(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},Eo=e.keyMap={};Eo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Eo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Eo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Eo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Eo.default=Qi?Eo.macDefault:Eo.pcDefault;var Oo=e.lookupKey=function(e,t,n){function r(t){t=gn(t);var i=t[e];if(!1===i)return"stop";if(null!=i&&n(i))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return r(o);for(var a=0;a<o.length;++a){var s=r(o[a]);if(s)return s}return!1}for(var i=0;i<t.length;++i){var o=r(t[i]);if(o)return"stop"!=o}},Ao=e.isModifierKey=function(e){var t=xa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},Io=e.keyName=function(e,t){if(Bi&&34==e.keyCode&&e.char)return!1;var n=xa[e.keyCode];return null!=n&&!e.altGraphKey&&(e.altKey&&(n="Alt-"+n),(no?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(no?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)};e.fromTextArea=function(t,n){function r(){t.value=l.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=hi();n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Zo(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=t.form,a=o.submit;try{var s=o.submit=function(){r(),o.submit=a,o.submit(),o.submit=s}}catch(e){}}t.style.display="none";var l=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return l.save=r,l.getTextArea=function(){return t},l.toTextArea=function(){r(),t.parentNode.removeChild(l.getWrapperElement()),t.style.display="",t.form&&(Jo(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=a))},l};var No=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};No.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=aa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?aa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return aa(this.string,null,this.tabSize)-(this.lineStart?aa(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};return i(this.string.substr(this.pos,e.length))==i(e)?(!1!==t&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Ho=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};Kr(Ho),Ho.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&qe(e),Xr(this,"clear")){var n=this.find();n&&Rr(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Cn(a.markedSpans,this);e&&!this.collapsed?rt(e,Cr(a),"text"):e&&(null!=s.to&&(i=Cr(a)),null!=s.from&&(r=Cr(a))),a.markedSpans=Sn(a.markedSpans,s),null==s.from&&this.collapsed&&!Rn(this.doc,a)&&e&&kr(a,Be(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Yn(this.lines[o]),u=f(l);u>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&nt(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&de(e.doc)),e&&Rr(e,"markerCleared",e,this),t&&Xe(e),this.parent&&this.parent.clear()}},Ho.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],a=Cn(o.markedSpans,this);if(null!=a.from&&(n=ao(t?o:Cr(o),a.from),-1==e))return n;if(null!=a.to&&(r=ao(t?o:Cr(o),a.to),1==e))return r}return n&&{from:n,to:r}},Ho.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&Ke(n,function(){var r=e.line,i=Cr(e.line),o=Le(n,i);if(o&&(Ae(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Rn(t.doc,r)&&null!=t.height){var a=t.height;t.height=null;var s=qn(t)-a;s&&kr(r,r.height+s)}})},Ho.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=ti(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ho.prototype.detachLine=function(e){if(this.lines.splice(ti(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var zo=0,Po=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Kr(Po),Po.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Rr(this,"clear")}},Po.prototype.find=function(e,t){return this.primary.find(e,t)};var Fo=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};Kr(Fo),Fo.prototype.clear=function(){var e=this.cm,t=this.line.widgets,n=this.line,r=Cr(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=qn(this);Ke(e,function(){Gn(e,n,-o),rt(e,r,"widget"),kr(n,Math.max(0,n.height-o))})}},Fo.prototype.changed=function(){var e=this.height,t=this.cm,n=this.line;this.height=null;var r=qn(this)-e;r&&Ke(t,function(){t.curOp.forceUpdate=!0,Gn(t,n,r),kr(n,n.height+r)})};var Wo=e.Line=function(e,t,n){this.text=e,An(this,t),this.height=n?n(this):1};Kr(Wo),Wo.prototype.lineNo=function(){return Cr(this)};var Yo={},jo={};mr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,Zn(i),Rr(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},gr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof mr))){var s=[];this.collapse(s),this.children=[new mr(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>=e){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var a=i.lines.splice(i.lines.length-25,25),s=new mr(a);i.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new gr(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=ti(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new gr(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>e){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var Vo=0,Uo=e.Doc=function(e,t,n){if(!(this instanceof Uo))return new Uo(e,t,n);null==n&&(n=0),gr.call(this,[new mr([new Wo("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=ao(n,0);this.sel=X(r),this.history=new _r(null),this.id=++Vo,this.modeOption=t,"string"==typeof e&&(e=ba(e)),pr(this,{from:r,to:r,text:e}),le(this,X(r),ra)};Uo.prototype=ri(gr.prototype,{constructor:Uo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=xr(this,this.first,this.first+this.size);return!1===e?t:t.join(e||"\n")},setValue:Qe(function(e){var t=ao(this.first,0),n=this.first+this.size-1;qt(this,{from:t,to:ao(n,yr(this,n).text.length),text:ba(e),origin:"setValue"},!0),le(this,X(t))}),replaceRange:function(e,t,n,r){t=Z(this,t),n=n?Z(this,n):t,en(this,e,t,n,r)},getRange:function(e,t,n){var r=wr(this,Z(this,e),Z(this,t));return!1===n?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return Q(this,e)?yr(this,e):void 0},getLineNumber:function(e){return Cr(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=yr(this,e)),Yn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Z(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Qe(function(e,t,n){oe(this,Z(this,"number"==typeof e?ao(e,t||0):e),null,n)}),setSelection:Qe(function(e,t,n){oe(this,Z(this,e),Z(this,t||e),n)}),extendSelection:Qe(function(e,t,n){ne(this,Z(this,e),t&&Z(this,t),n)}),extendSelections:Qe(function(e,t){re(this,ee(this,e))}),extendSelectionsBy:Qe(function(e,t){re(this,ni(this.sel.ranges,e),t)}),setSelections:Qe(function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new G(Z(this,e[r].anchor),Z(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),le(this,q(i,t),n)}}),addSelection:Qe(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new G(Z(this,e),Z(this,t||e))),le(this,q(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=wr(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=wr(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||"\n")),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Qe(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:ba(e[o]),origin:n}}for(var s=t&&"end"!=t&&Bt(this,r,t),o=r.length-1;o>=0;o--)qt(this,r[o]);s?se(this,s):this.cm&&sn(this.cm)}),undo:Qe(function(){Kt(this,"undo")}),redo:Qe(function(){Kt(this,"redo")}),undoSelection:Qe(function(){Kt(this,"undo",!0)}),redoSelection:Qe(function(){Kt(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new _r(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Pr(this.history.done),undone:Pr(this.history.undone)}},setHistory:function(e){var t=this.history=new _r(this.history.maxGeneration);t.done=Pr(e.done.slice(0),null,!0),t.undone=Pr(e.undone.slice(0),null,!0)},markText:function(e,t,n){return vn(this,Z(this,e),Z(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Z(this,e),vn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Z(this,e);var t=[],n=yr(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Z(this,e),t=Z(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];i==e.line&&e.ch>l.to||null==l.from&&i!=e.line||i==t.line&&l.from>t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),Z(this,ao(n,t))},indexFromPos:function(e){e=Z(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Uo(xr(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Uo(xr(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],wn(r,yn(this)),r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),xn(yn(this));break}}if(t.history==this.history){var i=[t.id];vr(t,function(e){i.push(e.id)},!0),t.history=new _r(null),t.history.done=Pr(this.history.done,i),t.history.undone=Pr(this.history.undone,i)}},iterLinkedDocs:function(e){vr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Uo.prototype.eachLine=Uo.prototype.iter;var Ro="iter insert remove copy getEditor".split(" ");for(var Bo in Uo.prototype)Uo.prototype.hasOwnProperty(Bo)&&ti(Ro,Bo)<0&&(e.prototype[Bo]=function(e){return function(){return e.apply(this.doc,arguments)}}(Uo.prototype[Bo]));Kr(Uo);var Go,qo=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Xo=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Ko=e.e_stop=function(e){qo(e),Xo(e)},Zo=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},Jo=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}},Qo=e.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},ea=0,ta=30,na=e.Pass={toString:function(){return"CodeMirror.Pass"}},ra={scroll:!1},ia={origin:"*mouse"},oa={origin:"+move"};Zr.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var aa=e.countColumn=function(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var s=e.indexOf("\t",o);if(0>s||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}},sa=[""],la=function(e){e.select()};Zi?la=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:ji&&(la=function(e){try{e.select()}catch(e){}}),[].indexOf&&(ti=function(e,t){return e.indexOf(t)}),[].map&&(ni=function(e,t){return e.map(t)});var ua,ca=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,da=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ca.test(e))},fa=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;ua=document.createRange?function(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r}:function(e,t,n){var r=document.body.createTextRange();return r.moveToElementText(e.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},zi&&(hi=function(){try{return document.activeElement}catch(e){return document.body}});var ha,pa,ma,ga=!1,va=function(){if(Fi)return!1;var e=ui("div");return"draggable"in e||"dragDrop"in e}(),ba=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},ya=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},wa=function(){var e=ui("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),xa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",
20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=xa,function(){for(var e=0;10>e;e++)xa[e+48]=xa[e+96]=String(e);for(var e=65;90>=e;e++)xa[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)xa[e+111]=xa[e+63235]="F"+e}();var ka,Ca=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?r.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,u="L";return function(n){if(!i.test(n))return!1;for(var r,c=n.length,d=[],f=0;c>f;++f)d.push(r=e(n.charCodeAt(f)));for(var f=0,h=u;c>f;++f){var r=d[f];"m"==r?d[f]=h:h=r}for(var f=0,p=u;c>f;++f){var r=d[f];"1"==r&&"r"==p?d[f]="n":a.test(r)&&(p=r,"r"==r&&(d[f]="R"))}for(var f=1,h=d[0];c-1>f;++f){var r=d[f];"+"==r&&"1"==h&&"1"==d[f+1]?d[f]="1":","!=r||h!=d[f+1]||"1"!=h&&"n"!=h||(d[f]=h),h=r}for(var f=0;c>f;++f){var r=d[f];if(","==r)d[f]="N";else if("%"==r){for(var m=f+1;c>m&&"%"==d[m];++m);for(var g=f&&"!"==d[f-1]||c>m&&"1"==d[m]?"1":"N",v=f;m>v;++v)d[v]=g;f=m-1}}for(var f=0,p=u;c>f;++f){var r=d[f];"L"==p&&"1"==r?d[f]="L":a.test(r)&&(p=r)}for(var f=0;c>f;++f)if(o.test(d[f])){for(var m=f+1;c>m&&o.test(d[m]);++m);for(var b="L"==(f?d[f-1]:u),y="L"==(c>m?d[m]:u),g=b||y?"L":"R",v=f;m>v;++v)d[v]=g;f=m-1}for(var w,x=[],f=0;c>f;)if(s.test(d[f])){var k=f;for(++f;c>f&&s.test(d[f]);++f);x.push(new t(0,k,f))}else{var C=f,S=x.length;for(++f;c>f&&"L"!=d[f];++f);for(var v=C;f>v;)if(l.test(d[v])){v>C&&x.splice(S,0,new t(1,C,v));var M=v;for(++v;f>v&&l.test(d[v]);++v);x.splice(S,0,new t(2,M,v)),C=v}else++v;f>C&&x.splice(S,0,new t(1,C,f))}return 1==x[0].level&&(w=n.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==ei(x).level&&(w=n.match(/\s+$/))&&(ei(x).to-=w[0].length,x.push(new t(0,c-w[0].length,c))),x[0].level!=ei(x).level&&x.push(new t(x[0].level,c,c)),x}}();return e.version="4.2.0",e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}function n(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}function r(e,t){return e.skipTo("--\x3e")?(e.match("--\x3e"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,n){function r(e,t){return h=t,e}function i(e,t){var n=e.next();if(g[n]){var i=g[n](e,t);if(!1!==i)return i}return"@"==n?(e.eatWhile(/[\w\\\-]/),r("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?r(null,"compare"):'"'==n||"'"==n?(t.tokenize=o(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),r("atom","hash")):"!"==n?(e.match(/^\s*\w*/),r("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),r("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?r(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?r("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?r(null,n):"u"==n&&e.match("rl(")?(e.backUp(1),t.tokenize=a,r("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),r("property","word")):r(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),r("number","unit")):e.match(/^\w+-/)?r("meta","meta"):void 0}function o(e){return function(t,n){for(var i,o=!1;null!=(i=t.next());){if(i==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==i}return(i==e||!o&&")"!=e)&&(n.tokenize=null),r("string","string")}}function a(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\')]/,!1)?null:o(")"),r(null,"(")}function s(e,t,n){this.type=e,this.indent=t,this.prev=n}function l(e,t,n){return e.context=new s(n,t.indentation()+m,e.context),n}function u(e){return e.context=e.context.prev,e.context.type}function c(e,t,n){return M[n.context.type](e,t,n)}function d(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return c(e,t,n)}function f(e){var t=e.current().toLowerCase();p=k.hasOwnProperty(t)?"atom":x.hasOwnProperty(t)?"keyword":"variable"}n.propertyKeywords||(n=e.resolveMode("text/css"));var h,p,m=t.indentUnit,g=n.tokenHooks,v=n.mediaTypes||{},b=n.mediaFeatures||{},y=n.propertyKeywords||{},w=n.nonStandardPropertyKeywords||{},x=n.colorKeywords||{},k=n.valueKeywords||{},C=n.fontProperties||{},S=n.allowNested,M={};return M.top=function(e,t,n){if("{"==e)return l(n,t,"block");if("}"==e&&n.context.prev)return u(n);if("@media"==e)return l(n,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(n,t,"at");if("hash"==e)p="builtin";else if("word"==e)p="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(n,t,"interpolation");if(":"==e)return"pseudo";if(S&&"("==e)return l(n,t,"parens")}return n.context.type},M.block=function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return y.hasOwnProperty(r)?(p="property","maybeprop"):w.hasOwnProperty(r)?(p="string-2","maybeprop"):S?(p=t.match(/^\s*:/,!1)?"property":"tag","block"):(p+=" error","maybeprop")}return"meta"==e?"block":S||"hash"!=e&&"qualifier"!=e?M.top(e,t,n):(p="error","block")},M.maybeprop=function(e,t,n){return":"==e?l(n,t,"prop"):c(e,t,n)},M.prop=function(e,t,n){if(";"==e)return u(n);if("{"==e&&S)return l(n,t,"propBlock");if("}"==e||"{"==e)return d(e,t,n);if("("==e)return l(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)f(t);else if("interpolation"==e)return l(n,t,"interpolation")}else p+=" error";return"prop"},M.propBlock=function(e,t,n){return"}"==e?u(n):"word"==e?(p="property","maybeprop"):n.context.type},M.parens=function(e,t,n){return"{"==e||"}"==e?d(e,t,n):")"==e?u(n):"("==e?l(n,t,"parens"):("word"==e&&f(t),"parens")},M.pseudo=function(e,t,n){return"word"==e?(p="variable-3",n.context.type):c(e,t,n)},M.media=function(e,t,n){if("("==e)return l(n,t,"media_parens");if("}"==e)return d(e,t,n);if("{"==e)return u(n)&&l(n,t,S?"block":"top");if("word"==e){var r=t.current().toLowerCase();p="only"==r||"not"==r||"and"==r?"keyword":v.hasOwnProperty(r)?"attribute":b.hasOwnProperty(r)?"property":"error"}return n.context.type},M.media_parens=function(e,t,n){return")"==e?u(n):"{"==e||"}"==e?d(e,t,n,2):M.media(e,t,n)},M.font_face_before=function(e,t,n){return"{"==e?l(n,t,"font_face"):c(e,t,n)},M.font_face=function(e,t,n){return"}"==e?u(n):"word"==e?(p=C.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},M.keyframes=function(e,t,n){return"word"==e?(p="variable","keyframes"):"{"==e?l(n,t,"top"):c(e,t,n)},M.at=function(e,t,n){return";"==e?u(n):"{"==e||"}"==e?d(e,t,n):("word"==e?p="tag":"hash"==e&&(p="builtin"),"at")},M.interpolation=function(e,t,n){return"}"==e?u(n):"{"==e||";"==e?d(e,t,n):("variable"!=e&&(p="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new s("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||i)(e,t);return n&&"object"==typeof n&&(h=n[1],n=n[0]),p=n,t.state=M[t.state](h,e,t),p},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),!n.prev||("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"font_face"!=n.type)&&(")"!=r||"parens"!=n.type&&"media_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"media"!=n.type)||(i=n.indent-m,n=n.prev),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(i),a=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],s=t(a),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],u=t(l),c=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],c=t(c),d=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],f=t(d),h=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],p=t(h),m=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],g=t(m),v=i.concat(a).concat(l).concat(c).concat(d).concat(h);e.registerHelper("hintWords","css",v),e.defineMIME("text/css",{mediaTypes:o,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:c,colorKeywords:f,valueKeywords:p,fontProperties:g,tokenHooks:{"<":function(e,t){return!!e.match("!--")&&(t.tokenize=r,r(e,t))},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=n,n(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:c,colorKeywords:f,valueKeywords:p,fontProperties:g,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:c,colorKeywords:f,valueKeywords:p,fontProperties:g,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},"@":function(e){return!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("htmlmixed",function(t,n){function r(e,t){var n=t.htmlState.tagName,r=s.token(e,t.htmlState);if("script"==n&&/\btag\b/.test(r)&&">"==e.current()){var i=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);(i=i?i[1]:"")&&/[\"\']/.test(i.charAt(0))&&(i=i.slice(1,i.length-1));for(var c=0;c<u.length;++c){var d=u[c];if("string"==typeof d.matches?i==d.matches:d.matches.test(i)){d.mode&&(t.token=o,t.localMode=d.mode,t.localState=d.mode.startState&&d.mode.startState(s.indent(t.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(r)&&">"==e.current()&&(t.token=a,t.localMode=l,t.localState=l.startState(s.indent(t.htmlState,"")));return r}function i(e,t,n){var r=e.current(),i=r.search(t);return i>-1?e.backUp(r.length-i):r.match(/<\/?$/)&&(e.backUp(r.length),e.match(t,!1)||e.match(r)),n}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=r,t.localState=t.localMode=null,r(e,t)):i(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function a(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=r,t.localState=t.localMode=null,r(e,t)):i(e,/<\/\s*style\s*>/,l.token(e,t.localState))}var s=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),l=e.getMode(t,"css"),u=[],c=n&&n.scriptTypes;if(u.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),c)for(var d=0;d<c.length;++d){var f=c[d];u.push({matches:f.matches,mode:f.mode&&e.getMode(t,f.mode)})}return u.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){return{token:r,localMode:null,localState:null,htmlState:s.startState()}},copyState:function(t){if(t.localState)var n=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:n,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n){return!t.localMode||/^\s*<\//.test(n)?s.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,n){function r(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function i(e,t,n){return he=e,pe=n,t}function o(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=a(n),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==n&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if("="==n&&e.eat(">"))return i("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==n)return e.eat("*")?(t.tokenize=s,s(e,t)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(r(e),e.eatWhile(/[gimy]/),i("regexp","string-2")):(e.eatWhile(xe),i("operator","operator",e.current()));if("`"==n)return t.tokenize=l,l(e,t);if("#"==n)return e.skipToEnd(),i("error","error");if(xe.test(n))return e.eatWhile(xe),i("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var o=e.current(),u=we.propertyIsEnumerable(o)&&we[o];return u&&"."!=t.lastType?i(u.type,u.style,o):i("variable","variable",o)}function a(e){return function(t,n){var r,a=!1;if(ve&&"@"==t.peek()&&t.match(ke))return n.tokenize=o,i("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=e||a);)a=!a&&"\\"==r;return a||(n.tokenize=o),i("string","string")}}function s(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=o;break}r="*"==n}return i("comment","comment")}function l(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=o;break}r=!r&&"\\"==n}return i("quasi","string-2",e.current())}function u(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(0>n)){for(var r=0,i=!1,o=n-1;o>=0;--o){var a=e.string.charAt(o),s=Ce.indexOf(a);if(s>=0&&3>s){if(!r){++o;break}if(0==--r)break}else if(s>=3&&6>s)++r;else if(/[$\w]/.test(a))i=!0;else if(i&&!r){++o;break}}i&&!r&&(t.fatArrowAt=o)}}function c(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function f(e,t,n,r,i){var o=e.cc;for(Me.state=e,Me.stream=i,Me.marked=null,Me.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){if((o.length?o.pop():be?k:x)(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Me.marked?Me.marked:"variable"==n&&d(e,r)?"variable-2":t}}}function h(){for(var e=arguments.length-1;e>=0;e--)Me.cc.push(arguments[e])}function p(){return h.apply(null,arguments),!0}function m(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var r=Me.state;if(r.context){if(Me.marked="def",t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function g(){Me.state.context={prev:Me.state.context,vars:Me.state.localVars},Me.state.localVars=Te}function v(){Me.state.localVars=Me.state.context.vars,Me.state.context=Me.state.context.prev}function b(e,t){var n=function(){var n=Me.state,r=n.indented;"stat"==n.lexical.type&&(r=n.lexical.indented),n.lexical=new c(r,Me.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function y(){var e=Me.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(n){return n==e?p():";"==e?h():p(t)}return t}function x(e,t){return"var"==e?p(b("vardef",t.length),V,w(";"),y):"keyword a"==e?p(b("form"),k,x,y):"keyword b"==e?p(b("form"),x,y):"{"==e?p(b("}"),W,y):";"==e?p():"if"==e?("else"==Me.state.lexical.info&&Me.state.cc[Me.state.cc.length-1]==y&&Me.state.cc.pop()(),p(b("form"),k,x,y,q)):"function"==e?p(ee):"for"==e?p(b("form"),X,x,y):"variable"==e?p(b("stat"),A):"switch"==e?p(b("form"),k,b("}","switch"),w("{"),W,y,y):"case"==e?p(k,w(":")):"default"==e?p(w(":")):"catch"==e?p(b("form"),g,w("("),te,w(")"),x,y,v):"module"==e?p(b("form"),g,oe,v,y):"class"==e?p(b("form"),ne,ie,y):"export"==e?p(b("form"),ae,y):"import"==e?p(b("form"),se,y):h(b("stat"),k,w(";"),y)}function k(e){return S(e,!1)}function C(e){return S(e,!0)}function S(e,t){if(Me.state.fatArrowAt==Me.stream.start){var n=t?O:E;if("("==e)return p(g,b(")"),P(U,")"),y,w("=>"),n,v);if("variable"==e)return h(g,U,w("=>"),n,v)}var r=t?$:_;return Se.hasOwnProperty(e)?p(r):"function"==e?p(ee,r):"keyword c"==e?p(t?T:M):"("==e?p(b(")"),M,fe,w(")"),y,r):"operator"==e||"spread"==e?p(t?C:k):"["==e?p(b("]"),ce,y,r):"{"==e?F(N,"}",null,r):"quasi"==e?h(L,r):p()}function M(e){return e.match(/[;\}\)\],]/)?h():h(k)}function T(e){return e.match(/[;\}\)\],]/)?h():h(C)}function _(e,t){return","==e?p(k):$(e,t,!1)}function $(e,t,n){var r=0==n?_:$,i=0==n?k:C;return"=>"==t?p(g,n?O:E,v):"operator"==e?/\+\+|--/.test(t)?p(r):"?"==t?p(k,w(":"),i):p(i):"quasi"==e?h(L,r):";"!=e?"("==e?F(C,")","call",r):"."==e?p(I,r):"["==e?p(b("]"),M,w("]"),y,r):void 0:void 0}function L(e,t){
return"quasi"!=e?h():"${"!=t.slice(t.length-2)?p(L):p(k,D)}function D(e){return"}"==e?(Me.marked="string-2",Me.state.tokenize=l,p(L)):void 0}function E(e){return u(Me.stream,Me.state),h("{"==e?x:k)}function O(e){return u(Me.stream,Me.state),h("{"==e?x:C)}function A(e){return":"==e?p(y,x):h(_,w(";"),y)}function I(e){return"variable"==e?(Me.marked="property",p()):void 0}function N(e,t){if("variable"==e){if(Me.marked="property","get"==t||"set"==t)return p(H)}else if("number"==e||"string"==e)Me.marked=ve?"property":e+" property";else if("["==e)return p(k,w("]"),z);return Se.hasOwnProperty(e)?p(z):void 0}function H(e){return"variable"!=e?h(z):(Me.marked="property",p(ee))}function z(e){return":"==e?p(C):"("==e?h(ee):void 0}function P(e,t){function n(r){if(","==r){var i=Me.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),p(e,n)}return r==t?p():p(w(t))}return function(r){return r==t?p():h(e,n)}}function F(e,t,n){for(var r=3;r<arguments.length;r++)Me.cc.push(arguments[r]);return p(b(t,n),P(e,t),y)}function W(e){return"}"==e?p():h(x,W)}function Y(e){return ye&&":"==e?p(j):void 0}function j(e){return"variable"==e?(Me.marked="variable-3",p()):void 0}function V(){return h(U,Y,B,G)}function U(e,t){return"variable"==e?(m(t),p()):"["==e?F(U,"]"):"{"==e?F(R,"}"):void 0}function R(e,t){return"variable"!=e||Me.stream.match(/^\s*:/,!1)?("variable"==e&&(Me.marked="property"),p(w(":"),U,B)):(m(t),p(B))}function B(e,t){return"="==t?p(C):void 0}function G(e){return","==e?p(V):void 0}function q(e,t){return"keyword b"==e&&"else"==t?p(b("form","else"),x,y):void 0}function X(e){return"("==e?p(b(")"),K,w(")"),y):void 0}function K(e){return"var"==e?p(V,w(";"),J):";"==e?p(J):"variable"==e?p(Z):h(k,w(";"),J)}function Z(e,t){return"in"==t||"of"==t?(Me.marked="keyword",p(k)):p(_,J)}function J(e,t){return";"==e?p(Q):"in"==t||"of"==t?(Me.marked="keyword",p(k)):h(k,w(";"),Q)}function Q(e){")"!=e&&p(k)}function ee(e,t){return"*"==t?(Me.marked="keyword",p(ee)):"variable"==e?(m(t),p(ee)):"("==e?p(g,b(")"),P(te,")"),y,x,v):void 0}function te(e){return"spread"==e?p(te):h(U,Y)}function ne(e,t){return"variable"==e?(m(t),p(re)):void 0}function re(e,t){return"extends"==t?p(k):void 0}function ie(e){return"{"==e?F(N,"}"):void 0}function oe(e,t){return"string"==e?p(x):"variable"==e?(m(t),p(ue)):void 0}function ae(e,t){return"*"==t?(Me.marked="keyword",p(ue,w(";"))):"default"==t?(Me.marked="keyword",p(k,w(";"))):h(x)}function se(e){return"string"==e?p():h(le,ue)}function le(e,t){return"{"==e?F(le,"}"):("variable"==e&&m(t),p())}function ue(e,t){return"from"==t?(Me.marked="keyword",p(k)):void 0}function ce(e){return"]"==e?p():h(C,de)}function de(e){return"for"==e?h(fe,w("]")):","==e?p(P(C,"]")):h(P(C,"]"))}function fe(e){return"for"==e?p(X,fe):"if"==e?p(k,fe):void 0}var he,pe,me=t.indentUnit,ge=n.statementIndent,ve=n.jsonld,be=n.json||ve,ye=n.typescript,we=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},a={if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:r,delete:r,throw:r,debugger:r,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:i,typeof:i,instanceof:i,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),module:e("module"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r};if(ye){var s={type:"variable",style:"variable-3"},l={interface:e("interface"),extends:e("extends"),constructor:e("constructor"),public:e("public"),private:e("private"),protected:e("protected"),static:e("static"),string:s,number:s,bool:s,any:s};for(var u in l)a[u]=l[u]}return a}(),xe=/[+\-*&%=<>!?|~^]/,ke=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ce="([{}])",Se={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Me={state:null,column:null,marked:null,cc:null},Te={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(e){var t={tokenize:o,lastType:"sof",cc:[],lexical:new c((e||0)-me,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),u(e,t)),t.tokenize!=s&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==he?n:(t.lastType="operator"!=he||"++"!=pe&&"--"!=pe?he:"incdec",f(t,n,he,pe,e))},indent:function(t,r){if(t.tokenize==s)return e.Pass;if(t.tokenize!=o)return 0;var i=r&&r.charAt(0),a=t.lexical;if(!/^\s*else\b/.test(r))for(var l=t.cc.length-1;l>=0;--l){var u=t.cc[l];if(u==y)a=a.prev;else if(u!=q)break}"stat"==a.type&&"}"==i&&(a=a.prev),ge&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var c=a.type,d=i==c;return"vardef"==c?a.indented+("operator"==t.lastType||","==t.lastType?a.info+1:0):"form"==c&&"{"==i?a.indented:"form"==c?a.indented+me:"stat"==c?a.indented+("operator"==t.lastType||","==t.lastType?ge||me:0):"switch"!=a.info||d||0==n.doubleIndentSwitch?a.align?a.column+(d?0:1):a.indented+(d?0:me):a.indented+(/^(?:case|default)\b/.test(r)?me:2*me)},electricChars:":{}",blockCommentStart:be?null:"/*",blockCommentEnd:be?null:"*/",lineComment:be?null:"//",fold:"brace",helperType:be?"json":"javascript",jsonldMode:ve,jsonMode:be}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,n){function r(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(s(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta"):(C=e.eat("/")?"closeTag":"openTag",t.tokenize=i,"tag bracket");if("&"==r){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function i(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=r,C=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return C="equals",null;if("<"==n){t.tokenize=r,t.state=d,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=o(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"};return t.isInAttribute=!0,t}function a(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=r;break}n.next()}return e}}function s(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=s(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=r;break}return n.tokenize=s(e-1),n.tokenize(t,n)}}return"meta"}}function l(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(M.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function u(e){e.context&&(e.context=e.context.prev)}function c(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!M.contextGrabbers.hasOwnProperty(n)||!M.contextGrabbers[n].hasOwnProperty(t))return;u(e)}}function d(e,t,n){return"openTag"==e?(n.tagStart=t.column(),f):"closeTag"==e?h:d}function f(e,t,n){return"word"==e?(n.tagName=t.current(),S="tag",g):(S="error",f)}function h(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&M.implicitlyClosed.hasOwnProperty(n.context.tagName)&&u(n),n.context&&n.context.tagName==r?(S="tag",p):(S="tag error",m)}return S="error",m}function p(e,t,n){return"endTag"!=e?(S="error",p):(u(n),d)}function m(e,t,n){return S="error",p(e,t,n)}function g(e,t,n){if("word"==e)return S="attribute",v;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||M.autoSelfClosers.hasOwnProperty(r)?c(n,r):(c(n,r),n.context=new l(n,r,i==n.indented)),d}return S="error",g}function v(e,t,n){return"equals"==e?b:(M.allowMissing||(S="error"),g(e,t,n))}function b(e,t,n){return"string"==e?y:"word"==e&&M.allowUnquoted?(S="string",g):(S="error",g(e,t,n))}function y(e,t,n){return"string"==e?y:g(e,t,n)}var w=t.indentUnit,x=n.multilineTagIndentFactor||1,k=n.multilineTagIndentPastTag;null==k&&(k=!0);var C,S,M=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},T=n.alignCDATA;return{startState:function(){return{tokenize:r,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;C=null;var n=t.tokenize(e,t);return(n||C)&&"comment"!=n&&(S=null,t.state=t.state(C||n,e,t),S&&(n="error"==S?n+" error":S)),n},indent:function(t,n,o){var a=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+w;if(a&&a.noIndent)return e.Pass;if(t.tokenize!=i&&t.tokenize!=r)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return k?t.tagStart+t.tagName.length+2:t.tagStart+w*x;if(T&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;a;){if(a.tagName==s[2]){a=a.prev;break}if(!M.implicitlyClosed.hasOwnProperty(a.tagName))break;a=a.prev}else if(s)for(;a;){var l=M.contextGrabbers[a.tagName];if(!l||!l.hasOwnProperty(s[2]))break;a=a.prev}for(;a&&!a.startOfLine;)a=a.prev;return a?a.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t in d)d.hasOwnProperty(t)&&(e.attrs[t]=d[t])}function n(t,n){var r={schemaInfo:c};if(n)for(var i in n)r[i]=n[i];return e.hint.xml(t,r)}var r="ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "),i=["_blank","_self","_top","_parent"],o=["ascii","utf-8","utf-16","latin1","latin1"],a=["get","post","put","delete"],s=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],l=["all","screen","print","embossed","braille","handheld","print","projection","screen","tty","tv","speech","3d-glasses","resolution [>][<][=] [X]","device-aspect-ratio: X/Y","orientation:portrait","orientation:landscape","device-height: [X]","device-width: [X]"],u={attrs:{}},c={a:{attrs:{href:null,ping:null,type:null,media:l,target:i,hreflang:r}},abbr:u,acronym:u,address:u,applet:u,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:l,hreflang:r,type:null,shape:["default","rect","circle","poly"]}},article:u,aside:u,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["","autoplay"],loop:["","loop"],controls:["","controls"]}},b:u,base:{attrs:{href:null,target:i}},basefont:u,bdi:u,bdo:u,big:u,blockquote:{attrs:{cite:null}},body:u,br:u,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["","autofocus"],disabled:["","autofocus"],formenctype:s,formmethod:a,formnovalidate:["","novalidate"],formtarget:i,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:u,center:u,cite:u,code:u,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["","disabled"],checked:["","checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["","disabled"],multiple:["","multiple"]}},datalist:{attrs:{data:null}},dd:u,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["","open"]}},dfn:u,dir:u,div:u,dl:u,dt:u,em:u,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["","disabled"],form:null,name:null}},figcaption:u,figure:u,font:u,footer:u,form:{attrs:{action:null,name:null,"accept-charset":o,autocomplete:["on","off"],enctype:s,method:a,novalidate:["","novalidate"],target:i}},frame:u,frameset:u,h1:u,h2:u,h3:u,h4:u,h5:u,h6:u,head:{attrs:{},children:["title","base","link","style","meta","script","noscript","command"]},header:u,hgroup:u,hr:u,html:{attrs:{manifest:null},children:["head","body"]},i:u,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["","seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["","autofocus"],checked:["","checked"],disabled:["","disabled"],formenctype:s,formmethod:a,formnovalidate:["","novalidate"],formtarget:i,multiple:["","multiple"],readonly:["","readonly"],required:["","required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:u,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["","autofocus"],disabled:["","disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:u,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:r,media:l,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:u,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:o,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:u,noframes:u,noscript:u,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["","typemustmatch"]}},ol:{attrs:{reversed:["","reversed"],start:null,type:["1","a","A","i","I"]}},optgroup:{attrs:{disabled:["","disabled"],label:null}},option:{attrs:{disabled:["","disabled"],label:null,selected:["","selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:u,param:{attrs:{name:null,value:null}},pre:u,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:u,rt:u,ruby:u,s:u,samp:u,script:{attrs:{type:["text/javascript"],src:null,async:["","async"],defer:["","defer"],charset:o}},section:u,select:{attrs:{form:null,name:null,size:null,autofocus:["","autofocus"],disabled:["","disabled"],multiple:["","multiple"]}},small:u,source:{attrs:{src:null,type:null,media:null}},span:u,strike:u,strong:u,style:{attrs:{type:["text/css"],media:l,scoped:null}},sub:u,summary:u,sup:u,table:u,tbody:u,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["","autofocus"],disabled:["","disabled"],readonly:["","readonly"],required:["","required"],wrap:["soft","hard"]}},tfoot:u,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:u,time:{attrs:{datetime:null}},title:u,tr:u,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:r}},tt:u,u:u,ul:u,var:u,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["","autoplay"],mediagroup:["movie"],muted:["","muted"],controls:["","controls"]}},wbr:u},d={accesskey:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],class:null,contenteditable:["true","false"],contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["en","es"],spellcheck:["true","false"],style:null,tabindex:["1","2","3","4","5","6","7","8","9"],title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"]};t(u);for(var f in c)c.hasOwnProperty(f)&&c[f]!=u&&t(c[f]);e.htmlSchema=c,e.registerHelper("hint","html",n)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){this.cm=e,this.options=this.buildOptions(t),this.widget=this.onClose=null}function n(e){return"string"==typeof e?e:e.text}function r(e,t){function n(e,n){var i;i="string"!=typeof n?function(e){return n(e,t)}:r.hasOwnProperty(n)?r[n]:n,o[e]=i}var r={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},i=e.options.customKeys,o=i?{}:r;if(i)for(var a in i)i.hasOwnProperty(a)&&n(a,i[a]);var s=e.options.extraKeys;if(s)for(var a in s)s.hasOwnProperty(a)&&n(a,s[a]);return o}function i(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function o(t,o){this.completion=t,this.data=o;var l=this,u=t.cm,c=this.hints=document.createElement("ul");c.className="CodeMirror-hints",this.selectedHint=o.selectedHint||0;for(var d=o.list,f=0;f<d.length;++f){var h=c.appendChild(document.createElement("li")),p=d[f],m=a+(f!=this.selectedHint?"":" "+s);null!=p.className&&(m=p.className+" "+m),h.className=m,p.render?p.render(h,o,p):h.appendChild(document.createTextNode(p.displayText||n(p))),h.hintId=f}var g=u.cursorCoords(t.options.alignWithWord?o.from:null),v=g.left,b=g.bottom,y=!0;c.style.left=v+"px",c.style.top=b+"px";var w=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),x=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.options.container||document.body).appendChild(c);var k=c.getBoundingClientRect();if(k.bottom-x>0){var C=k.bottom-k.top,S=k.top-(g.bottom-g.top);if(S-C>0)c.style.top=(b=S-C)+"px",y=!1;else if(C>x){c.style.height=x-5+"px",c.style.top=(b=g.bottom-k.top)+"px";var M=u.getCursor();o.from.ch!=M.ch&&(g=u.cursorCoords(M),c.style.left=(v=g.left)+"px",k=c.getBoundingClientRect())}}var T=k.left-w;if(T>0&&(k.right-k.left>w&&(c.style.width=w-5+"px",T-=k.right-k.left-w),c.style.left=(v=g.left-T)+"px"),u.addKeyMap(this.keyMap=r(t,{moveFocus:function(e,t){l.changeActive(l.selectedHint+e,t)},setFocus:function(e){l.changeActive(e)},menuSize:function(){return l.screenAmount()},length:d.length,close:function(){t.close()},pick:function(){l.pick()},data:o})),t.options.closeOnUnfocus){var _;u.on("blur",this.onBlur=function(){_=setTimeout(function(){t.close()},100)}),u.on("focus",this.onFocus=function(){clearTimeout(_)})}var $=u.getScrollInfo();return u.on("scroll",this.onScroll=function(){var e=u.getScrollInfo(),n=u.getWrapperElement().getBoundingClientRect(),r=b+$.top-e.top,i=r-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return y||(i+=c.offsetHeight),i<=n.top||i>=n.bottom?t.close():(c.style.top=r+"px",void(c.style.left=v+$.left-e.left+"px"))}),e.on(c,"dblclick",function(e){var t=i(c,e.target||e.srcElement);t&&null!=t.hintId&&(l.changeActive(t.hintId),l.pick())}),e.on(c,"click",function(e){var n=i(c,e.target||e.srcElement);n&&null!=n.hintId&&(l.changeActive(n.hintId),t.options.completeOnSingleClick&&l.pick())}),e.on(c,"mousedown",function(){setTimeout(function(){u.focus()},20)}),e.signal(o,"select",d[0],c.firstChild),!0}var a="CodeMirror-hint",s="CodeMirror-hint-active";e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var r={hint:t};if(n)for(var i in n)r[i]=n[i];return e.showHint(r)},e.defineExtension("showHint",function(n){if(!(this.listSelections().length>1||this.somethingSelected())){this.state.completionActive&&this.state.completionActive.close();var r=this.state.completionActive=new t(this,n),i=r.options.hint;if(i)return e.signal(this,"startCompletion",this),i.async?void i(this,function(e){r.showHints(e)},r.options):r.showHints(i(this,r.options))}}),t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.widget&&this.widget.close(),this.onClose&&this.onClose(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,r){var i=t.list[r];i.hint?i.hint(this.cm,t,i):this.cm.replaceRange(n(i),i.from||t.from,i.to||t.to,"complete"),e.signal(t,"pick",i),this.close()},showHints:function(e){return e&&e.list.length&&this.active()?void(this.options.completeSingle&&1==e.list.length?this.pick(e,0):this.showWidget(e)):this.close()},showWidget:function(t){function n(){l||(l=!0,c.close(),c.cm.off("cursorActivity",s),t&&e.signal(t,"close"))}function r(){if(!l){e.signal(t,"update");var n=c.options.hint;n.async?n(c.cm,i,c.options):i(n(c.cm,c.options))}}function i(e){if(t=e,!l){if(!t||!t.list.length)return n();c.widget&&c.widget.close(),c.widget=new o(c,t)}}function a(){u&&(m(u),u=0)}function s(){a();var e=c.cm.getCursor(),t=c.cm.getLine(e.line);e.line!=f.line||t.length-e.ch!=h-f.ch||e.ch<f.ch||c.cm.somethingSelected()||e.ch&&d.test(t.charAt(e.ch-1))?c.close():(u=p(r),c.widget&&c.widget.close())}this.widget=new o(this,t),e.signal(t,"shown");var l,u=0,c=this,d=this.options.closeCharacters,f=this.cm.getCursor(),h=this.cm.getLine(f.line).length,p=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},m=window.cancelAnimationFrame||clearTimeout;this.cm.on("cursorActivity",s),this.onClose=n},buildOptions:function(e){var t=this.cm.options.hintOptions,n={};for(var r in l)n[r]=l[r];if(t)for(var r in t)void 0!==t[r]&&(n[r]=t[r]);if(e)for(var r in e)void 0!==e[r]&&(n[r]=e[r]);return n}},o.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,n){if(t>=this.data.list.length?t=n?this.data.list.length-1:0:0>t&&(t=n?0:this.data.list.length-1),this.selectedHint!=t){var r=this.hints.childNodes[this.selectedHint];r.className=r.className.replace(" "+s,""),r=this.hints.childNodes[this.selectedHint=t],r.className+=" "+s,r.offsetTop<this.hints.scrollTop?this.hints.scrollTop=r.offsetTop-3:r.offsetTop+r.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=r.offsetTop+r.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],r)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",function(t,n){var r,i=t.getHelpers(t.getCursor(),"hint");if(i.length)for(var o=0;o<i.length;o++){var a=i[o](t,n);if(a&&a.list.length)return a}else if(r=t.getHelper(t.getCursor(),"hintWords")){if(r)return e.hint.fromList(t,{words:r})}else if(e.hint.anyword)return e.hint.anyword(t,n)}),e.registerHelper("hint","fromList",function(t,n){for(var r=t.getCursor(),i=t.getTokenAt(r),o=[],a=0;a<n.words.length;a++){var s=n.words[a];s.slice(0,i.string.length)==i.string&&o.push(s)}return o.length?{list:o,from:e.Pos(r.line,i.start),to:e.Pos(r.line,i.end)}:void 0}),e.commands.autocomplete=e.showHint;var l={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,r){var i=r&&r.schemaInfo,o=r&&r.quoteChar||'"';if(i){var a=t.getCursor(),s=t.getTokenAt(a),l=e.innerMode(t.getMode(),s.state);if("xml"==l.mode.name){var u,c,d=[],f=!1,h=/\btag\b/.test(s.type),p=h&&/^\w/.test(s.string);if(p){var m=t.getLine(a.line).slice(Math.max(0,s.start-2),s.start),g=/<\/$/.test(m)?"close":/<$/.test(m)?"open":null;g&&(c=s.start-("close"==g?2:1))}else h&&"<"==s.string?g="open":h&&"</"==s.string&&(g="close");if(!h&&!l.state.tagName||g){p&&(u=s.string),f=g;var v=l.state.context,b=v&&i[v.tagName],y=v?b&&b.children:i["!top"];if(y&&"close"!=g)for(var w=0;w<y.length;++w)u&&0!=y[w].lastIndexOf(u,0)||d.push("<"+y[w]);else if("close"!=g)for(var x in i)!i.hasOwnProperty(x)||"!top"==x||"!attrs"==x||u&&0!=x.lastIndexOf(u,0)||d.push("<"+x);v&&(!u||"close"==g&&0==v.tagName.lastIndexOf(u,0))&&d.push("</"+v.tagName+">")}else{var b=i[l.state.tagName],k=b&&b.attrs,C=i["!attrs"];if(!k&&!C)return;if(k){if(C){var S={};for(var M in C)C.hasOwnProperty(M)&&(S[M]=C[M]);for(var M in k)k.hasOwnProperty(M)&&(S[M]=k[M]);k=S}}else k=C;if("string"==s.type||"="==s.string){var T,m=t.getRange(n(a.line,Math.max(0,a.ch-60)),n(a.line,"string"==s.type?s.start:s.end)),_=m.match(/([^\s\u00a0=<>\"\']+)=$/);if(!_||!k.hasOwnProperty(_[1])||!(T=k[_[1]]))return;"function"==typeof T&&(T=T.call(this,t)),"string"==s.type&&(u=s.string,/['"]/.test(s.string.charAt(0))&&(o=s.string.charAt(0),u=s.string.slice(1)),f=!0);for(var w=0;w<T.length;++w)u&&0!=T[w].lastIndexOf(u,0)||d.push(o+T[w]+o)}else{"attribute"==s.type&&(u=s.string,f=!0);for(var $ in k)!k.hasOwnProperty($)||u&&0!=$.lastIndexOf(u,0)||d.push($)}}return{list:d,from:f?n(a.line,null==c?s.start:c):a,to:f?n(a.line,s.end):a}}}}var n=e.Pos;e.registerHelper("hint","xml",t)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n])}function n(e,t){if(!Array.prototype.indexOf){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}return-1!=e.indexOf(t)}function r(t,n,r,i){var o=t.getCursor(),a=r(t,o),u=a;if(!/\b(?:string|comment)\b/.test(a.type)){for(a.state=e.innerMode(t.getMode(),a.state).state,/^[\w$_]*$/.test(a.string)||(a=u={start:o.ch,end:o.ch,string:"",state:a.state,type:"."==a.string?"property":null});"property"==u.type;){if(u=r(t,l(o.line,u.start)),"."!=u.string)return;if(u=r(t,l(o.line,u.start)),!c)var c=[];c.push(u)}var d=r(t,l(o.line,a.start));return d.type||(d=r(t,l(o.line,d.start))),"operator"==d.type&&"|"==d.string&&(n=window.availableFilters,a.state.globalVars=void 0),{list:s(a,c,n,i),from:l(o.line,a.start),to:l(o.line,a.end)}}}function i(e,t){return r(e,h,function(e,t){return e.getTokenAt(t)},t)}function o(e,t){var n=e.getTokenAt(t);return t.ch==n.start+1&&"."==n.string.charAt(0)?(n.end=n.start,n.string=".",n.type="property"):/^\.[\w$_]*$/.test(n.string)&&(n.type="property",n.start++,n.string=n.string.replace(/\./,"")),n}function a(e,t){return r(e,f,o,t)}function s(e,r,i,o){function a(e){0!=e.lastIndexOf(f,0)||n(l,e)||l.push(e)}function s(e){"string"==typeof e?t(u,a):e instanceof Array?t(c,a):e instanceof Function&&t(d,a);for(var n in e)a(n)}var l=[],f=e.string;if(r&&r.length){var h,p=r.pop();for(p.type&&0===p.type.indexOf("variable")?(o&&o.additionalContext&&(h=o.additionalContext[p.string]),o&&!1===o.useGlobalScope||(h=h||window[p.string])):"string"==p.type?h="":"atom"==p.type?h=1:"function"==p.type&&(null==window.jQuery||"$"!=p.string&&"jQuery"!=p.string||"function"!=typeof window.jQuery?null!=window._&&"_"==p.string&&"function"==typeof window._&&(h=window._()):h=window.jQuery());null!=h&&r.length;)h=h[r.pop().string];null!=h&&s(h)}else{for(var m=e.state.localVars;m;m=m.next)a(m.name);for(var m=e.state.globalVars;m;m=m.next)a(m.name);o&&!1===o.useGlobalScope||s(window),t(i,a)}return l}var l=e.Pos;e.registerHelper("hint","javascript",i),e.registerHelper("hint","coffeescript",a);var u="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),c="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),d="prototype apply call bind".split(" "),f=("break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with".split(" "),"and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ")),h="null".split(" ")});
//# sourceMappingURL=app.js.map
